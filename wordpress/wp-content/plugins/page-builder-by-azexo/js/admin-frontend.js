!function(t){"use strict";var a={next:function(t,e,n){var i,o,s=a.regexp(t);if(s.lastIndex=n||0,i=s.exec(e))return"["===i[1]&&"]"===i[7]?a.next(t,e,s.lastIndex):(o={index:i.index,content:i[0],shortcode:a.fromMatch(i)},i[1]&&(o.content=o.content.slice(1),o.index++),i[7]&&(o.content=o.content.slice(0,-1)),o)},replace:function(t,e,n){return e.replace(a.regexp(t),function(t,e,i,o,s,r,h,l){if("["===e&&"]"===l)return t;var c=n(a.fromMatch(arguments));return c?e+c+l:t})},string:function(t){return new a(t).string()},regexp:_.memoize(function(t){return new RegExp("\\[(\\[?)("+t+")(?![\\w-])([^\\]\\/]*(?:\\/(?!\\])[^\\]\\/]*)*?)(?:(\\/)\\]|\\](?:([^\\[]*(?:\\[(?!\\/\\2\\])[^\\[]*)*)(\\[\\/\\2\\]))?)(\\]?)","g")}),attrs:_.memoize(function(t){var a,e,n={},i=[];for(a=/([\w-]+)\s*=\s*"([^"]*)"(?:\s|$)|([\w-]+)\s*=\s*'([^']*)'(?:\s|$)|([\w-]+)\s*=\s*([^\s'"]+)(?:\s|$)|"([^"]*)"(?:\s|$)|(\S+)(?:\s|$)/g,t=t.replace(/[\u00a0\u200b]/g," ");e=a.exec(t);)e[1]?n[e[1].toLowerCase()]=e[2]:e[3]?n[e[3].toLowerCase()]=e[4]:e[5]?n[e[5].toLowerCase()]=e[6]:e[7]?i.push(e[7]):e[8]&&i.push(e[8]);return{named:n,numeric:i}}),fromMatch:function(t){var e;return e=t[4]?"self-closing":t[6]?"closed":"single",new a({tag:t[2],attrs:t[3],type:e,content:t[5]})}};function e(){for(var t="id",a="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",e=0;e<5;e++)t+=a.charAt(Math.floor(Math.random()*a.length));return t}function n(t,a){var e;return/^#([A-Fa-f0-9]{3}){1,2}$/.test(t)?(3===(e=t.substring(1).split("")).length&&(e=[e[0],e[0],e[1],e[1],e[2],e[2]]),"rgba("+[(e="0x"+e.join(""))>>16&255,e>>8&255,255&e].join(",")+","+a+")"):t}function i(a){return t("<div/>").text(a).html()}function o(a){return t("<div/>").html(a).text()}function s(a){var e="";try{var n=0,i=!1,o={};AZHParser(a,{start:function(t,a,s){if(o[t])i=!0;else{e+=Array(1*n+1).join("\t")+"<"+t;for(var r=0;r<a.length;r++)a[r].value.indexOf('"')>=0&&a[r].value.indexOf("'")<0?e+=" "+a[r].name+"='"+a[r].value+"'":e+=" "+a[r].name+'="'+a[r].escaped+'"';e+=(s?"/":"")+">\n",s||n++}},end:function(t){o[t]?i=!1:(n--,e+=Array(1*n+1).join("\t")+"</"+t+">\n")},chars:function(a){t.trim(a)&&!i&&(e+=Array(1*n+1).join("\t")+a.replace(/[\t\r\n]+/g,"").replace(/(^|}}|%}|>)(\s{2,})(<|{%|{{)/g,"$1\n$2$3")+"\n")},comment:function(t){e+=Array(1*n+1).join("\t")+"\x3c!--"+t.replace(/[\t\r\n]+/g,"")+"--\x3e\n"}})}catch(t){return!1}return e}function r(a){var e="";try{var n=!1,s={};AZHParser(a,{start:function(t,a,r){if(s[t])n=!0;else{e+="<"+t;for(var h=0;h<a.length;h++){var l=a[h].value;/&[^\s]+;/.test(l)&&(l=o(l)),(l.indexOf(">")||l.indexOf("<"))&&(l=i(l)),l.indexOf('"')>=0&&l.indexOf("'")<0?e+=" "+a[h].name+"='"+l+"'":(l=l.replace(/(^|[^\\])"/g,'$1\\"'),e+=" "+a[h].name+'="'+l+'"')}e+=(r?"/":"")+">"}},end:function(t){s[t]?n=!1:e+="</"+t+">"},chars:function(a){t.trim(a)&&!n&&(e+=a.replace(/[\t\r\n]+/g,""))},comment:function(t){e+="\x3c!--"+t.replace(/[\t\r\n]+/g,"")+"--\x3e\n"}})}catch(t){return!1}return e}function h(t){return t=t.replace(/<script ([^>]*?) src=([^>]*?)>(.*?)<\/script>/g,"<az_script $1 src=$2>$3</az_script>")}function l(t){return t=(t=t.replace(/<az_script/g,"<script")).replace(/<\/az_script>/g,"<\/script>")}a=_.extend(function(t){_.extend(this,_.pick(t||{},"tag","attrs","type","content"));var e=this.attrs;this.attrs={named:{},numeric:[]},e&&(_.isString(e)?this.attrs=a.attrs(e):_.isEqual(_.keys(e),["named","numeric"])?this.attrs=e:_.each(t.attrs,function(t,a){this.set(a,t)},this))},a),_.extend(a.prototype,{get:function(t){return this.attrs[_.isNumber(t)?"numeric":"named"][t]},set:function(t,a){return this.attrs[_.isNumber(t)?"numeric":"named"][t]=a,this},string:function(){var t="["+this.tag;return _.each(this.attrs.numeric,function(a){/\s/.test(a)?t+=' "'+a+'"':t+=" "+a}),_.each(this.attrs.named,function(a,e){t+=" "+e+'="'+a+'"'}),"single"===this.type?t+"]":"self-closing"===this.type?t+" /]":(t+="]",this.content&&(t+=this.content),t+"[/"+this.tag+"]")}});var c=t(window),d=t(document),z=t("body");function p(){var t=azh.body.prop("clientWidth");return c.get(0)!=azh.window.get(0)&&(t=azh.window.prop("innerWidth")),t}window.azh=t.extend({},window.azh),azh.$=t,azh.window=c,azh.window_off=function(t){return c.off(t),azh.window.off(t),azh},azh.window_on=function(t,a){return c.on(t,function(t){a(t)}),c.get(0)!=azh.window.get(0)&&azh.window.on(t,function(t){a(t)}),azh},azh.document=d,azh.document_off=function(t){return d.off(t),azh.document.off(t),azh},azh.document_on=function(t,a){return d.on(t,function(t){a(t)}),c.get(0)!=azh.window.get(0)&&azh.document.on(t,function(t){a(t)}),azh},azh.body=z,azh.body_off=function(t){return z.off(t),azh.body.off(t),azh},azh.body_on=function(t,a){return z.on(t,function(t){a(t)}),c.get(0)!=azh.window.get(0)&&azh.body.on(t,function(t){a(t)}),azh},azh.section_controlled_device_prefixes=["lg","md"],azh.element_controlled_device_prefixes=["lg","md","sm"],azh.column_offset_patterns={lg:/[ '"-]col-lg-offset-([0-9]?[0-9])[ '"]/gi,md:/[ '"-]col-md-offset-([0-9]?[0-9])[ '"]/gi,sm:/[ '"-]col-sm-offset-([0-9]?[0-9])[ '"]/gi,xs:/[ '"-]col-xs-offset-([0-9]?[0-9])[ '"]/gi},azh.column_width_patterns={lg:/[\w\d-_]+-col-lg-([0-9]?[0-9])/gi,md:/[\w\d-_]+-col-md-([0-9]?[0-9])/gi,sm:/[\w\d-_]+-col-sm-([0-9]?[0-9])/gi,xs:/[\w\d-_]+-col-xs-([0-9]?[0-9])/gi},azh.do_replaces=function(t){t=(t=(t=(t=(t=t.replace(/\[\[([^\]]+)\]\]/g,"")).replace(/\[azh_text\]/g,"")).replace(/\[\/azh_text\]/g,"")).replace(/href="\/"/g,'href="http://azexo.com"')).replace(/href="#"/g,'href="http://azexo.com"');for(var a=/{{id-(\d+)}}/g,n=null,i={};null!=(n=a.exec(t))&&2==n.length;)i[n[1]]=!0;for(var o in i){var s="id"+e();a=new RegExp("{{id-"+o+"}}","g"),t=t.replace(a,s)}return t},azh.clipboard=!1,azh.sections_cache={},azh.notify=function(a){var e=!1;(e=t(".azh-notify").length?t(".azh-notify"):t('<div class="azh-notify"></div>').appendTo(z)).text(a),e.slideDown(function(){setTimeout(function(){e.slideUp()},3e3)})},azh.click_not_hide_contextmenu=".azh-devices, #wp-link-wrap, .media-modal, .azh-icon-select-dialog, .select2-container",azh.unlimited_max_wrapper="form, .az-form, .az-swiper, .az-template",azh.possible_controls_selector_start=["[data-element]",".azh-row","form"],azh.standard_elements_start_classes=t.extend({},azh.standard_elements_start_classes),azh.dynamic_content=".az-liquid-element","cssjs"in window&&(azh.cssjs=new cssjs),azh.convert_to_embed=function(t){var a;return(a=function(t){var a=t.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#\&\?]*).*/);return!(!a||11!=a[7].length)&&a[7]}(t))?"//www.youtube.com/embed/"+a:(a=function(t){var a=/vimeo.*\/(\d+)/i.exec(t);return!!a&&a[1]}(t))?"//player.vimeo.com/video/"+a:t};var u="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAMAAABHPGVmAAAB8lBMVEUAAABcXFxmZmZnZ2eZmZmampqrq6uwsLC9vb2+vr7AwMDBwcHCwsLExMTFxcXGxsbJycnS0tLT09PZ2dna2trb29vd3d3f39/g4ODl5eXp6enq6urr6+vw8PDy8vLz8/P19fX4+Pj6+vr9/f3////V1dX////////S0tLT09PT09PU1NTAwMDCwsLCwsLOzs7h4eHi4uLk5OTl5eXm5ubPz8/a2trb29ve3t6+vr7R0dHQ0NDU1NTS0tLT09PU1NTDw8PAwMDBwcHR0dHR0dHU1NSoqKjS0tLR0dHS0tLT09POzs7Pz8/Q0NDOzs7Pz8/Ozs7Pz8/Q0NDOzs7Pz8+oqKioqKjPz8+mpqanp6fOzs7Pz8/Q0NDOzs7Pz8+jo6Ojo6OioqLR0dHS0tKjo6PNzc3Ozs6hoaHOzs7Ozs6ioqLNzc3Nzc3Nzc3Nzc3Nzc3Nzc3MzMzNzc2goKDNzc2goKDNzc3Ozs7Nzc3Nzc3Nzc2enp6fn5/Nzc3MzMzNzc3Nzc2enp6enp6enp7Nzc3Nzc3Nzc2dnZ2enp6cnJycnJzMzMzMzMzMzMzNzc3MzMzNzc3Nzc2dnZ2bm5ucnJzNzc3Nzc2bm5ucnJycnJzMzMzMzMzMzMzMzMzMzMzMzMyamprMzMyYmJiZmZmamprMzMyJ6HxFAAAAonRSTlMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgIDBgYLCwwMDQ4ODg4ODg8PDw8RFBUVFhYWGhsbGxwcJiYnJyc2NjY3Nzg4OTo6P0BAQkJGRkxOTlVWV1dXWFpaXmJjcHd4eXt9foODhYWGhoaeoKGoqKiqqquwsbKyubq7u8HCxs3Oz9DQ0dTh4u3v8PDy9Pb4+fr7/f5KuRpkAAAEXUlEQVR4Ae2Z6VcUVxDFr1kUYaKORjQuiQpxXDRmiUlQY3DBRaMCmowLjLssw4IiKigusqhxj9EkgCwN9X/mve4+3V1Mk65uOPOpf2c+zXnn3HNfvXqvqhp5JSYmJiYm5nMoKqprLl6sqa6w/5hZPgWOtPW/I4d3/W1H9N8zyZl75MO9M5ghvsDa1gGagoHWtWrBDHCTXN6+6uvt7Xv1llxuYrosxJVhsnjf3XAIDvvru9+TxfAVtWw6bHhKFl1VwGx4mA8c7SSLpxswDdJjpBlpKkUxcigGspbPsTQi8hmyZHID/8M1Msmq5RFYjFukebETqzAly7HjGWluYXEUH3dJ0xIU1YVoJs3dKF5MH0MnIKDK9hIaOx61kLB30IpLSNKkkaoUbDdV0ghDcuOY3ivSZEQqe8yTvDGJEJg5eLxW7gWVZlYiBJetc4WM3It1xi5DymroPH4JRRgvz/U9htUQcoMUvyShyIhVktvc20FAihTXYVEr37GrpEhBRqu+E7GGqdSi9O9xzm8fg2Pucitk6HewCTZu9FNvuMifvgk8AAmLTpMCGu5lsorx+0fggBSnF0HAff1GwUvGo2Lo31RW9Ct2HxJIUbkENhPjf6Wc6Kdun98FlJ99wCxNwGbpYVIgmJJj+j0HXJHxNyk3XwqLgWVzUfbYtmMYrohCv/vHShBIm1rXzUSUipv7J9s76rYggUZT48k33z7xinSrRW0Ipl+ta5jjFWFe1uvo92yehUYdne8SRV8brsiCBrWmH8HoWvQgc+J6cc7Y6L4P8EiJfF/4yU8eERzQFaww7mAizEvGVtlUVKa364cf//BuF2SRr9B1IhcxuQOeLz3Aw9zAQ9eWFQiiWq167SNyKQGe+1vnneNH2OS1WlCNIGrUqr5cEWP3ilPrmJe6leVGrkgfEdUgiAtqVa+PE6CdR78D8HHSS0QXpiHSwaPfLhcRb1f5yjqWL+tOrdgt3y5h4M/N28pzH4lLwsDLj/BDoIfnPu5wEX6Ewyejpqxo02hu7mvEycivlQM+Io/w4b7R3NznIgf1tSK8IOsX5IoYjZi12dyx9Z584SJz2AUZ7qq3aUQCW+o62k/y3A+46mWPloPxuAxzlwHFhWBeJj1av5YIr+HDS5mIw4Oz5cCu87dZ9B2RJZWkgLSQ6IS/iF1I8Oi7TrpYISEviSb8+ecrd8f+jVASYUDSNX3pU/M3mcWdvEwdhgBe86/BiKBMZQX3VQjgNf91ScHNW4dtSQTBav7kz7x1EDVBzxFyx17yJkjWzjVDgBv9Ft7OSRvTyjBejvPGVNxi054CuZch3mLLhwWD2wvEXjTpSGOPwb0IoZKNOMChKgg4MRR+gMNGUc3Bo6iWSKMoNlR7tgPLMSWrsPNF1KEaGw9eC7gdBONBwaBzOAv/QWdp04hg0Cke2XYeBebDw2ygqks8spUPn+v3w+FQAx8+52uMnv8PAvn/tJH/jzT5/9wkJyYmJiYm5j/qBxqDoN+AlgAAAABJRU5ErkJggg==",f=function(t){if(""==t)return{};for(var a={},e=0;e<t.length;++e){var n=t[e].split("=");2==n.length&&(a[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}return a},v=function(t,a,e){var n={};2===(t=t.split("?")).length&&(n=f(t[1].split("&")));var i={};for(var o in n)i[o]=o===a?encodeURIComponent(e):encodeURIComponent(n[o]);return a in n||(i[a]=encodeURIComponent(e)),i=Object.entries(i).map(function(t,a,e){return t[0]+"="+t[1]}),1===t.length?t.push(i.join("&")):t[1]=i.join("&"),t=""!==t[1]?t.join("?"):t[0]},g=function(t,a){var e={};return 2===(t=t.split("?")).length&&(e=f(t[1].split("&"))),a in e&&e[a]},m='.az-empty-inner-html, iframe, [data-shortcode], [data-element*="shortcode"]',b=function(t){var a=azh.$(t),e=t.outerHTML;""!==t.innerHTML&&(e=t.outerHTML.replace(">"+t.innerHTML+"<","><")),e.indexOf("></")>=0?(e=e.split("></"),a.data("azh-open-tag",e[0]+">"),a.data("azh-close-tag","</"+e[1])):a.data("azh-open-tag",e),a.is(".az-fixed-inner-html, .az-gmap")&&a.data("azh-fixed-inner-html",t.innerHTML),a.is(m)||a.children().each(function(){b(this)})};var k=function(t,a){var e="";return void 0!==t.data("azh-fixed-inner-html")?e+=t.data("azh-fixed-inner-html"):t.is(m)||t.contents().each(function(){var t=azh.$(this);if(t.is('[data-element*="shortcode"]')){var n=t.attr("data-element"),i=azh.shortcode_instances[n];i&&(a&&A(t,"data-element","shortcode"),e=e+t.data("azh-open-tag")+i+t.data("azh-close-tag"),a&&A(t,"data-element",n))}else 1===this.nodeType&&t.data("azh-open-tag")&&t.data("azh-close-tag")&&(e=e+t.data("azh-open-tag")+k(azh.$(this),a)+t.data("azh-close-tag")),1===this.nodeType&&t.data("azh-open-tag")&&!t.data("azh-close-tag")&&(e+=t.data("azh-open-tag")),1!==this.nodeType||t.data("azh-open-tag")||t.data("azh-close-tag")||(e+=k(azh.$(this),a)),3===this.nodeType&&(e+=this.textContent),8===this.nodeType&&(e=e+"\x3c!--"+this.textContent+"--\x3e")}),e},y=function(t){t.find("ul, ol").each(function(){var t=azh.$(this);t.attr("data-cloneable",""),A(t,"data-cloneable","")}),function t(a,e){var n=1,i=!1,o=!0;return a.is(m)||(a.children().each(function(){var a=t(azh.$(this));if(n<a&&(n=a+1),n<10){var e=function(t){var a,e=0;if(0===t.length)return e;for(a=0;a<t.length;a++)e=(e<<5)-e+t.charCodeAt(a),e|=0;return e}(JSON.stringify(function t(a){var e=[];azh.$(a.get(0).attributes).each(function(){e.push(this.nodeName)});var n={tagName:a.prop("tagName"),attributes:e,css:a.css(["display","float","position"]),children:[]};return a.children().each(function(){n.children.push(t(azh.$(this)))}),n}(azh.$(this))));if(i){if(i!=e)return o=!1,!1}else i=e}}),a.children().length>1&&i&&o&&(a.attr("data-cloneable")||a.attr("data-cloneable-inline")||0===a.find('> [class*="-col-"]').length&&(a.attr("data-cloneable",""),A(a,"data-cloneable","")))),n}(t);for(var a=azh.document.get(0),e=0;e<a.styleSheets.length;e++)try{var n=a.styleSheets[e].rules||a.styleSheets[e].cssRules;if(n)for(var i=0;i<n.length;i++)if("selectorText"in n[i]&&0===n[i].selectorText.indexOf("#")&&n[i].selectorText.indexOf(" ")<0&&n[i].selectorText.indexOf(",")<0){var o=azh.$(n[i].selectorText);if(1===o.length&&azh.$.contains(t,o)){var s=/[\S\s]*{([^{}]*)}[\S\s]*/.exec(n[i].cssText);if(s.length>1)for(var r=s[1].split(";"),h=0;h<r.length;h++){var l=r[h].split(":");o.css(l[0],l[1]),P(o,l[0],l[1])}}}}catch(t){}},w=function(a){a.find("[data-shortcode]").addBack().filter("[data-shortcode]").each(function(){var a=azh.$(this),e=a.attr("data-shortcode"),n=azh.shortcode_instances[e];t.post(azh.ajaxurl,{action:"azh_update_shortcode",post_id:azh.post_id,instance:e,shortcode:n},function(t){if(t){var n=a.closest("[data-section]");a.replaceWith(t),a.find("a[href]").on("click",function(t){t.preventDefault()}),a=n.find('[data-shortcode="'+e+'"]'),b(a.get(0)),azh.section_customization_init(n)}})}),a.find('[data-element*="shortcode"]').addBack().filter('[data-element*="shortcode"]').each(function(){var a=azh.$(this),n=a.attr("data-element"),i=azh.shortcode_instances[n];"shortcode"!==n&&i||(n="shortcode: "+e(),i=a.html(),azh.shortcode_instances[n]=i,a.attr("data-element",n),A(a,"data-element",n),a.data("element",n)),t.post(azh.ajaxurl,{action:"azh_update_shortcode",post_id:azh.post_id,instance:n,shortcode:i},function(t){t&&(a.html(t),a.find("a[href]").on("click",function(t){t.preventDefault()}))})})};function x(t){t.find('[data-element*="shortcode"]').addBack().filter('[data-element*="shortcode"]').each(function(){var t=azh.$(this),a=t.attr("data-element"),n=azh.shortcode_instances[a];n&&(a="shortcode: "+e(),azh.shortcode_instances[a]=n,t.attr("data-element",a),A(t,"data-element",a),t.data("element",a))})}var $=function(a,e){t(".wp-picker-open").trigger("click");var n=azh.window.scrollTop();Dt();var i=a.is(".azh-saved-utility");void 0===e&&(azh.liquid_prepare(a),e=k(a.wrap("<div></div>").parent()));var o=azh.$(e);return w(o),o.find(".azh-over").removeClass("azh-over"),b(o.get(0)),E(a),o.data("azh-section-path",a.data("azh-section-path")),o.data("azh-section-path").data("azh-section",o),a.replaceWith(o),i&&a.addClass("azh-saved-utility"),azh.section_customization_init(o),azh.frontend_init&&azh.frontend_init(o),azh.window.trigger("resize"),azh.window.scrollTop(n),t(".azh-context-menu").hide(),_.defer(Et),o},T=function(t,a){t.data("azh-open-tag",t.data("azh-open-tag").replace(/<\w+ /,"<"+a+" ")),t.data("azh-close-tag",t.data("azh-close-tag").replace(/<\/\w+>/,"</"+a+">"))},C=function(t,a){var e="";return AZHParser(t.data("azh-open-tag"),{start:function(t,n,i){for(var o=0;o<n.length;o++)if(n[o].name===a){e=n[o].value;break}},end:function(t){},chars:function(t){}}),e},A=function(t,a,e,n,i){"string"==typeof e&&e.indexOf('"')>=0&&(e=e.replace(/"/g,"'").replace(/\s\s+/g," "));var o=e,s="";return AZHParser(t.data("azh-open-tag"),{start:function(t,r,h){s+="<"+t;for(var l=!1,c=0;c<r.length;c++){if(r[c].name==a)if(n)n.test(r[c].value)&&(o=r[c].value.replace(n,"$1"+e+"$3"),s+=" "+r[c].name+'="'+o+'"',l=!0);else s+=" "+r[c].name+'="'+e+'"',l=!0;else r[c].value.indexOf('"')>=0&&r[c].value.indexOf("'")<0?s+=" "+r[c].name+"='"+r[c].value+"'":s+=" "+r[c].name+'="'+r[c].escaped+'"'}l||(n&&i?(o=i.replace(n,"$1"+e+"$3"),s+=" "+a+'="'+o+'"'):s+=" "+a+'="'+e+'"'),s+=(h?"/":"")+">"},end:function(t){},chars:function(t){}}),t.data("azh-open-tag",s),azh.change(),o},M=function(t,a){var e="";AZHParser(t.data("azh-open-tag"),{start:function(t,n,i){e+="<"+t;for(var o=0;o<n.length;o++)n[o].name!==a&&(n[o].value.indexOf('"')>=0&&n[o].value.indexOf("'")<0?e+=" "+n[o].name+"='"+n[o].value+"'":e+=" "+n[o].name+'="'+n[o].escaped+'"');e+=(i?"/":"")+">"},end:function(t){},chars:function(t){}}),t.data("azh-open-tag",e),azh.change()},I=function(a,e){var n=C(a,"class");(n=n?n.split(" ").filter(function(t){return""!==t}):[]).push(t.trim(e)),n=n.filter(function(t,a,e){return e.indexOf(t)===a}).join(" "),A(a,"class",n)},j=function(a,e){var n=C(a,"class"),i=(n=n?n.split(" ").filter(function(t){return""!==t}):[]).indexOf(t.trim(e));i>-1&&n.splice(i,1),n=n.join(" "),A(a,"class",n)},N=function(a,e,n){var i=C(a,"style"),o=[];i&&(o=i.split(";")),i="";var s="";if(t(o).each(function(){var a=/\s*([\w-]+):\s*(.*)\s*/.exec(this);if(a&&t.trim(a[1])===e)return s=a[2],!1}),n){var r=s.match(n);return r&&4===r.length?r[2]:""}return s},B=function(t){var a=!1;return t&&("min"in t||"max"in t)&&(a=[],"min"in t&&a.push("(min-width: "+t.min+"px)"),"max"in t&&a.push("(max-width: "+t.max+"px)"),a="@media "+(a=a.join(" and "))),a},R=function(a,e,n,i,o){var s="",r=a.children("style.az-css-rules");if(n=t.trim(n),r.length){var h=azh.cssjs.parseCSS(r.text()),l=B(e);l?t(h).each(function(){"media"===this.type&&this.selector===l&&t(this.subStyles).each(function(){this.selector===n&&t(this.rules).each(function(){this.directive===i&&(s=this.value)})})}):t(h).each(function(){this.selector===n&&t(this.rules).each(function(){this.directive===i&&(s=this.value)})})}if(o){var c=s.match(o);return c&&4===c.length?c[2]:""}return s},P=function(a,e,n,i,o){var s=n,r=C(a,"style"),h=[];r&&(h=r.split(";")),r="";var l=!1;return t(h).each(function(){var a=/\s*([\w-]+):\s*(.*)\s*/.exec(this);a&&(t.trim(a[1])===e?""!==n&&(i?i.test(a[2])&&(s=a[2].replace(i,"$1"+n+"$3"),r+=a[1]+": "+s+"; ",l=!0):(r+=a[1]+": "+n+"; ",l=!0)):r+=a[1]+": "+a[2]+"; ")}),l||""===n||(i&&o?(s=o.replace(i,"$1"+n+"$3"),r+=e+": "+s):r+=e+": "+n),A(a,"style",r),s},O=function(a,e,n,i,o,s,r){var h=o,l=!1,c=a.children("style.az-css-rules");n=t.trim(n),c.length||(c=azh.$('<style class="az-css-rules"></style>').appendTo(a),b(c.get(0)));var d=azh.cssjs.parseCSS(c.text()),z=B(e),p=!1;if(z){var u=!1;t(d).each(function(){"media"===this.type&&this.selector===z&&(u=this,t(this.subStyles).each(function(){if(this.selector===n){p=this;var a=[];t(this.rules).each(function(){this.directive===i?""!==o&&(s?s.test(this.value)&&(h=this.value.replace(s,"$1"+o+"$3"),this.value=h,l=!0,a.push(this)):(this.value=o,l=!0,a.push(this))):a.push(this)})}}))}),p||(p={selector:n,rules:[]},u&&u.subStyles.push(p)),u||(u={selector:z,type:"media",subStyles:[p]},d.push(u))}else t(d).each(function(){if(this.selector===n){p=this;var a=[];t(this.rules).each(function(){this.directive===i?""!==o&&(s?s.test(this.value)&&(h=this.value.replace(s,"$1"+o+"$3"),this.value=h,l=!0,a.push(this)):(this.value=o,l=!0,a.push(this))):a.push(this)}),this.rules=a}}),p||(p={selector:n,rules:[]},d.push(p));l||""===o||(s&&r?(h=r.replace(s,"$1"+o+"$3"),p.rules.push({directive:i,value:h})):p.rules.push({directive:i,value:o})),d.sort(function(t,a){return t.type&&!a.type?1:!t.type&&a.type?-1:0});var f=azh.cssjs.getCSSForEditor(d);return c.text(f),h},Y=function(a,e,n,i,o){var s=C(a,e),r=[];s&&(r=s.split(";")),s="";var h="";if(t(r).each(function(){var a=/\s*([\w-]+):\s*(.*)\s*/.exec(this);if(a&&t.trim(a[1])==n)return h=a[2],!1}),i){var l=h.match(i);return l&&4===l.length?l[2]:(l=o.match(i))[2]}return h},S=function(a,e,n,i,o,s){var r=C(a,e),h=[];r&&(h=r.split(";"));var l="",c=!1;t(h).each(function(){var a=/\s*([\w-]+):\s*(.*)\s*/.exec(this);a&&(t.trim(a[1])==n?""!==i&&(o?o.test(a[2])&&(l+=a[1]+": "+a[2].replace(o,"$1"+i+"$3")+"; ",c=!0):(l+=a[1]+": "+i+"; ",c=!0)):l+=a[1]+": "+a[2]+"; ")}),c||""===i||(l+=o&&s?n+": "+s.replace(o,"$1"+i+"$3"):n+": "+i),(l||r)&&A(a,e,l)},D=function(t,a){var e=N(t,a);if("lg"!==azh.device_prefix){var n=Y(t,"data-responsive-"+azh.device_prefix,a);n&&(e=n)}return e},E=function(t){t.find(".azh-controls").addBack().filter(".azh-controls").each(function(){azh.$(this).removeClass("azh-controls"),azh.$(this).data("azh-controls").remove(),azh.$(this).data("azh-controls",!1)}),t.find(".azh-cloneable-controls").addBack().filter(".azh-cloneable-controls").each(function(){azh.$(this).removeClass("azh-cloneable-controls"),azh.$(this).data("azh-cloneable-controls").remove(),azh.$(this).data("azh-cloneable-controls",!1)}),t.find(".azh-item-controls").addBack().filter(".azh-item-controls").each(function(){azh.$(this).removeClass("azh-item-controls"),azh.$(this).data("azh-item-controls").remove(),azh.$(this).data("azh-item-controls",!1)}),t.data("azh-height-top-resizer")&&t.data("azh-height-top-resizer").remove(),t.data("azh-height-bottom-resizer")&&t.data("azh-height-bottom-resizer").remove(),t.data("azh-width-right-resizer")&&t.data("azh-width-right-resizer").remove(),t.data("azh-width-left-resizer")&&t.data("azh-width-left-resizer").remove(),t.find(".azh-grid").addBack().filter(".azh-grid").each(function(){azh.$(this).children().each(function(){azh.$(this).data("azh-resizer")&&(azh.$(this).data("azh-resizer").remove(),azh.$(this).data("azh-resizer",!1))})})},X=function(a){t(".wp-picker-open").trigger("click"),a.find(".azh-linked-controls").addBack().filter(".azh-linked-controls").each(function(){azh.$(this).data("azh-linked-controls",!1)}),a.find(".azh-controls").addBack().filter(".azh-controls").each(function(){var t=azh.$(this),a=t.data("azh-controls"),e=a.clone(!0);e.removeClass("azh-hidden-control"),e.insertAfter(a),t.data("azh-controls",e),e.data("azh-linked-node",t).find("*").data("azh-linked-node",t),t.is("[data-element]")&&e.data("azh-linked-element",t).find("*").data("azh-linked-element",t),e.find(".azh-utility-wrapper").remove()}),a.find(".azh-cloneable-controls").addBack().filter(".azh-cloneable-controls").each(function(){var t=azh.$(this),a=t.data("azh-cloneable-controls"),e=a.clone(!0);e.removeClass("azh-hidden-control"),e.insertAfter(a),t.data("azh-cloneable-controls",e),e.data("azh-linked-node",t).find("*").data("azh-linked-node",t)}),a.find(".azh-cloneable-child-controls").addBack().filter(".azh-cloneable-child-controls").each(function(){var t=azh.$(this),a=t.data("azh-cloneable-child-controls"),e=a.clone(!0);e.removeClass("azh-hidden-control"),e.insertAfter(a),t.data("azh-cloneable-child-controls",e),e.data("azh-linked-node",t).find("*").data("azh-linked-node",t)}),a.find(".azh-item-controls").addBack().filter(".azh-item-controls").each(function(){var t=azh.$(this),a=t.data("azh-item-controls"),e=a.clone(!0);e.removeClass("azh-hidden-control"),e.insertAfter(a),t.data("azh-item-controls",e),e.data("azh-linked-node",t),e.data("azh-linked-node",t).find("*").data("azh-linked-node",t)}),a.find(".azh-grid").addBack().filter(".azh-grid").each(function(){azh.$(this).children().each(function(){var t=azh.$(this),a=t.data("azh-resizer");if(a){var e=a.clone(!0);e.removeClass("azh-hidden-control"),e.insertAfter(a),t.data("azh-resizer",e),a.data("azh-column",t.prev()),a.data("azh-next-column",t)}var n=t.data("azh-controls");n&&(n.removeClass("azh-hidden-control"),n.children().data("azh-column",t),n.children().data("azh-prev-column",t.prev()),n.children().data("azh-next-column",t.next()))})})},q=function(a){azh.controls_container=!1,t(".azh-controls-container").length?(azh.controls_container=t(".azh-controls-container"),azh.controls_container.detach()):azh.controls_container=t('<div class="azh-controls-container"></div>'),a.find(".azh-controls").addBack().filter(".azh-controls").trigger("mousemove"),a.find(".azh-grid").addBack().filter(".azh-grid").trigger("mousemove"),azh.controls_container.appendTo(z)},F=function(t,a){var e=t.get(0).getBoundingClientRect();a.is(".az-top-right-controls")?(a.css("left","auto"),a.css("right",p()-e.left-e.width+"px"),a.css("top",e.top+azh.window.scrollTop()-a.height()+"px")):a.is(".az-bottom-right-controls")?(a.css("left","auto"),a.css("right",p()-e.left-e.width+"px"),a.css("top",e.top+azh.window.scrollTop()+e.height+"px")):a.is(".az-bottom-left-controls")?(a.css("right","auto"),a.css("left",e.left+"px"),a.css("top",e.top+azh.window.scrollTop()+e.height+"px")):(a.css("right","auto"),a.css("left",e.left+"px"),a.css("top",e.top+azh.window.scrollTop()-a.height()+"px"))},H={},W={};function L(t,a){function e(){var t=!0;for(var e in H)if(!1!==H[e]){t=!1;break}t&&a&&(clearInterval(o),a())}function n(t){W[t]=H[t],H[t]=!1,e()}if("css"in t)for(var i in t.css)!function(a){t.css[a]in W||t.css[a]in H||(H[t.css[a]]=azh.$("<link/>",{rel:"stylesheet",type:"text/css",href:t.css[a]}).appendTo("head").on("load",function(){n(t.css[a])}))}(i);if("js"in t)for(var i in t.js)!function(a){if(!(t.js[a]in W||t.js[a]in H)){var e=azh.document.get(0).createElement("script");H[t.js[a]]=azh.$(e).appendTo("head"),e.onload=function(){n(t.js[a])},e.src=t.js[a]}}(i);var o=setInterval(e,100)}function U(a,e,n){function i(){t.post(azh.ajaxurl,{action:"azh_get_scripts_urls",content:a},function(t){L(t,n)},"json")}azh.files_scripts[e]?L(azh.files_scripts[e],function(){i()}):i()}function J(a,n,i){var o=t('<div class="azh-modal"></div>');t('<div class="azh-modal-title">'+a.title+"</div>").appendTo(o),t('<div class="azh-modal-desc">'+a.desc+"</div>").appendTo(o),t('<div class="azh-modal-label">'+a.label+"</div>").appendTo(o);var s=e();t('<div id = "'+s+'" class="azh-ace"></div>').appendTo(o);var r=t('<div class="azh-modal-actions"></div>').appendTo(o);t('<div class="azh-modal-ok">'+azh.i18n.ok+"</div>").appendTo(r).on("click",function(){return i(h.getSession().getValue())&&t.simplemodal.close(),!1}),t('<div class="azh-modal-cancel">'+azh.i18n.cancel+"</div>").appendTo(r).on("click",function(){return t.simplemodal.close(),!1}),o.simplemodal({autoResize:!0,overlayClose:!0,opacity:0,overlayCss:{"background-color":"black"},closeClass:"azh-close",onClose:function(){t.simplemodal.close()}});var h=ace.edit(s);h.setTheme("ace/theme/chrome"),h.getSession().setMode("ace/mode/html"),h.getSession().setValue(n),h.resize()}function V(a,e,n){var i=t('<div class="azh-modal"></div>');if(t('<div class="azh-modal-title">'+a.title+"</div>").appendTo(i),t('<div class="azh-modal-desc">'+a.desc+"</div>").appendTo(i),t('<div class="azh-modal-label">'+a.label+"</div>").appendTo(i),"options"in a){var o=t('<select class="azh-modal-control"></select>').appendTo(i).on("change",function(){e=t(this).find("option:selected").attr("value")});for(var e in a.options)e==e?t('<option value="'+e+'" selected>'+a.options[e]+"</option>").appendTo(o):t('<option value="'+e+'">'+a.options[e]+"</option>").appendTo(o)}else t('<textarea class="azh-modal-control">'+e+"</textarea>").appendTo(i).on("change",function(){e=t(this).val()});var s=t('<div class="azh-modal-actions"></div>').appendTo(i);t('<div class="azh-modal-ok">'+azh.i18n.ok+"</div>").appendTo(s).on("click",function(){return t.simplemodal.close(),n(e),!1}),t('<div class="azh-modal-cancel">'+azh.i18n.cancel+"</div>").appendTo(s).on("click",function(){return t.simplemodal.close(),!1}),i.simplemodal({autoResize:!0,overlayClose:!0,opacity:0,overlayCss:{"background-color":"black"},closeClass:"azh-close",onClose:function(){t.simplemodal.close()}})}function Q(t,a){if(document.selection)t.focus(),document.selection.createRange().text=a;else if(t.selectionStart||"0"==t.selectionStart){var e=t.selectionStart,n=t.selectionEnd;t.value=t.value.substring(0,e)+a+t.value.substring(n,t.value.length)}else t.value+=a}function G(t){var e=Object.keys(azh.shortcodes).join("|"),n=a.regexp(e);t.match(n);return n.exec(t)}function K(t,a,e){a="["+t.base;var n=!1;return"content"in e&&(n=e.content),a+=Object.keys(e).map(function(t){return"content"==t?"":" "+t+'="'+e[t]+'"'}).join(""),a+="]",n&&(a+=n+"[/"+t.base+"]"),a}function Z(t){t.data("azh-detach-parent",t.parent()),t.data("azh-detach-index",t.parent().children().index(t)),t.data("azh-focus",!1),t.find('[contenteditable="true"]:focus').length&&(t.data("azh-focus",t.find('[contenteditable="true"]:focus')),t.data("azh-caret-start",function(t){var a,e,n=0;if(azh.window.get(0).getSelection)(a=azh.window.get(0).getSelection()).rangeCount&&(e=a.getRangeAt(0)).commonAncestorContainer.parentNode==t&&(n=e.endOffset);else if(azh.document.get(0).selection&&azh.document.get(0).selection.createRange&&(e=azh.document.get(0).selection.createRange()).parentElement()==t){var i=azh.document.get(0).createElement("span");t.insertBefore(i,t.firstChild);var o=e.duplicate();o.moveToElementText(i),o.setEndPoint("EndToEnd",e),n=o.text.length}return n}(t.find('[contenteditable="true"]:focus').get(0)))),t.detach()}function tt(t){var a,e,n,i;0===t.data("azh-detach-index")?t.prependTo(t.data("azh-detach-parent")):t.insertAfter(t.data("azh-detach-parent").children().eq(t.data("azh-detach-index")-1)),t.data("azh-focus")&&(a=t.data("azh-focus").get(0),e=t.data("azh-caret-start"),n=azh.document.get(0).createRange(),i=azh.window.get(0).getSelection(),n.setStart(a.childNodes[0],e),n.collapse(!0),i.removeAllRanges(),i.addRange(n),t.data("azh-focus").trigger("focus"))}function at(t,a){for(var e=azh.$(),n=t;n.length;)e=e.add(n.children().filter(a)),n=n.children().not(a);return e}var et=function(i){function o(a){"true"===a.attr("contenteditable")||0!==a.find('[contenteditable="true"]').length||0!==a.parents('[contenteditable="true"]').length||a.is(".az-readonly")||0!==a.find(".az-readonly").length||0!==a.parents(".az-readonly").length||0!==a.find('[draggable="true"]').length||0!==a.closest(azh.dynamic_content).length||(1===a.contents().length&&a.contents().each(function(){3===this.nodeType&&(this.textContent=t.trim(this.textContent.replace(/&nbsp;/g," ")))}),a.attr("contenteditable","true"),I(a,"az-contenteditable"),a.on("focus click",function(a){function e(t){t.children().each(function(){b(this)}),t.find(".azh-context").each(function(){j(azh.$(this),"azh-context")}),i.hide(),azh.change(),azh.controls_container.removeClass("azh-edit")}var n=azh.$(this),i=t(".azh-editor-toolbar");azh.editor_toolbar.length&&(["block","table-cell"].indexOf(n.css("display"))>=0||n.is('[contenteditable="true"]'))&&(i.show(),n.offset().left+i.outerWidth()>i.parent().outerWidth()?i.css({left:n.offset().left+n.outerWidth()-i.outerWidth(),top:n.offset().top-i.outerHeight()}):i.css({left:n.offset().left,top:n.offset().top-i.outerHeight()}),i.data("azh-linked-node",n),n.off("input").on("input",function(t){azh.controls_container.addClass("azh-edit")}),n.off("blur").one("blur",function(t){e(azh.$(this))}),i.find("input, select").off("mousedown").on("mousedown",function(){var a=t(this),n=i.data("azh-linked-node");n.off("blur"),a.off("change").on("change",function(){n.off("blur").one("blur",function(t){e(n)}),n.trigger("focus")})}),i.on("mouseenter",function(a){var e=t(this).data("azh-linked-node").closest("[data-element]");e.length&&e.data("azh-controls").removeClass("azh-active")}).on("mouseleave",function(a){var e=t(this).data("azh-linked-node").closest("[data-element]");e.length&&e.data("azh-controls").addClass("azh-active")}))}).on("click dragstart dragenter dragover dragleave drop dragend",function(t){0===azh.$(this).closest(".azh-drag").length&&t.preventDefault()}).on("paste",function(t){t.preventDefault();var a=t.originalEvent.clipboardData.getData("text/plain");azh.document.get(0).execCommand("insertHTML",!1,a)}))}function p(t){var a="",e=t.closest("[data-element]");if(e.length)a=azh.i18n.element+": "+e.attr("data-element");else{var n=t.closest("[data-section]");n.length&&(a=azh.i18n.section+": "+n.data("section"))}return a}function f(a){if(!a.length||a.parents('[data-element*="shortcode"]').length)return!1;if(0===(n=a.data("azh-controls").find(".azh-utility")).length){var e=t('<div class="azh-utility-wrapper"></div>').appendTo(a.data("azh-controls")).on("click",function(a){var e=t(this),n=e.closest(".azh-section-controls, .azh-column-controls, .azh-element-controls"),i=n.find(".azh-utility");return i.data("azh-filled")||function(a){var e=!1,n=a.data("azh-linked-element");e=n;var i=n.closest("[data-section], [data-element]");i.closest(azh.unlimited_max_wrapper).closest("[data-section], [data-element]").length?i=i.closest(azh.unlimited_max_wrapper).closest("[data-section], [data-element]"):(i.parent().closest("[data-section], [data-element]").length&&(i=i.parent().closest("[data-section], [data-element]")),i.parent().closest("[data-section], [data-element]").length&&(i=i.parent().closest("[data-section], [data-element]")));if(n.parents(i).length){!function(){if(!azh.possible_controls_selector_start_tree){azh.possible_controls_selector_start_tree={children:{}};var a=1;t(azh.controls_options).each(function(){var e=this;if(e.selector){var n=!1;if(t(azh.possible_controls_selector_start).each(function(){if(e.selector.indexOf(this)>=0)return n=!0,!1}),n){var i=e.selector.split(",");e.order||(e.order=a),t(i).each(function(){var a=t.trim(this).replace(/([\~\+\>])/g," $1 ").replace(/\s\s+/g," ").replace(/ ([\~\+\>]) /g," $1");a=(a=(a=a.replace(/" "/g,'"***"')).split(" ")).map(function(t){return t.replace(/"\*\*\*"/g,'" "')}),"utility"===e.menu&&function t(a,e,n){var i=a.children[n[e]];i||(i={options_list:[],children:{}},a.children[n[e]]=i);if(e+1<n.length)return t(i,e+1,n);return i}(azh.possible_controls_selector_start_tree,0,a).options_list.push(e)})}}a++})}}();var o=Object.keys(azh.possible_controls_selector_start_tree.children).join(", ");n.parentsUntil(i).each(function(){var t=azh.$(this);t.is(o)&&(e=t.parent())})}e.length&&(a.children(".azh-controls-list").empty(),ta(e,a))}(i),i.children().not(".azh-utility-title").length&&(void 0!==azh.utility_top&&void 0!==azh.utility_left?(azh.controls_container.find(".azh-element-controls.azh-active, .azh-column-controls.azh-active, .azh-section-controls.azh-active").removeClass("azh-active"),n.addClass("azh-active"),i.css({top:azh.utility_top,left:azh.utility_left})):a.which&&(n.addClass("azh-active"),n.is(".azh-section-controls")||n.is(".az-top-right-controls")||n.is(".az-bottom-right-controls")?i.css({top:e.offset().top-c.scrollTop()+e.outerHeight(),left:e.offset().left-i.outerWidth()+e.outerWidth()}):i.css({top:e.offset().top-c.scrollTop()+e.outerHeight(),left:e.offset().left}))),n.find('.azh-responsive [data-prefix="'+azh.device_prefix+'"]').trigger("click"),i.trigger("azh-show-utility"),e.data("azh-linked-element").trigger("azh-show-utility"),a.which&&e.data("azh-linked-element").trigger("click"),!1}).data("azh-linked-element",a),n=t('<div class="azh-utility"></div>').appendTo(e).on("click",function(t){t.stopPropagation()}).on("mouseenter",function(){t(this).closest(".azh-section-controls, .azh-column-controls, .azh-element-controls").addClass("azh-utility-hover")}).on("mouseleave",function(){t(this).closest(".azh-section-controls, .azh-column-controls, .azh-element-controls").removeClass("azh-utility-hover")}).data("azh-linked-element",a);t('<div class="azh-utility-title">'+p(a)+"</div>").prependTo(n),t('<div class="azh-controls-list"></div>').appendTo(n)}return n}function m(a,i,o){function s(){if(i.units){var a=t('<div class="azh-units"></div>').appendTo(x);if(x.addClass("azh-with-units"),"string"==typeof i.units)x.data("azh-units",i.units),t('<span class="azh-active" data-units="'+i.units+'">'+i.units+"</span>").appendTo(a);else{for(var e in x.data("azh-units",Object.keys(i.units)[0]),i.units)t('<span data-units="'+e+'">'+e+"</span>").appendTo(a).on("click",function(){var a=t(this).closest(".azh-control"),e=a.data("azh-options"),n=t(this).data("units");a.data("azh-units",n),a.find("[data-units]").removeClass("azh-active"),a.find('[data-units="'+n+'"]').addClass("azh-active"),"min"in e.units[n]&&(a.find(".azh-slider").length&&a.find(".azh-slider").children().length&&a.find(".azh-slider").slider("option","min",parseFloat(e.units[n].min)),a.find("input").attr("min",e.units[n].min)),"max"in e.units[n]&&(a.find(".azh-slider").length&&a.find(".azh-slider").children().length&&a.find(".azh-slider").slider("option","max",parseFloat(e.units[n].max)),a.find("input").attr("max",e.units[n].max)),"step"in e.units[n]&&(a.find(".azh-slider").length&&a.find(".azh-slider").children().length&&a.find(".azh-slider").slider("option","step",parseFloat(e.units[n].step)),a.find("input").attr("step",e.units[n].step))});x.find('[data-units="'+Object.keys(i.units)[0]+'"]').addClass("azh-active"),x.data("azh-units",Object.keys(i.units)[0])}}}function r(a){function e(){var a=t(this).data("azh-linked-node");azh.window.get(0).azh.refresh_responsive_css_rules(a)}if(azh.responsive&&i.responsive){var n=t('<div class="azh-responsive"></div>').appendTo(x);for(var o in azh.device_prefixes)t('<span data-prefix="'+o+'" title="'+azh.device_prefixes[o].label+'"></span>').appendTo(n).on("click",function(){var n=t(this).closest(".azh-control"),o=t(this).data("prefix"),s="data-responsive-"+o;if(i.attribute)s=i.attribute+"-"+o;n.data("azh-responsive")!==s&&(n.find("[data-prefix]").removeClass("azh-active"),n.find('[data-prefix="'+o+'"]').addClass("azh-active"),"lg"===o?n.data("azh-responsive",!1):n.data("azh-responsive",s),n.trigger("azh-init"),n.off("azh-change.responsive",e),a(n),n.on("azh-change.responsive",e))});n.find('[data-prefix="'+azh.device_prefix+'"]').addClass("azh-active"),x.on("azh-change.responsive",e)}}function h(t,a,e,n){if("rule_selector"in a&&a.rule_selector){var i="",o=a.rule_selector,s=e.attr("id");if(s&&(o=a.rule_selector.split(",").map(function(t){return"#"+s+t}).join(",")),t.data("azh-responsive")){var r=t.data("azh-responsive").replace("data-responsive-","");i=R(e,azh.device_prefixes[r],o,n)}else i=R(e,!1,o,n)}else{var h=e;a.multiplying_selector&&(h=h.find(a.multiplying_selector).first());i=N(h,n);t.data("azh-responsive")?i=Y(h,t.data("azh-responsive"),n):a.attribute&&(i=Y(h,a.attribute,n))}return i}function l(t,a,n,i,o){function s(t,a,e,n,i){if(a.prefixes&&a.prefixes.length)for(var o=0;o<a.prefixes.length;o++){r(t,a,e,a.prefixes[o]+n,i)}}function r(t,a,n,i,o){if("rule_selector"in a&&a.rule_selector){var s=n.attr("id");s||(s=e(),n.attr("id",s),A(n,"id",s));var r=a.rule_selector.split(",").map(function(t){return"#"+s+t}).join(",");if(t.data("azh-responsive")){var h=t.data("azh-responsive").replace("data-responsive-","");O(n,azh.device_prefixes[h],r,i,o,a.pattern,a.default)}else O(n,!1,r,i,o,a.pattern,a.default)}else if(t.data("azh-responsive")){S(n,t.data("azh-responsive"),i,o,a.pattern,a.default);var l=C(n,t.data("azh-responsive"));!1!==l&&n.attr(t.data("azh-responsive"),l)}else if(a.attribute)S(n,a.attribute,i,o,a.pattern,a.default),n.attr(a.attribute,C(n,a.attribute));else{var c=P(n,i,o,a.pattern,a.default);n.css(i,c)}}a.multiplying_selector?n.find(a.multiplying_selector).each(function(){r(t,a,azh.$(this),i,o),s(t,a,azh.$(this),i,o)}):(r(t,a,n,i,o),s(t,a,n,i,o))}function c(t,a,e,n){var i="",o=e;return a.multiplying_selector&&(o=e.find(a.multiplying_selector).first()),i=z(a,i=t.data("azh-responsive")?C(o,t.data("azh-responsive")):C(o,n)),t.attr("data-value",i),i}function d(t,a,e,n,i){var o="";a.multiplying_selector?t.data("azh-responsive")?e.find(a.multiplying_selector).each(function(){o=A(azh.$(this),t.data("azh-responsive"),i,a.pattern,a.default),azh.$(this).attr(t.data("azh-responsive"),o)}):e.find(a.multiplying_selector).each(function(){o=A(azh.$(this),n,i,a.pattern,a.default),azh.$(this).attr(n,o)}):t.data("azh-responsive")?(o=A(e,t.data("azh-responsive"),i,a.pattern,a.default),e.attr(t.data("azh-responsive"),o)):(o=A(e,n,i,a.pattern,a.default),e.attr(n,o)),t.attr("data-value",o)}function z(t,a){if(t.pattern){var e=!1;if(a&&(e=a.match(t.pattern)))4===e.length&&(a=e[2]);else a=(e=(a=t.default).match(t.pattern))[2]}return a}function p(a){a.on("mousedown",function(a){var e=t(this);e.data("azh-drag",!0),e.data("azh-drag-y",a.pageY),e.data("azh-start-drag-y",a.pageY),azh.document_off("mouseup.mouse-drag").document_on("mouseup.mouse-drag",function(t){e.data("azh-start-drag-y")===t.pageY&&e.trigger("change"),e.data("azh-drag",!1),e.is(":hover")||azh.document_off("mouseup.mouse-drag")}),azh.document_off("mousemove.mouse-drag").document_on("mousemove.mouse-drag",function(t){if(e.data("azh-drag")){var a=e.data("azh-drag-y")-t.pageY;e.attr("step")&&(a*=e.attr("step"));var n=parseFloat(e.val())+a;n=isNaN(n)?0:n,e.val(n).trigger("change"),e.data("azh-drag-y",t.pageY)}})}).on("mouseleave",function(a){var e=t(this);!e.data("azh-drag")&&e.is(":hover")}).on("contextmenu",function(a){return t(this).val("").trigger("change"),!1}).addClass("azh-integer-mouse-drag")}var m=a.closest('[data-section].azh-controls, [class*="azh-col-"].azh-controls, [data-element].azh-controls');i.target_utility&&(m=a.closest(i.target_utility).closest('[data-section].azh-controls, [class*="azh-col-"].azh-controls, [data-element].azh-controls'));var _=f(m);if(o){if(!("menu"in i&&"utility"==i.menu))return;if(!o.is(_))return}if(!(a.parents('[data-element*="shortcode"]').length||i.not_selector&&a.is(i.not_selector))){var y=a.data("azh-linked-controls");y||(y=[]);var w=!1;if(t(y).each(function(){var a=this.data("azh-options");if(a){if("selector"in i){var e=t.extend({},i),n=t.extend({},a);if(delete e.order,delete n.order,delete e.selector,delete n.selector,delete e.pattern,delete n.pattern,delete e.default,delete n.default,delete e.group,delete n.group,JSON.stringify(e)===JSON.stringify(n))return w=!0,!1}else{if("attribute"in i&&"attribute"in a&&i.attribute===a.attribute&&!("property"in i)&&!("properties"in i)&&"background-image"!=i.type&&"font-family"!=i.type&&"menu"in i&&"menu"in a&&i.menu===a.menu)return w=!0,!1;if("property"in i&&"property"in a&&i.property===a.property&&"control_type"in i&&"control_type"in a&&i.control_type===a.control_type&&"menu"in i&&"menu"in a&&i.menu===a.menu&&i.attribute===a.attribute)return w=!0,!1}if(JSON.stringify(i)===JSON.stringify(a))return w=!0,!1}}),!w){var x=t('<div class="azh-control '+i.control_class+'" data-type="'+i.control_type+'" '+(i.group?'data-group="'+i.group+'"':"")+(i.subgroup?'data-subgroup="'+i.subgroup+'"':"")+(i.order?'data-order="'+i.order+'"':"")+"></div>").on("click",function(t){t.stopPropagation()}).on("mouseenter",function(){var a=t(this);a.data("azh-linked-node")&&a.data("azh-linked-node").addClass("azh-over")}).on("mouseleave",function(){var a=t(this);a.data("azh-linked-node")&&a.data("azh-linked-node").removeClass("azh-over")});switch(i.control_text_attribute?t("<label>"+a.attr(i.control_text_attribute)+"</label>").appendTo(x):t("<label>"+i.control_text+"</label>").appendTo(x),i.init&&"function"==typeof i.init&&i.init(x,a),i.type){case"input-innertext":t('<input type="'+("input_type"in i?i.input_type:"text")+'"/>').appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-node");i.text(a.val()),e.attr("data-value",a.val()),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):$(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node"),n=t.trim(e.text());a.find("input").val(n);a.attr("data-value",n)});break;case"radio-attribute":var B=t('<div class="azh-radio"></div>').appendTo(x),D=e();if(x.data("azh-radio-name",D),"string"!=typeof i.options)for(var E in i.options){var X=t("<div></div>").appendTo(B),q=e();X.append('<input id="'+q+'" type="radio" name="'+D+'" value="'+E+'"><label for="'+q+'" title="'+i.options[E]+'">'+i.options[E]+"</label>")}B.find('input[type="radio"]').on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options");d(e,i,n,i.attribute,a.val()),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")}),x.on("azh-init",function(){var a=t(this),n=x.data("azh-radio-name"),i=a.data("azh-linked-node"),o=a.data("azh-options"),s=a.find("> div"),r=i.closest("[data-section]"),h=c(a,o,i,o.attribute);"string"==typeof o.options&&r.find("["+o.options+"]").each(function(){var a=t("<div></div>").appendTo(s),i=e();a.append('<input id="'+i+'" type="radio" name="'+n+'" value="'+azh.$(this).attr(o.options)+'"><label for="'+i+'">'+azh.$(this).attr(o.options)+"</label>")}),s.find("[value]").prop("checked",!1),s.find('[value="'+h+'"]').prop("checked",!0),a.attr("data-value",h)});break;case"dropdown-attribute":var F=t("<select></select>").appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options");d(e,i,n,i.attribute,a.val()),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});if("object"==typeof i.options)for(var E in i.options)F.append('<option value="'+E+'">'+i.options[E]+"</option>");x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node"),n=a.data("azh-options"),i=a.find("select"),o=e.closest("[data-section]"),s=c(a,n,e,n.attribute);if("string"==typeof n.options){i.empty();var r=e.attr(n.options);r?(r=r.split("|"),t(r).each(function(){i.append('<option value="'+this+'">'+this+"</option>")})):o.find("["+n.options+"]").each(function(){i.append('<option value="'+azh.$(this).attr(n.options)+'">'+azh.$(this).attr(n.options)+"</option>")})}if("function"==typeof n.options){i.empty();var h=n.options(a,e,function(t){for(var a in i.empty(),t)i.append('<option value="'+a+'">'+t[a]+"</option>");i.val(s)});for(var l in h)i.append('<option value="'+l+'">'+h[l]+"</option>")}i.val(s),n.select2&&i.select2({width:"100%"}).on("select2:open",function(a){t(this).data("select2").$dropdown.off("click.azh, mousedown.azh, mouseup.azh").on("click.azh, mousedown.azh, mouseup.azh",function(t){return t.stopPropagation(),t.preventDefault(),!1})}),a.attr("data-value",s)});break;case"ajax-dropdown-attribute":F=t("<select></select>").appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options"),o=A(n,i.attribute,a.val(),i.pattern,i.default);n.attr(i.attribute,o),e.attr("data-value",o),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node"),n=a.data("azh-options"),i=a.find("select"),o=(e.closest("[data-section]"),e.attr(n.attribute));o=z(n,o),i.select2({ajax:{url:n.ajaxurl,dataType:"json"},width:"100%"}).on("select2:open",function(a){t(this).data("select2").$dropdown.off("click.azh, mousedown.azh, mouseup.azh").on("click.azh, mousedown.azh, mouseup.azh",function(t){return t.stopPropagation(),t.preventDefault(),!1})}),o&&t.post(n.ajaxurl,{values:[o]},function(a){for(var e in a)t('<option value="'+e+'" selected>'+a[e]+"</option>").appendTo(i)},"json"),a.attr("data-value",o)});break;case"radio-style":B=t('<div class="azh-radio"></div>').appendTo(x),D=e();for(var E in x.data("azh-radio-name",D),i.options){X=t("<div></div>").appendTo(B),q=e();X.append('<input id="'+q+'" type="radio" name="'+D+'" value="'+E+'"><label for="'+q+'" title="'+i.options[E]+'">'+i.options[E]+"</label>")}B.find('input[type="radio"]').on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options");l(e,i,n,i.property,a.val()),e.attr("data-value",a.val()),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")}),r(function(t){}),x.on("azh-init",function(){var a=t(this),e=(x.data("azh-radio-name"),a.data("azh-linked-node")),n=a.data("azh-options"),i=h(a,n,e,n.property);i=z(n,i);var o=a.find("> div");o.find("[value]").prop("checked",!1),o.find('[value="'+i+'"]').prop("checked",!0),a.attr("data-value",i)});break;case"dropdown-style":F=t("<select></select>").appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options");l(e,i,n,i.property,a.val()),e.attr("data-value",a.val()),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});for(var E in i.options)F.append('<option value="'+E+'">'+i.options[E]+"</option>");r(function(t){}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node"),n=a.data("azh-options"),i=h(a,n,e,n.property);i=z(n,i),a.find("select").val(i),a.attr("data-value",i)});break;case"integer-attribute":t('<div class="azh-slider"></div>').appendTo(x),p(t('<input type="number" step="'+("step"in i?i.step:"1")+'" '+("min"in i?'min="'+i.min+'"':"")+" "+("max"in i?'max="'+i.max+'"':"")+"/>").appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-node"),o=e.data("azh-units")?e.data("azh-units"):"",s=a.val()?a.val()+o:"";d(e,n,i,n.attribute,s),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):$(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")}).on("mousewheel",function(a){var e=t(this),n=e.closest(".azh-control").data("azh-options"),i=n.step?n.step:1;if(e.data("focus")){var o=i*a.originalEvent.wheelDelta/120;return e.val(e.val()+o),e.trigger("change"),!1}})),s(),r(function(t){t.find(".azh-slider.ui-slider").slider("value",t.find("input").val())}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-options"),n=a.data("azh-linked-node"),i=c(a,e,n,e.attribute);if("min"in e&&"max"in e&&"step"in e||e.slider)if(a.find(".azh-slider.ui-slider").length){if(i)a.find(".azh-slider.ui-slider").slider("value")!==parseFloat(i)&&a.find(".azh-slider.ui-slider").slider("value",i)}else{var o=0,s=100,r=1,h=a.data("azh-units");e.min?o=parseFloat(e.min):h&&e.units&&e.units[h]&&e.units[h].min&&(o=parseFloat(e.units[h].min)),e.max?s=parseFloat(e.max):h&&e.units&&e.units[h]&&e.units[h].max&&(s=parseFloat(e.units[h].max)),e.step?r=parseFloat(e.step):h&&e.units&&e.units[h]&&e.units[h].step&&(r=parseFloat(e.units[h].step)),a.find(".azh-slider").slider({min:o,max:s,step:r,value:i?parseFloat(i):0,slide:function(t,n){t.which&&(e.refresh||a.find("input").val(parseFloat(n.value)).trigger("change"))},change:function(t,n){t.which&&(e.refresh&&a.find("input").val(parseFloat(n.value)).trigger("change"),a.trigger("azh-change"))}}).find(".ui-slider-handle").on("contextmenu",function(){return t(this).closest(".azh-slider").slider("option","value",0),a.find("input").val("").trigger("change"),!1})}if(a.find("input").val(parseFloat(i)),i){h="";2===i.split(/[\-\.0-9]+/g).length&&(h=i.split(/[\-\.0-9]+/g).pop()),a.data("azh-units",h),a.find('[data-units="'+h+'"]').trigger("click")}});break;case"input-attribute":t('<input type="'+("input_type"in i?i.input_type:"text")+'"/>').appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-node"),o=a.val();n.filter&&n.filter in azh&&(o=azh[n.filter](o),a.val(o)),d(e,n,i,n.attribute,o),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):$(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node"),n=a.data("azh-options"),i=c(a,n,e,n.attribute),o=a.find("input").val(i);if(a.attr("data-value",i),n.unique){if(n.unique_exception&&e.is(n.unique_exception))return;var s=e.closest("[data-section]");n.unique_wrapper&&(s=e.closest(n.unique_wrapper));var r=n.unique,h=new RegExp("{"+n.attribute+"}","g");r=r.replace(h,o.val()),s.find(r).length>1?(a.find("label").get(0).style.setProperty("color","red","important"),a.find("input").get(0).style.setProperty("color","red","important"),a.attr("title",azh.i18n.value_must_be_unique_in_this_scope)):(a.find("label").get(0).style.setProperty("color","",""),a.find("input").get(0).style.setProperty("color","",""),a.attr("title",""))}});break;case"textarea-attribute":t("<textarea></textarea>").appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-node"),o=A(i,n.attribute,a.val(),n.pattern,n.default);i.attr(n.attribute,o),e.attr("data-value",o),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):$(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node").attr(a.data("azh-options").attribute);e=z(i,e);a.find("textarea").val(e);a.attr("data-value",e)});break;case"url-attribute":t('<input type="url"/>').appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-node"),o=A(i,n.attribute,a.val(),n.pattern,n.default);i.attr(n.attribute,o),e.attr("data-value",o),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):$(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")}),x.on("azh-init",function(){var a=t(this),e=x.data("azh-options"),n=a.data("azh-linked-node").attr(e.attribute);n=z(e,n);a.find("input").val(n);a.attr("data-value",n)}),t('<div class="azh-edit">'+azh.i18n.edit_link+"</div>").appendTo(x).on("click",function(a){var e=t(this).closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-node");azh.open_link_select_dialog(a,function(t,a,o){i.attr(n.attribute,t),A(i,n.attribute,t),"href"===n.attribute&&(i.attr("target",a||"_self"),i.attr("title",o),A(i,"target",a||"_self"),A(i,"title",o)),e.trigger("azh-init")},i.attr(n.attribute),i.attr("target"),i.attr("title"))});break;case"video-url-attribute":t('<input type="url"/>').appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-node"),o=A(i,n.attribute,a.val(),n.pattern,n.default);i.attr(n.attribute,o),e.attr("data-value",o),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):$(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")}),x.on("azh-init",function(){var a=t(this),e=x.data("azh-options"),n=a.data("azh-linked-node").attr(e.attribute);n=z(e,n);a.find("input").val(n);a.attr("data-value",n)}),t('<div class="azh-edit">'+azh.i18n.edit_link+"</div>").appendTo(x).on("click",function(a){var e=t(this).closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-node");azh.open_image_select_dialog(a,function(t,a){i.attr(n.attribute,t),A(i,n.attribute,t),e.attr("data-value","true"),e.find("input").val(t),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):$(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")},!1,"video")});break;case"integer-list-style":var H=t('<div class="azh-properties"></div>').appendTo(x);for(var L in i.properties){var J=t('<div class="azh-property"></div>').appendTo(H);p(t('<input data-property="'+L+'" type="number" step="'+("step"in i?i.step:"1")+'" '+("min"in i?'min="'+i.min+'"':"")+" "+("max"in i?'max="'+i.max+'"':"")+"/>").appendTo(J).on("change",function(a){var e=t(this),n=e.data("property"),i=e.closest(".azh-control"),o=i.data("azh-linked-node"),s=i.data("azh-options"),r=i.data("azh-units")?i.data("azh-units"):"",h=e.val()?e.val()+r:"";if(l(i,s,o,n,h),!a.isTrigger&&i.find(".azh-linked.azh-active").length){for(var c in i.find(".azh-linked").removeClass("azh-active"),s.properties)c!==n&&i.find('input[data-property="'+c+'"]').val(parseFloat(h)).trigger("change");i.find(".azh-linked").addClass("azh-active")}s.refresh&&("function"==typeof s.refresh?s.refresh(i,o):$(o.closest("[data-section]"))),o.trigger("azh-change"),i.trigger("azh-change")}).on("mousewheel",function(a){var e=t(this),n=e.closest(".azh-control").data("azh-options"),i=n.step?n.step:1;if(e.data("focus")){var o=i*a.originalEvent.wheelDelta/120;return e.val(e.val()+o),e.trigger("change"),!1}})),t("<div>"+i.properties[L]+"</div>").appendTo(J)}s(),r(function(t){}),t('<div class="azh-linked azh-active"></div>').appendTo(x).on("click",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options");if(a.is(".azh-active"))a.removeClass("azh-active");else{var i=Object.keys(n.properties)[0];for(var o in n.properties)i!==o&&e.find('input[data-property="'+o+'"]').val(parseFloat(e.find('input[data-property="'+i+'"]').val())).trigger("change");a.addClass("azh-active")}}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-options"),n=a.data("azh-linked-node"),i=[];for(var o in e.properties){var s=h(a,e,n,o);s=z(e,s),a.find('input[data-property="'+o+'"]').val(parseFloat(s)),i.push(s)}if(i.length&&i[0]){var r="";2===i[0].split(/[\-\.0-9]+/g).length&&(r=i[0].split(/[\-\.0-9]+/g).pop()),a.data("azh-units",r),a.find('[data-units="'+r+'"]').trigger("click")}});break;case"integer-style":t('<div class="azh-slider"></div>').appendTo(x),p(t('<input type="number" step="'+("step"in i?i.step:"1")+'" '+("min"in i?'min="'+i.min+'"':"")+" "+("max"in i?'max="'+i.max+'"':"")+"/>").appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options"),o=e.data("azh-units")?e.data("azh-units"):"",s=a.val()?a.val()+o:"";l(e,i,n,i.property,s),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")}).on("mousewheel",function(a){var e=t(this),n=e.closest(".azh-control").data("azh-options"),i=n.step?n.step:1;if(e.data("focus")){var o=i*a.originalEvent.wheelDelta/120;return e.val(e.val()+o),e.trigger("change"),!1}})),s(),r(function(t){t.find(".azh-slider.ui-slider").slider("value",t.find("input").val())}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-options"),n=a.data("azh-linked-node"),i=h(a,e,n,e.property);if(i=z(e,i),"min"in e&&"max"in e&&"step"in e||e.slider)if(a.find(".azh-slider.ui-slider").length){if(i)a.find(".azh-slider.ui-slider").slider("value")!==parseFloat(i)&&a.find(".azh-slider.ui-slider").slider("value",i)}else{var o=0,s=100,r=1,l=a.data("azh-units");e.min?o=parseFloat(e.min):l&&e.units&&e.units[l]&&e.units[l].min&&(o=parseFloat(e.units[l].min)),e.max?s=parseFloat(e.max):l&&e.units&&e.units[l]&&e.units[l].max&&(s=parseFloat(e.units[l].max)),e.step?r=parseFloat(e.step):l&&e.units&&e.units[l]&&e.units[l].step&&(r=parseFloat(e.units[l].step)),a.find(".azh-slider").slider({min:o,max:s,step:r,value:i?parseFloat(i):0,slide:function(t,n){t.which&&(e.refresh||a.find("input").val(parseFloat(n.value)).trigger("change"))},change:function(t,n){t.which&&(e.refresh&&a.find("input").val(parseFloat(n.value)).trigger("change"),a.trigger("azh-change"))}}).find(".ui-slider-handle").on("contextmenu",function(){return t(this).closest(".azh-slider").slider("option","value",0),a.find("input").val("").trigger("change"),!1})}if(a.find("input").val(parseFloat(i)),i){l="";2===i.split(/[\-\.0-9]+/g).length&&(l=i.split(/[\-\.0-9]+/g).pop()),a.data("azh-units",l),a.find('[data-units="'+l+'"]').trigger("click")}});break;case"color-style":x.addClass("azh-color"),t('<input type="text" data-alpha="true"/>').appendTo(x).on("change",function(){var a=t(this).closest(".azh-control"),e=a.data("azh-linked-node"),i=a.data("azh-options"),o=n(a.find('input[type="text"]').val(),1);l(a,i,e,i.property,o),i.refresh&&(t(this).wpColorPicker("close"),"function"==typeof i.refresh?i.refresh(a,e):$(e.closest("[data-section]"))),e.trigger("azh-change"),a.trigger("azh-change")}),r(function(t){t.find("input").wpColorPicker("color",t.find("input").val())}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node"),i=a.data("azh-options"),o=h(a,i,e,i.property);o=z(i,o);var s=a.find('input[type="text"]').val(o);s.closest(".wp-picker-container").length?s.wpColorPicker("color",o):s.wpColorPicker({change:function(t,e){if(i.refresh)s.closest(".wp-picker-container").off("mouseleave").on("mouseleave",function(){var t=e.color.toString();s.val(t),s.trigger("change"),s.closest(".wp-picker-container").off("mouseleave")});else{var o=e.color.toString();n(s.val(),1)!==n(o,1)&&(s.val(o),s.trigger("change"))}a.trigger("azh-change")},clear:function(t){"click"===t.type&&(i.refresh?s.closest(".wp-picker-container").off("mouseleave").on("mouseleave",function(){s.val(""),s.trigger("change"),s.closest(".wp-picker-container").off("mouseleave")}):s.trigger("change"),a.trigger("azh-change"))}})});break;case"color-attribute":x.addClass("azh-color"),t('<input type="text" '+(i.alpha?'data-alpha="true"':"")+"/>").appendTo(x).on("change",function(){var a=t(this).closest(".azh-control"),e=a.data("azh-options"),i=a.data("azh-linked-node"),o=a.find('input[type="text"]').val();e.alpha&&(o=n(o,1));var s=A(i,e.attribute,o,e.pattern,e.default);i.attr(e.attribute,s),e.refresh&&(t(this).wpColorPicker("close"),"function"==typeof e.refresh?e.refresh(a,i):$(i.closest("[data-section]"))),i.trigger("azh-change"),a.trigger("azh-change")}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node"),i=a.data("azh-options"),o=e.attr(i.attribute);o=z(i,o);var s=a.find('input[type="text"]').val(o);s.closest(".wp-picker-container").length?s.wpColorPicker("color",o):s.wpColorPicker({change:function(t,e){if(i.refresh)s.closest(".wp-picker-container").off("mouseleave").on("mouseleave",function(){var t=e.color.toString();s.val(t),s.trigger("change"),s.closest(".wp-picker-container").off("mouseleave")});else{var o=e.color.toString();n(s.val(),1)!==n(o,1)&&(s.val(o),s.trigger("change"))}a.trigger("azh-change")},clear:function(t){"click"===t.type&&(i.refresh?s.closest(".wp-picker-container").off("mouseleave").on("mouseleave",function(){s.trigger("change"),s.closest(".wp-picker-container").off("mouseleave")}):s.trigger("change"),a.trigger("azh-change"))}})});break;case"toggle-attribute":t('<input id="'+i.control_type+'" type="checkbox"/>').prependTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options");a.prop("checked")?(n.attr(i.attribute,"true_value"in i?i.true_value:"true"),A(n,i.attribute,"true_value"in i?i.true_value:"true"),e.attr("data-value","true")):(n.attr(i.attribute,"false_value"in i?i.false_value:"false"),A(n,i.attribute,"false_value"in i?i.false_value:"false"),e.attr("data-value","false")),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});x.on("azh-init",function(){var a=t(this),n=a.data("azh-linked-node"),i=a.data("azh-options"),o=!1;o="false_value"in i?n.attr(a.data("azh-options").attribute)!==i.false_value:"true_value"in i?n.attr(a.data("azh-options").attribute)===i.true_value:"true"===n.attr(a.data("azh-options").attribute),a.find("input").prop("checked",o);var s=e();t(this).find("input").attr("id",s),t(this).find("label").attr("for",s),a.attr("data-value",o)});break;case"toggle-url-argument":t('<input id="'+i.control_type+'" type="checkbox"/>').prependTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options"),o=n.attr(i.attribute);o&&(o=a.prop("checked")?v(o,i.argument,i.true_value):v(o,i.argument,i.false_value),n.attr(i.attribute,o),A(n,i.attribute,o),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change"))});x.on("azh-init",function(){var a=t(this),n=a.data("azh-linked-node"),i=a.data("azh-options"),o=n.attr(i.attribute);if(o){var s=g(o,i.argument),r=!!i.default&&i.default;s&&(s===i.true_value&&(r=!0),s===i.false_value&&(r=!1)),a.find("input").prop("checked",r),a.attr("data-value",r)}var h=e();t(this).find("input").attr("id",h),t(this).find("label").attr("for",h)});break;case"input-url-argument":t('<input type="'+("input_type"in i?i.input_type:"text")+'"/>').appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-node"),o=i.attr(n.attribute);o=v(o,n.argument,a.val()),d(e,n,i,n.attribute,o),n.refresh&&("function"==typeof n.refresh?n.refresh(e,i):$(i.closest("[data-section]"))),i.trigger("azh-change"),e.trigger("azh-change")}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node"),n=a.data("azh-options"),i=e.attr(n.attribute);if(i){var o=g(i,n.argument);a.find("input").val(o),a.attr("data-value",o)}});break;case"font-family":F=t("<select></select>").appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options"),o=t.trim(a.val().replace(/['"]/g,""));l(e,i,n,i.property,"'"+o+"'");var s="https://fonts.googleapis.com/css?family="+o+":100,100italic,200,200italic,300,300italic,400,400italic,500,500italic,600,600italic,700,700italic,800,800italic,900,900italic";W[s]||(azh.google_fonts_locale_subsets[azh.locale]&&(s+="&subset="+azh.google_fonts_locale_subsets[azh.locale]),W[s]=azh.$("<link/>",{rel:"stylesheet",type:"text/css",href:s}).appendTo("head")),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});x.on("azh-init",function(){var a=t(this),e=a.data("azh-options"),n=a.find("select"),i=h(a,e,a.data("azh-linked-node"),e.property);i=(i=i||"").replace(/['"]/g,"");var o;o=azh.google_fonts,n.append('<option value="">'+azh.i18n.default+"</option>"),t(o).each(function(){n.append('<option value="'+t.trim(this.replace(/['"]/g,""))+'">'+t.trim(this.replace(/['"]/g,""))+"</option>")}),n.val(i),n.select2({width:"100%"}).on("select2:open",function(a){t(this).data("select2").$dropdown.off("click.azh, mousedown.azh, mouseup.azh").on("click.azh, mousedown.azh, mouseup.azh",function(t){return t.stopPropagation(),t.preventDefault(),!1})})});break;case"background-image":x.addClass("azh-image"),t('<img src="'+u+'" alt="'+azh.i18n.select_image+'"/>').appendTo(x).on("contextmenu",function(a){a.preventDefault();var e=t(this),n=e.closest(".azh-control"),i=n.data("azh-linked-node"),o=n.data("azh-options"),s=h(n,o,i,"background-image");l(n,o,i,"background-image",s=s.indexOf(e.attr("src"))>=0?s.replace(e.attr("src"),"/"):"url('/')"),e.attr("src",u),e.attr("alt",azh.i18n.select_image),n.attr("data-value","false"),o.refresh&&("function"==typeof o.refresh?o.refresh(n,i):$(i.closest("[data-section]"))),i.trigger("azh-change"),n.trigger("azh-change")}).on("click",function(a){var e=t(this),n=e.closest(".azh-control"),i=n.data("azh-linked-node"),o=n.data("azh-options");azh.open_image_select_dialog(a,function(t,a){var s=h(n,o,i,"background-image");s=s.indexOf(e.attr("src"))>=0?s.replace(e.attr("src"),t):"url('"+t+"')",l(n,o,i,"background-image",s),e.attr("src",t),n.attr("data-value","true"),o.refresh&&("function"==typeof o.refresh?o.refresh(n,i):$(i.closest("[data-section]"))),i.trigger("azh-change"),n.trigger("azh-change")})}).on("error",function(){t(this).attr("src",u)}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node"),n=a.data("azh-options"),i=a.find("img").first();i.detach(),a.find("img").remove();for(var o=h(a,n,e,"background-image"),s=/url\(['"]?([^'"\)]+)['"]?\)/gi,r=null;null!=(r=s.exec(o));)""===r[1]||"/"===r[1]?(i.clone(!0).appendTo(a).attr("src",u),a.attr("data-value","false")):(i.clone(!0).appendTo(a).attr("src",r[1]),a.attr("data-value","true"));0===a.find("img").length&&i.clone(!0).appendTo(a).attr("src",u)});break;case"image-attribute":x.addClass("azh-image");var V=a.attr(i.attribute);t('<img src="'+(V||u)+'" alt="'+azh.i18n.select_image+'"/>').appendTo(x).on("contextmenu",function(a){a.preventDefault();var e=t(this),n=e.closest(".azh-control"),i=n.data("azh-linked-node"),o=n.data("azh-options");e.attr("src",u),e.attr("alt",azh.i18n.select_image),n.attr("data-value","false"),i.attr(o.attribute,""),A(i,o.attribute,"")}).on("click",function(a){var e=t(this),n=e.closest(".azh-control"),i=n.data("azh-linked-node"),o=n.data("azh-options");azh.open_image_select_dialog(a,function(t,a){e.attr("src",t),n.attr("data-value","true"),i.attr(o.attribute,t),A(i,o.attribute,t),o.refresh&&("function"==typeof o.refresh?o.refresh(n,i):$(i.closest("[data-section]"))),i.trigger("azh-change"),n.trigger("azh-change")})}).on("error",function(){t(this).attr("src",u)}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node").attr(a.data("azh-options").attribute);e?(a.find("img").attr("src",e),a.attr("data-value","true")):(a.find("img").attr("src",u),a.attr("data-value","false"))});break;case"icon-class":t('<div class="azh-button">'+azh.i18n.edit_icon+"</div>").appendTo(x).on("click",function(a){var e=t(this).closest(".azh-control"),n=e.data("azh-options"),i=e.data("azh-linked-node"),o="",s=(o=n.multiplying_selector?i.find(n.multiplying_selector).first().attr("class"):i.attr("class")).split(" ").filter(function(t){return t.indexOf("az-")>=0&&t}),r=o.split(" ").filter(function(t){return t.indexOf("azh-")>=0&&t});azh.open_icon_select_dialog(a,o,function(t){U(t);var a=s.concat(t.split(" ")).join(" ");d(e,n,i,"class",a),n.multiplying_selector?i.find(n.multiplying_selector).each(function(){azh.$(this).addClass(r.join(" "))}):i.addClass(r.join(" "))})});break;case"exists-class":t('<input id="'+i.control_type+'" type="checkbox"/>').prependTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options");a.prop("checked")?(n.addClass(i.class),I(n,i.class),e.attr("data-value","true")):(n.removeClass(i.class),j(n,i.class),e.attr("data-value","false")),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});x.on("azh-init",function(){var a=t(this),n=a.data("azh-linked-node"),i=a.data("azh-options");a.find("input").prop("checked",n.hasClass(i.class)),a.attr("data-value",n.hasClass(i.class)?"true":"false");var o=e();t(this).find("input").attr("id",o),t(this).find("label").attr("for",o)});break;case"dropdown-classes":F=t("<select></select>").appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options");for(var o in i.classes)n.removeClass(o),j(n,o);n.addClass(a.val()),I(n,a.val()),e.attr("data-value",a.val()),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});if("string"!=typeof i.classes)for(var E in i.classes)F.append('<option value="'+E+'">'+i.classes[E]+"</option>");x.on("azh-init",function(){var a=t(this),e=(x.data("azh-radio-name"),a.data("azh-linked-node")),n=a.data("azh-options"),i="";for(var o in n.classes)if(e.is("."+o)){i=o;break}a.find("select").val(i),a.attr("data-value",i)});break;case"radio-classes":B=t('<div class="azh-radio"></div>').appendTo(x),D=e();for(var E in x.data("azh-radio-name",D),i.classes){X=t("<div></div>").appendTo(B),q=e();X.append('<input id="'+q+'" type="radio" name="'+D+'" value="'+E+'"><label for="'+q+'" title="'+i.classes[E]+'">'+i.classes[E]+"</label>")}B.find('input[type="radio"]').on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options");for(var o in i.classes)n.removeClass(o),j(n,o);n.addClass(a.val()),I(n,a.val()),e.attr("data-value",a.val()),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")}),x.on("azh-init",function(){var a=t(this),e=(x.data("azh-radio-name"),a.data("azh-linked-node")),n=a.data("azh-options"),i="";for(var o in n.classes)if(e.is("."+o)){i=o;break}var s=a.find("> div");s.find("[value]").prop("checked",!1),s.find('[value="'+i+'"]').prop("checked",!0),a.attr("data-value",i)});break;case"exists-attribute":t('<input id="'+i.control_type+'" type="checkbox"/>').prependTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options");if(a.prop("checked")){var o=i.value?i.value:"";n.attr(i.attribute,o),A(n,i.attribute,o),e.attr("data-value","true")}else n.removeAttr(i.attribute),M(n,i.attribute),e.attr("data-value","false");i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});x.on("azh-init",function(){var a=t(this),n=a.data("azh-linked-node");a.find("input").prop("checked",void 0!==n.attr(a.data("azh-options").attribute)&&!1!==n.attr(a.data("azh-options").attribute)),a.attr("data-value",a.find("input").prop("checked")?"true":"false");var i=e();t(this).find("input").attr("id",i),t(this).find("label").attr("for",i)});break;case"exists-style":t('<input id="'+i.control_type+'" type="checkbox"/>').prependTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options"),o=i.value?i.value:"";a.prop("checked")?e.attr("data-value","true"):(o="",e.attr("data-value","false")),l(e,i,n,i.property,o),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});r(function(t){}),x.on("azh-init",function(){var a=t(this),n=a.data("azh-linked-node"),i=a.data("azh-options"),o=h(a,i,n,i.property);o=!!o,a.find("input").prop("checked",o),a.attr("data-value",o?"true":"false");var s=e();t(this).find("input").attr("id",s),t(this).find("label").attr("for",s)});break;case"svg_content":x.addClass("azh-svg"),t('<input class="azh-file-input" type="file">').appendTo(x).css({position:"fixed",left:"-1000px",top:"-1000px"}).on("click",function(t){t.stopPropagation()}).on("change",function(){var a=t(this).closest(".azh-control"),e=a.data("azh-linked-node"),n=a.data("azh-options"),i=a.find(".azh-file-input").get(0).files[0],o=new FileReader;o.onload=function(i){var o=i.target.result;try{for(var s=t.parseXML(o),r=s.documentElement.attributes.length-1;r>=0;r--)["height","width","viewbox"].indexOf(s.documentElement.attributes[r].name.toLowerCase())<0&&s.documentElement.removeAttribute(s.documentElement.attributes[r].name);s=(s=s.documentElement.outerHTML).replace(/<(\/?)([^:>\s]*:)?([^>]+)>/g,"<$1$3>"),e.html(s),b(e.children().get(0)),a.find(".azh-svg-wrapper").html(s),aa(e),a.attr("data-value","true"),n.refresh&&("function"==typeof n.refresh?n.refresh(a,e):$(e.closest("[data-section]"))),e.trigger("azh-change"),a.trigger("azh-change")}catch(i){}},o.readAsText(i)}),t('<div class="azh-svg-wrapper" title="'+azh.i18n.select_image+'"></div>').appendTo(x).on("contextmenu",function(a){a.preventDefault();var e=t(this).closest(".azh-control"),n=e.data("azh-linked-node");e.find(".azh-svg-wrapper").empty().append('<img src="'+u+'"/>'),e.attr("data-value","false"),n.empty()}).on("click",function(a){t(this).closest(".azh-control").find(".azh-file-input").trigger("click")}),x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node").find("svg"),n=a.find(".azh-svg-wrapper");n.empty(),e.length?(n.append(e.clone()),a.attr("data-value","true")):(n.append('<img src="'+u+'"/>'),a.attr("data-value","false"))});break;case"html-switcher":F=t("<select></select>").appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options"),o=a.val();if(Dt(),o){var s=azh.html[o];n.html(s),t(n.children()).each(function(){b(this)})}else n.empty();A(n,"data-html-switcher",o),n.attr("data-html-switcher",o),o&&(t(n.children()).each(function(){et(t(this))}),aa(n)),Et(),e.attr("data-value",o),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});if("string"!=typeof i.options)for(var E in i.options)F.append('<option value="'+E+'">'+i.options[E]+"</option>");x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node"),n=(a.data("azh-options"),a.find("select")),i=e.attr("data-html-switcher");n.val(i),a.attr("data-value",i)});break;case"html-tag":F=t("<select></select>").appendTo(x).on("change",function(){var a=t(this),e=a.closest(".azh-control"),n=e.data("azh-linked-node"),i=e.data("azh-options");Dt();var o=k(n);n.empty(),T(n,a.val());var s=azh.$(n.data("azh-open-tag")+o+n.data("azh-close-tag"));n.replaceWith(s),b(s.get(0)),et(s),aa(s),Et(),e.data("azh-linked-node",s),e.attr("data-value",a.val()),i.refresh&&("function"==typeof i.refresh?i.refresh(e,n):$(n.closest("[data-section]"))),n.trigger("azh-change"),e.trigger("azh-change")});if("string"!=typeof i.options)for(var E in i.options)F.append('<option value="'+E+'">'+i.options[E]+"</option>");x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node"),n=(a.data("azh-options"),a.find("select")),i=e.prop("tagName").toLowerCase();n.val(i),a.attr("data-value",i)});break;case"post-autocomplete":t('<input type="text" value=""/>').appendTo(x).on("keydown",function(a){a.keyCode===t.ui.keyCode.TAB&&t(this).autocomplete("instance").menu.active&&a.preventDefault()}).on("keydown keyup blur",function(a){var e=t(this);if(""==e.val()){var n=e.closest(".azh-control"),i=n.data("azh-linked-node"),o=n.data("azh-options");i.attr(o.attribute,""),A(i,o.attribute,"")}});x.on("azh-init",function(){var a=t(this),e=a.data("azh-linked-node").attr(a.data("azh-options").attribute),n=a.find("input");n.autocomplete({minLength:0,source:function(a,e){var n=this.element;if(""!=a.term){var i=n.closest(".azh-control"),o=i.data("azh-linked-node");t.post(azh.ajaxurl,{action:"azh_posts_autocomplete",exclude:o.attr(i.data("azh-options").attribute),search:a.term},function(t){e(t)},"json")}else e()},focus:function(t,a){return!1},select:function(e,n){var o=t(this);if(n.item){var s=o.closest(".azh-control"),r=s.data("azh-linked-node");r.attr(a.data("azh-options").attribute,n.item.value),A(r,a.data("azh-options").attribute,n.item.value),a.data("azh-options").refresh&&("function"==typeof i.refresh?i.refresh(s,r):$(r.closest("[data-section]")))}return!1}}),""!=t.trim(e)&&t.post(azh.ajaxurl,{action:"azh_posts_autocomplete_labels",values:e},function(t){n.val(Object.keys(t).map(function(a){return t[a]}).join(" "))},"json")})}if(i.description&&t('<div class="azh-description">'+i.description+"</div>").appendTo(x),x.data("azh-options",i),x.data("azh-linked-node",a),i.init&&i.init(x,a,i),"menu"in i&&"utility"==i.menu)setTimeout(function(){x.trigger("azh-init")}),_.children(".azh-controls-list").append(x),_.data("azh-filled",!0);else{var Q=a.data("azh-context");Q||(Q=[]),Q.push(x),a.data("azh-context",Q),a.addClass("azh-context")}y.push(x),a.addClass("azh-linked-controls"),a.data("azh-linked-controls",y)}}}function y(a){a.is('[data-element*="shortcode"]')&&a.off("mouseenter.azh-shortcode").off("mouseleave.azh-shortcode");var e=t.trim(a.attr("data-element"));azh.files_settings[e]&&azh.files_settings[e].wrapper_classes&&t(azh.files_settings[e].wrapper_classes).each(function(){a.removeClass(this),j(a,this)}),a.attr("data-element",""),A(a,"data-element",""),a.data("element",""),a.data("azh-linked-controls",!1),a.attr("contenteditable")&&(a.attr("contenteditable","false"),a.removeClass("az-contenteditable"),j(a,"az-contenteditable")),a.empty()}function B(t){var a=t.attr("class").split(" ").filter(function(t){return t.indexOf("az-")>=0&&t}),e=t.attr("class").split(" ").filter(function(t){return t.indexOf("azh-")>=0&&t});t.attr("class",e.concat(a).join(" ")),A(t,"class",a.join(" "))}function q(a,e){var n=t.trim(a.attr("data-element"));azh.files_settings[n]&&azh.files_settings[n].wrapper_classes&&t(azh.files_settings[n].wrapper_classes).each(function(){a.addClass(this),I(a,this)}),e.addClass(a.attr("class"))}function H(a){var e=t('<div class="azh-element-controls" title="'+azh.i18n.element_settings+'"></div>').appendTo(azh.controls_container).on("mouseenter",function(){t(this).data("azh-linked-element").addClass("azh-over")}).on("mouseleave",function(){t(this).data("azh-linked-element").removeClass("azh-over")});return q(a,e),e.hide(),a.data("azh-controls",e),e.data("azh-linked-element",a),a.addClass("azh-controls"),e.append('<div class="azh-name">'+t.trim(a.data("element"))+"</div>"),setTimeout(function(){F(a,e)}),a.closest(".az-no-utility").length&&e.addClass("azh-no-utility"),e}function L(a){return t('<div class="azh-copy-element" title="'+azh.i18n.copy+'"></div>').appendTo(a).on("click",function(){var e=t(this).data("azh-linked-element");a=e.data("azh-controls"),e.find(".az-free-positioning").each(function(){A(azh.$(this),"data-height",azh.$(this).height()),A(azh.$(this),"data-width",azh.$(this).width())});var n=e.clone(!0);azh.liquid_prepare(n);var i=r(k(n,!0));return azh.clipboard={code:i,path:e.attr("data-element")},azh.notify(azh.i18n.copied),t.post(azh.ajaxurl,{action:"azh_copy",code:i,path:e.attr("data-element")},function(t){}),!1})}function it(a){return t('<div class="azh-remove-element" title="'+azh.i18n.remove_element+'"></div>').appendTo(a).on("click",function(){var e=t(this).data("azh-linked-element"),n=e.closest("[data-section]"),i=e.closest("[data-cloneable], [data-cloneable-inline]");a=e.data("azh-controls");var o=la(e);if(o&&(E(o),o.remove()),1===e.parent("[data-cloneable], [data-cloneable-inline]").length)1===e.parent().children().length?(E(e),y(e),H(e)):(E(e),e.remove());else{var s=e.closest(".az-element-wrapper");1===i.find(".az-element-wrapper").length?(E(e),y(e),H(e)):(E(s),s.remove())}return i.length&&(oa(i)?$(n):i.trigger("azh-refresh")),_.defer(qt,i),azh.change(),!1})}function ot(a,e){return t('<div class="azh-add-element-'+(e?"after":"before")+'" title="'+(e?azh.i18n.add_element_after:azh.i18n.add_element_before)+'"></div>').appendTo(a).on("click",function(){var a=t(this).data("azh-linked-element").closest(".az-element-wrapper"),n=!1;a.is("[data-element]")?0===a.contents().length?n=a:(n=a.clone(!0),e?n.insertAfter(a):n.insertBefore(a)):0===a.find("[data-element]").children().length?n=a:(n=a.clone(!0),e?n.insertAfter(a):n.insertBefore(a));var i=n.is("[data-element]")?n:n.find("[data-element]");return y(i),B(i),H(i),setTimeout(function(){i.trigger("click");var t=i.data("azh-controls");t&&t.find(".azh-utility-wrapper").trigger("click")}),azh.change(),!1})}function jt(a){a.on("mouseenter",function(a){if(0===a.which){var e=azh.$(this);azh.$(a.target).parents().each(function(){if("fixed"===azh.$(this).css("position"))return a.stopPropagation(),!1}),setTimeout(function(){e.parents(".az-free-positioning").length||e.find("> .az-free-positioning").each(function(){!function(a){if(!a.data("azh-height-bottom-resizer")){var e=a.get(0).getBoundingClientRect(),n=t('<div class="azh-resizer azh-row-resize"></div>').appendTo(azh.controls_container).on("mousedown",function(n){var i=t(this);return i.data("azh-drag",!0),i.data("azh-drag-y",n.pageY),i.data("azh-start-drag-y",n.pageY),i.css("top",e.top+azh.window.scrollTop()+e.height-5),""==a.get(0).style.height&&vt(a,a.height()),azh.document_off("mouseup.resizer").document_on("mouseup.resizer",function(t){i.data("azh-start-drag-y")===t.pageY&&(a.css("height",""),P(a,"height","")),i.data("azh-drag",!1),i.is(":hover")||azh.document_off("mouseup.resizer")}),azh.document_off("mousemove.resizer").document_on("mousemove.resizer",function(t){if(i.data("azh-drag")){var n=t.pageY-i.data("azh-drag-y"),o=a.closest(".azh-zoom");o.length&&(n/=o.data("azh-scale"));var s=parseFloat(N(a,"height"))+n;(s=isNaN(s)?0:s)<0&&(s=0),vt(a,s),i.data("azh-drag-y",t.pageY),e=a.get(0).getBoundingClientRect(),i.css("top",e.top+azh.window.scrollTop()+e.height-5)}}),n.stopPropagation(),n.preventDefault(),!1}).on("mouseleave",function(e){var n=t(this);n.data("azh-drag")||a.is(":hover")||a.is(".azh-hover")||(a.data("azh-height-bottom-resizer",!1),n.remove(),a.trigger("mouseleave"))}).css({top:e.top+azh.window.scrollTop()+e.height-5,left:e.left,height:10,width:e.width});a.data("azh-height-bottom-resizer",n)}}(azh.$(this))})})}}).on("mouseleave",function(){var a=azh.$(this);setTimeout(function(){t(["azh-width-right-resizer","azh-width-left-resizer","azh-height-top-resizer","azh-height-bottom-resizer"]).each(function(){var t=this;a.data(t)&&(a.data(t).is(":hover")||a.is(".azh-hover")||a.data(t).data("azh-drag")||(a.data(t).remove(),a.data(t,!1))),a.find("> .az-free-positioning").each(function(){var e=azh.$(this);e.data(t)&&(e.data(t).is(":hover")||a.is(".azh-hover")||e.data(t).data("azh-drag")||(e.data(t).remove(),e.data(t,!1)))})})})})}function Ot(t){var a=t.closest(".az-element-wrapper");if(a.data("width",isNaN(parseInt(a.css("width"),10))?0:parseInt(a.css("width"),10)),a.data("height",isNaN(parseInt(a.css("height"),10))?0:parseInt(a.css("height"),10)),a.parent(".az-free-positioning").length||a.parent(".az-elements-list").parent(".az-free-positioning").length||"absolute"===a.css("position")){if(a.is(".az-left")&&a.data("left",isNaN(parseInt(a.css("left"),10))?0:parseInt(a.css("left"),10)),a.is(".az-center")){var e=/calc\(50% ([-+]) ([\d\.]+)px\)/gi.exec(a.get(0).style.left?a.get(0).style.left:"");e?a.data("center",parseInt(e[1]+e[2],10)):a.data("center",0)}if(a.is(".az-right")&&a.data("right",isNaN(parseInt(a.css("right"),10))?0:parseInt(a.css("right"),10)),a.is(".az-top")&&a.data("top",isNaN(parseInt(a.css("top"),10))?0:parseInt(a.css("top"),10)),a.is(".az-middle")){var n=/calc\(50% ([-+]) ([\d\.]+)px\)/gi.exec(a.get(0).style.top?a.get(0).style.top:"");n?a.data("middle",parseInt(n[1]+n[2],10)):a.data("middle",0)}a.is(".az-bottom")&&a.data("bottom",isNaN(parseInt(a.css("bottom"),10))?0:parseInt(a.css("bottom"),10))}else a.data("top",isNaN(parseInt(a.css("top"),10))?0:parseInt(a.css("top"),10)),a.data("left",isNaN(parseInt(a.css("left"),10))?0:parseInt(a.css("left"),10))}function St(a,e,n){function i(t,a){var e={x:!1,y:!1};Math.abs(t.left-a.left)<=o&&(e.side="left",e.x=Math.round(a.left-t.left)),Math.abs(t.left-a.right)<=o&&(e.side="right",e.x=Math.round(a.right-t.left)),Math.abs(t.right-a.left)<=o&&(e.side="left",e.x=Math.round(a.left-t.right)),Math.abs(t.right-a.right)<=o&&(e.side="right",e.x=Math.round(a.right-t.right)),Math.abs(t.top-a.top)<=o&&(e.side="top",e.y=Math.round(a.top-t.top)),Math.abs(t.top-a.bottom)<=o&&(e.side="bottom",e.y=Math.round(a.bottom-t.top)),Math.abs(t.bottom-a.top)<=o&&(e.side="top",e.y=Math.round(a.top-t.bottom)),Math.abs(t.bottom-a.bottom)<=o&&(e.side="bottom",e.y=Math.round(a.bottom-t.bottom));var n=Math.round(t.left+t.width/2),i=Math.round(t.top+t.height/2),s=Math.round(a.left+a.width/2),r=Math.round(a.top+a.height/2);return Math.abs(n-s)<=o&&(e.side="center_x",e.x=s-n),Math.abs(i-r)<=o&&(e.side="center_y",e.y=r-i),e}azh.document_off("mouseup.guides").document_on("mouseup.guides",function(t){Xt()});var o=5,s=at(a,"[data-element]");s=s.add(a),n&&(s=s.not(n));var r={x:{},y:{}};s.each(function(){var t=azh.$(this).get(0).getBoundingClientRect(),a=i(e,t);!1!==a.x&&(a.x in r.x||(r.x[a.x]=0),r.x[a.x]++),!1!==a.y&&(a.y in r.y||(r.y[a.y]=0),r.y[a.y]++)});var h=0,l=!1;for(var c in r.x)r.x[c]>h&&(h=r.x[c],l=c);r.x=l?parseInt(l,10):0;h=0,l=!1;for(var c in r.y)r.y[c]>h&&(h=r.y[c],l=c);if(r.y=l?parseInt(l,10):0,s.each(function(){var a=azh.$(this),n=a.get(0).getBoundingClientRect(),o=i(e,n);if(!1!==o.x&&r.x===o.x||!1!==o.y&&r.y===o.y){n=a.get(0).getBoundingClientRect();t('<div class="azh-guide"></div>').appendTo(azh.controls_container).css({left:n.left,top:n.top+azh.window.scrollTop(),width:n.width,height:n.height});var s=t('<div class="azh-guide-line"></div>').appendTo(azh.controls_container);switch(o.side){case"left":s.css({top:n.top>e.top?e.top+azh.window.scrollTop():n.top+azh.window.scrollTop(),left:n.left,height:n.top>e.top?n.top-e.top+n.height:e.top-n.top+e.height,width:"1px"});break;case"right":s.css({top:n.top>e.top?e.top+azh.window.scrollTop():n.top+azh.window.scrollTop(),left:n.right,height:n.top>e.top?n.top-e.top+n.height:e.top-n.top+e.height,width:"1px"});break;case"top":s.css({left:n.left>e.left?e.left:n.left,top:n.top+azh.window.scrollTop(),width:n.left>e.left?n.left-e.left+n.width:e.left-n.left+e.width,height:"1px"});break;case"bottom":s.css({left:n.left>e.left?e.left:n.left,top:n.bottom+azh.window.scrollTop(),width:n.left>e.left?n.left-e.left+n.width:e.left-n.left+e.width,height:"1px"});break;case"center_x":var h=Math.round(e.left+e.width/2),l=Math.round(e.top+e.height/2)+azh.window.scrollTop(),c=Math.round(n.left+n.width/2);l>(d=Math.round(n.top+n.height/2)+azh.window.scrollTop())?s.css({top:d+"px",height:l-d+"px",left:c+"px",width:"1px"}):s.css({top:l+"px",height:d-l+"px",left:c+"px",width:"1px"});break;case"center_y":h=Math.round(e.left+e.width/2),l=Math.round(e.top+e.height/2)+azh.window.scrollTop(),c=Math.round(n.left+n.width/2);var d=Math.round(n.top+n.height/2)+azh.window.scrollTop();h>c?s.css({top:d+"px",height:"1px",left:c+"px",width:h-c+"px"}):s.css({top:d+"px",height:"1px",left:h+"px",width:c-h+"px"})}}}),a.is(".azh-zoom")){var d=a.data("azh-scale");!1!==r.x&&(r.x=r.x/d),!1!==r.y&&(r.y=r.y/d)}return r}function Xt(){azh.controls_container.find(".azh-guide, .azh-guide-line").remove()}function Ft(t,a,e){t.is(".az-left")&&_t(t,t.data("left")+a),t.is(".az-center")&&kt(t,t.data("center")+a),t.is(".az-right")&&yt(t,t.data("right")-a),t.is(".az-top")&&gt(t,t.data("top")+e),t.is(".az-middle")&&mt(t,t.data("middle")+e),t.is(".az-bottom")&&bt(t,t.data("bottom")-e)}function Ht(t){if(t.data("azh-transformer")){var a=t.data("azh-transformer"),e=t.get(0).getBoundingClientRect();a.css({left:e.left,top:e.top+azh.window.scrollTop(),width:e.width,height:e.height})}}function Wt(a){var e=a.data("azh-controls");e.find(".azh-unmerge").length||t('<div class="azh-unmerge"></div>').on("click",function(a){var e=t(this).closest(".azh-element-controls"),n=e.data("azh-linked-element"),i=at(n,"[data-element]");i.detach(),i.insertAfter(n);var o=n.closest(".az-free-positioning").closest("[data-element]");It(n,"left"),Mt(n,"top");var s=zt(n),r=lt(n),h=n.width()-o.width(),l=n.height()-o.height();i.each(function(){var t=azh.$(this);t.is(".az-left")&&_t(t,zt(t)+s),t.is(".az-center")&&kt(t,pt(t)+s+h/2),t.is(".az-right")&&yt(t,ut(t)-s-h),t.is(".az-top")&&gt(t,lt(t)+r),t.is(".az-middle")&&mt(t,ct(t)+r+l/2),t.is(".az-bottom")&&bt(t,dt(t)-r-l)}),e.find(".azh-remove-element").length&&e.find(".azh-remove-element").click(),_.defer(qt,o)}).appendTo(e)}function Lt(t,a){if(t.data("azh-lasso")){var e={left:Number.POSITIVE_INFINITY,top:Number.POSITIVE_INFINITY,width:0,height:0};a.each(function(){azh.$(this);var t=this.getBoundingClientRect(),a={left:t.left,top:t.top,width:t.width,height:t.height};e.left>a.left&&(e.left!==Number.POSITIVE_INFINITY&&(e.width=e.width+(e.left-a.left)),e.left=a.left),e.top>a.top&&(e.top!==Number.POSITIVE_INFINITY&&(e.height=e.height+(e.top-a.top)),e.top=a.top),e.left+e.width<a.left+a.width&&(e.width=a.left+a.width-e.left),e.top+e.height<a.top+a.height&&(e.height=a.top+a.height-e.top)});var n=t.data("azh-lasso");e.top=e.top+azh.window.scrollTop(),n.css(e).off("mousedown").on("mousedown",function(e){t.addClass("azh-lasso-transform"),t.data("pageX",e.pageX),t.data("pageY",e.pageY),a.each(function(){Ot(azh.$(this))})})}}function Ut(t){t.each(function(){Jt(azh.$(this))})}function Jt(t){if(t.data("azh-selection")){var a=t.data("azh-selection"),e=t.get(0).getBoundingClientRect();a.css({left:e.left,top:e.top+azh.window.scrollTop(),width:e.width,height:e.height})}}function Vt(a){azh.document_off("mousemove.lasso").document_on("mousemove.lasso",function(a){if(1===a.which){var e=!1;if(azh.$(".azh-lasso").each(function(){e=!0;var n=azh.$(this),i=a.pageY-n.data("pageY")+azh.window.scrollTop(),o=a.pageX-n.data("pageX")-azh.device_left,s=n.data("azh-lasso");s.css({left:n.data("pageX"),top:n.data("pageY"),width:o,height:i});var r=at(n,"[data-element]"),h=s.get(0).getBoundingClientRect();r.each(function(){var a,e,n=azh.$(this),i=this.getBoundingClientRect(),o={left:i.left+azh.device_left,right:i.right+azh.device_left,top:i.top,bottom:i.bottom};if((e=o).left>(a=h).right||e.right<a.left||e.top>a.bottom||e.bottom<a.top)n.data("azh-selection")&&(n.data("azh-selection").remove(),n.data("azh-selection",!1),n.removeClass("azh-selected"));else if(!n.data("azh-selection")){var s=t('<div class="azh-selection"></div>').appendTo(azh.controls_container);s.data("azh-linked-element",n),n.data("azh-selection",s),n.addClass("azh-selected")}Jt(n)})}),azh.$(".azh-lasso-transform").each(function(){Xt(),e=!0;var t=azh.$(this),n=at(t,"[data-element]").filter(".azh-selected");if(n.length){var i=a.pageY-t.data("pageY"),o=a.pageX-t.data("pageX");n.each(function(){Ft(azh.$(this),o,i)}),Lt(t,n);var s=t.data("azh-lasso").get(0).getBoundingClientRect(),r=1;t.is(".azh-zoom")&&(r=t.data("azh-scale"));var h=St(t,{left:s.left-azh.device_left*r,right:s.right-azh.device_left*r,top:s.top,bottom:s.bottom,width:s.width,height:s.height},n);n.each(function(){Ft(azh.$(this),o+h.x,i+h.y)}),Lt(t,n),n.each(function(){Jt(azh.$(this))})}}),e)return!1}}),azh.document_off("mouseup.lasso").document_on("mouseup.lasso",function(a){var e=!1;if(azh.$(".azh-lasso").each(function(a){e=!0;var n=azh.$(this);n.removeClass("azh-lasso");var i=at(n,"[data-element]").filter(".azh-selected");if(i.length){Lt(n,i);var o=n.data("azh-lasso"),s=t('<div class="azh-operations"></div>').appendTo(o),r=t('<div class="azh-alignment"></div>').appendTo(s),h=t('<div class="azh-a-alignment"></div>').appendTo(r);if(t('<div class="azh-top-alignment"></div>').appendTo(h).on("click",function(t){i.length>1?Rt(i,"top"):(st(i),wt(i)),Lt(n,i),Ut(i)}),t('<div class="azh-middle-alignment"></div>').appendTo(h).on("click",function(t){i.length>1?Rt(i,"middle"):(st(i),xt(i)),Lt(n,i),Ut(i)}),t('<div class="azh-bottom-alignment"></div>').appendTo(h).on("click",function(t){i.length>1?Rt(i,"bottom"):(st(i),$t(i)),Lt(n,i),Ut(i)}),t('<div class="azh-left-alignment"></div>').appendTo(h).on("click",function(t){i.length>1?Pt(i,"left"):(st(i),Tt(i)),Lt(n,i),Ut(i)}),t('<div class="azh-center-alignment"></div>').appendTo(h).on("click",function(t){i.length>1?Pt(i,"center"):(st(i),Ct(i)),Lt(n,i),Ut(i)}),t('<div class="azh-right-alignment"></div>').appendTo(h).on("click",function(t){i.length>1?Pt(i,"right"):(st(i),At(i)),Lt(n,i),Ut(i)}),i.length>2){var l=t('<div class="azh-b-alignment"></div>').appendTo(r);t('<div class="azh-between-top-alignment"></div>').appendTo(l).on("click",function(t){Nt(i,"top"),Lt(n,i),Ut(i)}),t('<div class="azh-between-middle-alignment"></div>').appendTo(l).on("click",function(t){Nt(i,"middle"),Lt(n,i),Ut(i)}),t('<div class="azh-between-bottom-alignment"></div>').appendTo(l).on("click",function(t){Nt(i,"bottom"),Ut(i)}),t('<div class="azh-between-left-alignment"></div>').appendTo(l).on("click",function(t){Bt(i,"left"),Lt(n,i),Ut(i)}),t('<div class="azh-between-center-alignment"></div>').appendTo(l).on("click",function(t){Bt(i,"center"),Lt(n,i),Ut(i)}),t('<div class="azh-between-right-alignment"></div>').appendTo(l).on("click",function(t){Bt(i,"right"),Lt(n,i),Ut(i)})}i.length>1&&t('<div class="azh-merge"></div>').appendTo(s).on("click",function(t){var a=n.get(0).getBoundingClientRect(),e=o.get(0).getBoundingClientRect();n.trigger("mousedown"),n.trigger("mouseup");i.parent();var s=ca(i.first());s.removeClass("azh-selected"),s.addClass("az-group"),I(s,"az-group"),s.data("azh-controls").addClass("az-fixed-controls");var r=it(s.data("azh-controls"));r.data("azh-linked-element",s),(r=ot(s.data("azh-controls"),!0)).data("azh-linked-element",s),(r=ot(s.data("azh-controls"),!1)).data("azh-linked-element",s),(r=L(s.data("azh-controls"))).data("azh-linked-element",s),s.attr("data-element","free-positioning/free-positioning.htm"),A(s,"data-element","free-positioning/free-positioning.htm"),s.html('<div class="az-free-positioning" style="height: 100%; width: 100%;"><div class="az-overlay" data-cloneable><div></div></div><div class="az-elements-list" data-cloneable></div></div>'),b(s.get(0)),i.detach(),et(s),s.find(".az-elements-list").append(i);var h=1;n.is(".azh-zoom")&&(h=n.data("azh-scale"));var l=(e.left-a.left)/h-azh.device_left/h,c=(e.top-a.top)/h,d=(e.width-a.width)/h,z=(e.height-a.height)/h;st(s),wt(s),Tt(s),gt(s,c),_t(s,l),ft(s,e.width/h),vt(s,e.height/h),i.each(function(){var t=azh.$(this);t.is(".az-left")&&_t(t,zt(t)-l),t.is(".az-center")&&kt(t,pt(t)-l-d/2),t.is(".az-right")&&yt(t,ut(t)+l+d),t.is(".az-top")&&gt(t,lt(t)-c),t.is(".az-middle")&&mt(t,ct(t)-c-z/2),t.is(".az-bottom")&&bt(t,dt(t)+c+z)}),setTimeout(function(){s.trigger("click");var t=s.data("azh-controls");t&&t.find(".azh-utility-wrapper").trigger("click")}),_.defer(qt,n),function(t,a){t.each(function(){azh.$(this).data("azh-controls").find(a).remove()})}(i,".azh-add-element"),Wt(s)})}else n.data("azh-lasso").remove(),n.data("azh-lasso",!1)}),azh.$(".azh-lasso-transform").each(function(){e=!0,azh.$(this).removeClass("azh-lasso-transform")}),e)return!1}),a.on("click",function(t){azh.$(this)}).on("mouseenter",function(t){azh.$(this)}).on("mouseleave",function(t){azh.$(this)}).on("mousedown",function(a){var e=azh.$(this);if(!e.parents(".az-free-positioning").length&&!e.find(".azh-transform").length&&!e.find(".azh-editing").length&&(e.is(a.target)||!azh.$(a.target).parentsUntil(e).filter("[draggable]").length)){at(e,"[data-element]").filter(".azh-selected").each(function(){var t=azh.$(this);t.data("azh-selection").remove(),t.data("azh-selection",!1),t.removeClass("azh-selected")}),e.addClass("azh-lasso"),e.data("pageX",a.pageX),e.data("pageY",a.pageY);var n=e.data("azh-lasso");return n||((n=t('<div class="azh-selector"></div>').appendTo(azh.controls_container)).data("azh-linked-element",e),e.data("azh-lasso",n)),n.empty(),n.css({left:e.data("pageX"),top:e.data("pageY"),width:0,height:0}),!1}})}function Qt(t,a){var e=new RegExp("(^"+a+"|[ \\\"\\'\\;]"+a+")\\s*:","i");if(t.attr("style").match(e)){var n=C(t,"style");if(!1!==n&&n.match(e))return!0}return!1}function Gt(n,i){function o(a){V({title:azh.i18n.shortcode_edit,desc:"",label:azh.i18n.shortcode},t.trim(azh.shortcode_instances[a]),function(e){azh.shortcode_instances[a]=e,t.post(azh.ajaxurl,{action:"azh_update_shortcode",post_id:azh.post_id,instance:a,shortcode:e},function(t){t&&(n.html(t),n.find("a[href]").on("click",function(t){t.preventDefault()}),i&&i())}),azh.change()})}if("shortcode_instances"in azh&&azh.shortcode_instances&&n.attr("data-shortcode")in azh.shortcode_instances){if(c=G(azh.shortcode_instances[n.attr("data-shortcode")])){var s=c[2],r=a.attrs(c[3]).named,h=c[5],l=azh.shortcodes[s];r.content=h,azh.open_element_settings_dialog(l,r,function(a,e){a=K(l,a,e);azh.shortcode_instances[n.attr("data-shortcode")]=a;var o=n.attr("data-shortcode");t.post(azh.ajaxurl,{action:"azh_update_shortcode",post_id:azh.post_id,instance:o,shortcode:a},function(t){if(t){var a=n.closest("[data-section]");n.replaceWith(t),n.find("a[href]").on("click",function(t){t.preventDefault()}),n=a.find('[data-shortcode="'+o+'"]'),b(n.get(0)),azh.section_customization_init(a),i&&i()}}),azh.change()})}}else if(n.is('[data-element*="shortcode"]')){var c,d=n.attr("data-element"),z="";if(n.children().length||(z=n.text()),"shortcode_instances"in azh&&azh.shortcode_instances&&d in azh.shortcode_instances?z=azh.shortcode_instances[d]:(d="shortcode: "+e(),n.attr("data-element",d),A(n,"data-element",d),azh.shortcode_instances[d]=z),c=G(z)){s=c[2],r=a.attrs(c[3]).named,h=c[5];if(r.content=h,azh.shortcodes[s]){l=azh.shortcodes[s];azh.open_element_settings_dialog(l,r,function(a,e){a=K(l,a,e);azh.shortcode_instances[d]=a,t.post(azh.ajaxurl,{action:"azh_update_shortcode",post_id:azh.post_id,instance:d,shortcode:a},function(t){t&&(n.html(t),n.find("a[href]").on("click",function(t){t.preventDefault()}),i&&i())}),azh.change()})}else o(d)}else o(d)}}function Kt(a,e){if("modal_options"in azh){var n=1;t(azh.modal_options).each(function(){var i=this;if(e){if(i.menu&&"utility"!==i.menu)return}else if(i.menu&&"context"!==i.menu)return;i.order||(i.order=n),n++,"selector"in i&&a.find(i.selector).addBack().filter(i.selector).each(function(){var a=azh.$(this),n=f(a.closest('[data-section].azh-controls, [class*="azh-col-"].azh-controls, [data-element].azh-controls'));if(!a.parents('[data-element*="shortcode"]').length){if(e){if(!("menu"in i&&"utility"==i.menu))return;if(!e.is(n))return}var o=t('<div class="azh-modal-button '+i.button_class+'" data-type="'+i.button_type+'" title="'+i.title+'" '+(i.group?'data-group="'+i.group+'"':"")+(i.subgroup?'data-subgroup="'+i.subgroup+'"':"")+(i.order?'data-order="'+i.order+'"':"")+">"+i.button_text+"</div>").on("click",function(a){var e=t(this);!function(a,e,n){var i=t('<div class="azh-modal"></div>');if(t('<div class="azh-modal-title">'+a.title+"</div>").appendTo(i),a.desc&&t('<div class="azh-modal-desc">'+a.desc+"</div>").appendTo(i),"attribute"in a)if(a.label&&t('<div class="azh-modal-label">'+a.label+"</div>").appendTo(i),"options"in a){var o=t('<select class="azh-modal-control" name="'+a.attribute+'"></select>').appendTo(i);for(var s in a.options)s===e.attr(a.attribute)?t('<option value="'+s+'" selected>'+a.options[s]+"</option>").appendTo(o):t('<option value="'+s+'">'+a.options[s]+"</option>").appendTo(o)}else a.type&&"textarea"===a.type?t('<textarea name="'+a.attribute+'" class="azh-modal-control">'+(e.attr(a.attribute)?e.attr(a.attribute):"")+"</textarea>").appendTo(i):t('<input type="'+(a.type?a.type:"text")+'" name="'+a.attribute+'" value="'+(e.attr(a.attribute)?e.attr(a.attribute):"")+'" class="azh-modal-control">').appendTo(i);if("attributes"in a)for(var r in a.attributes){var h=a.attributes[r];if(h.label&&t('<div class="azh-modal-label">'+h.label+"</div>").appendTo(i),"options"in h)for(var s in o=t('<select class="azh-modal-control" name="'+r+'"></select>').appendTo(i),h.options)s===e.attr(r)?t('<option value="'+s+'" selected>'+h.options[s]+"</option>").appendTo(o):t('<option value="'+s+'">'+h.options[s]+"</option>").appendTo(o);else h.type&&"textarea"===h.type?t('<textarea name="'+r+'" class="azh-modal-control">'+e.attr(r)+"</textarea>").appendTo(i):t('<input type="'+(h.type?h.type:"text")+'" name="'+r+'" value="'+e.attr(r)+'" class="azh-modal-control">').appendTo(i)}a.callback&&a.callback(e,i);var l=t('<div class="azh-modal-actions"></div>').appendTo(i);t('<div class="azh-modal-ok">'+azh.i18n.ok+"</div>").appendTo(l).on("click",function(){if("attribute"in a&&(e.attr(a.attribute,i.find('[name="'+a.attribute+'"]').val()),A(e,a.attribute,i.find('[name="'+a.attribute+'"]').val())),"attributes"in a)for(var o in a.attributes)e.attr(o,i.find('[name="'+o+'"]').val()),A(e,o,i.find('[name="'+o+'"]').val());return t.simplemodal.close(),n(),!1}),t('<div class="azh-modal-cancel">'+azh.i18n.cancel+"</div>").appendTo(l).on("click",function(){return t.simplemodal.close(),!1}),i.simplemodal({autoResize:!0,overlayClose:!0,opacity:0,overlayCss:{"background-color":"black"},closeClass:"azh-close",onClose:function(){t.simplemodal.close()}})}(i,e.data("azh-linked-node"),function(){e.data("azh-options").refresh&&$(e.data("azh-linked-node").closest("[data-section]"))})}).on("mouseenter",function(){var a=t(this);a.data("azh-linked-node")&&a.data("azh-linked-node").addClass("azh-over")}).on("mouseleave",function(){var a=t(this);a.data("azh-linked-node")&&a.data("azh-linked-node").removeClass("azh-over")});if(o.data("azh-options",i),o.data("azh-linked-node",a),"menu"in i){if("context"===i.menu){var s=a.data("azh-context");s||(s=[]),s.push(o),a.data("azh-context",s),a.addClass("azh-context")}"utility"===i.menu&&(n.children(".azh-controls-list").append(o),n.data("azh-filled",!0))}else{if("section_control"in i&&i.section_control)a.closest("[data-section]").data("azh-controls").append(o);else a.closest("[data-section].azh-controls, [data-element].azh-controls").data("azh-controls").append(o)}}})})}}function Zt(a,e){function n(a,i,o){for(var s in i.children){o&&s!==o&&azh.standard_elements_start_classes;var r=a.find(s);if(i!==azh.selectors_cache_tree&&i!==azh.context_selectors_cache_tree&&i!==azh.utility_selectors_cache_tree||(r=r.addBack().filter(s)),r.length){var h=i.children[s].options_list;h&&t(h).each(function(){var t=this;r.each(function(){m(azh.$(this),t,e)})}),r.each(function(){azh.$(this).is(a)||n(azh.$(this),i.children[s])})}}}if("controls_options"in azh){if(function(){function a(t,e,n){var i=t.children[n[e]];return i||(i={options_list:[],children:{}},t.children[n[e]]=i),e+1<n.length?a(i,e+1,n):i}if(!azh.selectors_cache_tree){azh.selectors_cache_tree={children:{}},azh.context_selectors_cache_tree={children:{}},azh.utility_selectors_cache_tree={children:{}};var e=1;t(azh.controls_options).each(function(){var n=this;if(n.selector){var i=n.selector.split(",");n.order||(n.order=e),t(i).each(function(){var e=t.trim(this).replace(/([\~\+\>])/g," $1 ").replace(/\s\s+/g," ").replace(/ ([\~\+\>]) /g," $1");e=(e=(e=e.replace(/" "/g,'"***"')).split(" ")).map(function(t){return t.replace(/"\*\*\*"/g,'" "')}),a(azh.selectors_cache_tree,0,e).options_list.push(n),"context"===n.menu&&a(azh.context_selectors_cache_tree,0,e).options_list.push(n),"utility"===n.menu&&a(azh.utility_selectors_cache_tree,0,e).options_list.push(n)})}e++})}}(),e){var i=!1;if(e.data("azh-linked-element")){var o=e.data("azh-linked-element").children().first();if(o.is(Object.keys(azh.standard_elements_start_classes).join(", "))){var s=o.attr("class").split(" ").map(function(a){return t.trim(a)});t.each(s,function(){var t="."+this;t in azh.standard_elements_start_classes&&(i=t)})}}var r=Date.now();n(a,azh.utility_selectors_cache_tree,i),console.log("traverse: "+(Date.now()-r))}else n(a,azh.context_selectors_cache_tree);t(azh.controls_options).each(function(){var t=this;if(e){if(t.menu&&"utility"!==t.menu)return}else if(t.menu&&"context"!==t.menu)return;if(!("selector"in t))switch(t.type){case"input-attribute":case"textarea-attribute":case"dropdown-attribute":case"radio-attribute":case"integer-attribute":case"toggle-attribute":case"url-attribute":case"toggle-url-argument":case"image-attribute":case"color-attribute":a.find("["+t.attribute+"]").each(function(){var n=C(azh.$(this),t.attribute);if(!1!==n){if("restriction"in t&&t.restriction){var i=t.restriction,o=new RegExp("{"+t.attribute+"}","g");if(i=i.replace(o,n),a.find(i).length)return}m(azh.$(this),t,e)}});break;case"dropdown-style":case"radio-style":case"integer-style":case"integer-list-style":case"background-image":case"color-style":case"font-family":t.attribute?a.find("["+t.attribute+"]").each(function(){var a=azh.$(this);(function(t,a){var e=new RegExp("(^"+a+"|[ \\\"\\'\\;]"+a+")\\s*:","i");if(t.attr("data-hover").match(e)){var n=C(t,"data-hover");if(!1!==n&&n.match(e))return!0}return!1})(a,t.property)&&m(a,t,e)}):a.find("[style]").each(function(){var a=azh.$(this);t.is_selector&&!a.is(t.is_selector)||Qt(a,t.property)&&m(a,t,e)})}})}}function ta(t,a,e){e||(azh.controls_container.detach(),Z(t)),Kt(t,a),Zt(t,a),ia(a.children(".azh-controls-list"),":not(.azh-group):not(.azh-subgroup):not(.azh-cloneable-group):not(.azh-utility-title):not(.azh-context-menu-title)"),ha(a.children(".azh-controls-list")),e||(azh.controls_container.appendTo(z),tt(t)),a&&(a.find('.azh-responsive [data-prefix="'+azh.device_prefix+'"]').trigger("click"),a.data("azh-filled",!0))}function aa(t){var a=f(t.closest('[data-section].azh-controls, [class*="azh-col-"].azh-controls, [data-element].azh-controls')),e=a.data("azh-linked-element");(i=e.closest("[data-section]")).length&&(a.children(".azh-controls-list").empty(),a.data("azh-filled",!1))}function ea(t){var a=f(t.closest('[data-section].azh-controls, [class*="azh-col-"].azh-controls, [data-element].azh-controls')),e=a.find("[data-group].azh-group.azh-active").data("group"),n=a.find("[data-subgroup].azh-subgroup.azh-active").data("subgroup");return{scrollTop:a.children(".azh-controls-list").scrollTop(),group:e,subgroup:n}}function na(t,a){var e=f(t.closest('[data-section].azh-controls, [class*="azh-col-"].azh-controls, [data-element].azh-controls'));return e.closest(".azh-utility-wrapper").trigger("click"),e.find('[data-group="'+a.group+'"].azh-title').trigger("click"),e.find('[data-subgroup="'+a.subgroup+'"].azh-title').trigger("click"),e.children(".azh-controls-list").scrollTop(a.scrollTop),e}function ia(a,e){var n=a.children();e&&(n=a.children(e)),n.detach(),n.sort(function(a,e){var n=parseInt(t(a).attr("data-order"),10),i=parseInt(t(e).attr("data-order"),10);return n<i?-1:n>i?1:0}),a.append(n)}function oa(t){return t.data("azh-cloneable")&&!0===t.data("azh-cloneable").refresh||t.is(azh.cloneable_refresh.join(","))||t.find(azh.cloneable_refresh_children.join(",")).length}function sa(a){if(!a.closest(".azh-context-menu").length){var n=azh.$(),i=azh.$(),o=a.children(":not(.azh-group):not(.azh-subgroup)");o.length&&(o.each(function(){var a=t(this).data("azh-linked-node");if(a){i=i.add(a);var e=a.closest("[data-element]"),o=a.closest("[data-cloneable], [data-cloneable-inline]");o.length&&(e.length&&o.has(e).length||(n=n.add(o)))}}),n.each(function(){var n=azh.$(this),s=[];if(n.children().each(function(){var t=azh.$(this),a=i.filter(function(){return azh.$(this).parents().addBack().filter(t).length});a.length&&s.push(a)}),s.length){var r=t('<div class="azh-cloneable-groups azh-right-tabs"/>').appendTo(a),h=t('<div class="azh-operations"></div>').appendTo(r),l=t('<div class="azh-cloneable-list"></div>').appendTo(r),c=!1;t(s).each(function(){var a=t();if(azh.$(this).each(function(){t(azh.$(this).data("azh-linked-controls")).each(function(){a=a.add(this)})}),(a=a.filter(o)).length){c=!0,a.detach();var n=e(),i=t('<div class="azh-cloneable-group" data-id="'+n+'"/>').appendTo(l).append(a);ra(i),ia(i);var s=a.first().data("azh-linked-node");if(s){var r=s.closest(".azh-cloneable-child-controls"),d=t('<div data-trigger="'+n+'"></div>').appendTo(h).data("azh-linked-child",r).on("mouseenter",function(){t(this).data("azh-linked-child").addClass("azh-over")}).on("mouseleave",function(){t(this).data("azh-linked-child").removeClass("azh-over")}).data("azh-linked-child",r);t('<span class="azh-move" title="'+azh.i18n.move+'"></span>').appendTo(d).on("click",function(a){var e=t(this).data("azh-linked-child"),n=t(this).closest("[data-trigger]"),i=a.which?400:0;return n.addClass("azh-active").siblings().removeClass("azh-active"),l.children().filter('[data-id="'+n.data("trigger")+'"]').fadeIn(i).siblings().css("display","none"),e.trigger("azh-active"),!1}).data("azh-linked-child",r),t('<span class="azh-clone" title="'+azh.i18n.clone+'"></span>').appendTo(d).on("click",function(){var a=t(this).data("azh-linked-child");if(oa(a.closest("[data-cloneable], [data-cloneable-inline]")))a.data("azh-cloneable-child-controls").find(".azh-clone").trigger("click");else{var e=ea(a);a.data("azh-cloneable-child-controls").find(".azh-clone").trigger("click"),na(a,e)}return!1}).data("azh-linked-child",r),t('<span class="azh-remove" title="'+azh.i18n.remove+'"></span>').appendTo(d).on("click",function(){if(l.children().length>1){var a=t(this).data("azh-linked-child"),e=a.closest("[data-cloneable], [data-cloneable-inline]");if(oa(e))a.data("azh-cloneable-child-controls").find(".azh-remove").trigger("click");else{var n=ea(a);a.data("azh-cloneable-child-controls").find(".azh-remove").trigger("click"),na(e,n)}}return!1}).data("azh-linked-child",r)}}}),c?(h.sortable({handle:".azh-move",placeholder:"azh-placeholder",forcePlaceholderSize:!0,update:function(a,e){var n=t(e.item).data("azh-linked-child"),i=n.closest("[data-cloneable], [data-cloneable-inline]");(n.detach(),t(e.item).next().length)?t(e.item).next().data("azh-linked-child").before(n):t(e.item).prev().length&&t(e.item).prev().data("azh-linked-child").after(n);oa(i)&&$(i.closest("[data-section]"))},over:function(t,a){a.placeholder.attr("class",a.helper.attr("class")),a.placeholder.removeClass("ui-sortable-helper"),a.placeholder.attr("style",a.helper.attr("style")),a.placeholder.css("position","relative"),a.placeholder.css("z-index","auto"),a.placeholder.css("left","auto"),a.placeholder.css("top","auto"),a.placeholder.addClass("azh-placeholder")}}),h.children().first().find(".azh-move").trigger("click")):r.remove()}}))}}function ra(a){var e={};if(a.find("> [data-subgroup]").each(function(){e[t(this).data("subgroup")]=!0}),(e=Object.keys(e)).length){var n=t('<div class="azh-subgroups azh-tabs"/>').appendTo(a),i=t('<div class="azh-titles"></div>').appendTo(n),o=t('<div class="azh-subgroup-list"></div>').appendTo(n);t(e).each(function(){var e=a.find('> [data-subgroup="'+this+'"]').detach();t('<div class="azh-subgroup" data-subgroup="'+this+'"/>').appendTo(o).append(e);t('<span class="azh-title" data-subgroup="'+this+'">'+this+"</span>").appendTo(i).on("click",function(e){var n=t(this);n.addClass("azh-active").siblings().removeClass("azh-active");var i=e.which?400:0;return a.find('.azh-subgroup[data-subgroup="'+n.data("subgroup")+'"]').fadeIn(i).siblings().css("display","none"),!1})}),i.children().first().trigger("click")}}function ha(a){var e={};a.find("> [data-group]").each(function(){e[t(this).data("group")]=!0}),e=Object.keys(e),t(e).each(function(){var e=a.find('> [data-group="'+this+'"]:not(.azh-group)').wrapAll('<div class="azh-group" data-group="'+this+'"/>').parent(),n=e.children(),i=t('<div class="azh-group-list"/>').insertBefore(n.first());n.detach().appendTo(i);t('<div class="azh-title" data-group="'+this+'">'+this+"</div>").prependTo(e).on("click",function(e){var n=t(this),i=e.which?400:0;return n.closest(".azh-group").is(".azh-active")?n.closest(".azh-group").removeClass("azh-active").find(".azh-group-list").slideUp(i):(a.find(".azh-group").removeClass("azh-active").find(".azh-group-list").slideUp(i),n.closest(".azh-group").addClass("azh-active").find(".azh-group-list").slideDown(i,function(){t(this).css("overflow","visible")})),!1})}),a.find(".azh-group > .azh-group-list").each(function(){sa(t(this)),ra(t(this))}).hide(),sa(a)}function la(a){var e=!1,n=a.closest("[data-section]").data("azh-linked-ids");return a.find(".azh-id-attr, .azh-hash-attr").addBack().filter(".azh-id-attr, .azh-hash-attr").each(function(){var a=azh.$(this),i=!1;if(a.data("azh-id-attr")&&(i=a.attr(a.data("azh-id-attr"))),a.data("azh-hash-attr")&&(i=a.attr(a.data("azh-hash-attr")).replace("#","")),i&&i in n&&(t(n[i]).each(function(){if(!azh.$(this).is(a))return 0===(e=azh.$(this).parentsUntil("[data-cloneable], [data-cloneable-inline]").last()).length&&(e=azh.$(this)),!1}),e))return!1}),e}function ca(t){var a=!1;t.is("[data-element]")?0===t.contents().length?a=t:(a=t.clone(!0)).insertAfter(t):0===t.find("[data-element]").children().length?a=t:(a=t.clone(!0)).insertAfter(t);var e=a.is("[data-element]")?a:a.find("[data-element]");return y(e),B(e),H(e),e}azh.window.trigger("azh-customization-before-init",{wrapper:i}),Z(i),azh.controls_container=!1,t(".azh-controls-container").length?(azh.controls_container=t(".azh-controls-container"),azh.controls_container.detach()):azh.controls_container=t('<div class="azh-controls-container"></div>'),i.on("contextmenu",function(a){function e(a,e){function n(a,e){e.is(".azh-context")&&t(e.data("azh-context")).each(function(){var n=t(this);0===a.children().filter('[data-type="'+n.data("type")+'"]').length&&a.append(n.clone(!0).data("azh-linked-node",e))}),e.parents(".azh-context").each(function(){var e=azh.$(this);t(e.data("azh-context")).each(function(){var n=t(this);0===a.children().filter('[data-type="'+n.data("type")+'"]').length&&a.append(n.clone(!0).data("azh-linked-node",e))})})}n(a,e);var i=e.closest("[data-section]").data("azh-linked-ids");e.parents(".azh-id-attr").addBack().filter(".azh-id-attr").each(function(){var e=azh.$(this);if(e.is(".azh-id-attr")){var o=e.attr(e.data("azh-id-attr"));o in i&&t(i[o]).each(function(){azh.$(this).is(e)||n(a,azh.$(this))})}}),e.parents(".azh-hash-attr").addBack().filter(".azh-hash-attr").each(function(){var e=azh.$(this);if(e.is(".azh-hash-attr")){var o=e.attr(e.data("azh-hash-attr")).replace("#","");o in i&&t(i[o]).each(function(){azh.$(this).is(e)||n(a,azh.$(this))})}});var o=a.find(".azh-modal-button");o.detach(),a.prepend(o)}a.preventDefault();var n=azh.$(a.target);if(n.closest(".azh-deferred-context-controls").length){var i=n.closest(".azh-deferred-context-controls");Zt(i),i.removeClass("azh-deferred-context-controls")}var o=t(".azh-context-menu").length?t(".azh-context-menu"):t('<div class="azh-context-menu"></div>').appendTo(z);o.hide(),o.empty(),t('<div class="azh-context-menu-title">'+p(n)+"</div>").prependTo(o);var s=t('<div class="azh-controls-list"></div>').appendTo(o);if(o.css("left",a.clientX+(azh.device_left?azh.device_left:0)+"px"),o.css("top",a.clientY+"px"),d.off("click.azh-context-menu").on("click.azh-context-menu",function(a){t(a.target).closest(azh.click_not_hide_contextmenu).length||t(a.target).closest(".azh-context-menu").length||(o.hide(),d.off("click.azh-context-menu"))}),n.is(".azh-auxiliary")&&(n.css("pointer-events","none"),e(s,azh.$(azh.document.get(0).elementFromPoint(a.clientX,a.clientY))),n.css("pointer-events","")),e(s,n),"absolute"===n.css("position")&&(n.css("pointer-events","none"),e(s,azh.$(azh.document.get(0).elementFromPoint(a.clientX,a.clientY))),n.css("pointer-events","")),n.is(".az-spacer")&&(n.closest("[data-element]").css("pointer-events","none"),e(s,azh.$(azh.document.get(0).elementFromPoint(a.clientX,a.clientY))),n.closest("[data-element]").css("pointer-events","")),n.children(".az-overlay").length&&(n.children(".az-overlay").get(0).style.setProperty("pointer-events","all","important"),n.children(".az-overlay").children().each(function(){this.style.setProperty("pointer-events","all","important"),e(s,azh.$(azh.document.get(0).elementFromPoint(a.clientX,a.clientY)))}),n.children(".az-overlay").get(0).style.setProperty("pointer-events","",""),n.children(".az-overlay").children().each(function(){this.style.setProperty("pointer-events","","")})),n.closest(".az-remarkable").length){n.closest(".az-remarkable").children().first().css("pointer-events","none");var r=0;n.closest(".az-remarkable").children().last().children(".az-remark-wrapper").each(function(){r>parseInt(azh.$(this).css("z-index"),10)&&(r=parseInt(azh.$(this).css("z-index"),10))}),n.closest(".az-remarkable").children().last().children(".az-remark-wrapper").each(function(){azh.$(this).data("azh-old-z-index",azh.$(this).css("z-index")),azh.$(this).css("z-index",parseInt(azh.$(this).css("z-index"),10)-r)}),e(s,azh.$(azh.document.get(0).elementFromPoint(a.clientX,a.clientY))),n.closest(".az-remarkable").children().last().children(".az-remark-wrapper").each(function(){azh.$(this).css("pointer-events","all"),azh.$(this).siblings().css("pointer-events","none"),e(s,azh.$(azh.document.get(0).elementFromPoint(a.clientX,a.clientY)))}),n.closest(".az-remarkable").children().last().children(".az-remark-wrapper").css("pointer-events",""),n.closest(".az-remarkable").children().last().children(".az-remark-wrapper").each(function(){azh.$(this).css("z-index",azh.$(this).data("azh-old-z-index"))}),n.closest(".az-remarkable").children().first().css("pointer-events",""),n.closest(".az-remarkable").children().last().css("pointer-events","none"),e(s,azh.$(azh.document.get(0).elementFromPoint(a.clientX,a.clientY))),n.closest(".az-remarkable").children().last().css("pointer-events","")}n.children().each(function(){var t=azh.$(this);"none"===t.css("pointer-events")&&(t.css("pointer-events","all"),e(s,azh.$(azh.document.get(0).elementFromPoint(a.clientX,a.clientY))),t.css("pointer-events",""))}),s.children().off("mouseenter").on("mouseenter",function(){var a=t(this);a.data("azh-linked-node")&&a.data("azh-linked-node").addClass("azh-over")}),s.children().off("mouseleave").on("mouseleave",function(){var a=t(this);a.data("azh-linked-node")&&a.data("azh-linked-node").removeClass("azh-over")}),setTimeout(function(){s.children().each(function(){t(this).trigger("azh-init")}),ha(s);var a=s.closest(".azh-context-menu");a.length&&a.offset().top+a.outerHeight()>z.height()&&a.css("top",z.height()-a.outerHeight()+"px")}),s.children().length&&(o.show().trigger("azh-showed"),o.find(".azh-modal-button, .azh-button").on("click",function(){o.hide()}),o.draggable({handle:".azh-context-menu-title"}))}),i.find(".az-contenteditable").addBack().filter(".az-contenteditable").each(function(){o(azh.$(this))}),i.find("span.az-inline").each(function(){var t=azh.$(this);t.parent().children().length===t.parent().children().filter("span.az-inline").length&&o(t.parent())}),i.contents().filter(function(){return 3===this.nodeType}).each(function(){t.trim(this.textContent)&&o(azh.$(this).parent())}),i.find("*:not(iframe)").contents().filter(function(){return 3===this.nodeType}).each(function(){t.trim(this.textContent)&&o(azh.$(this).parent())}),i.find("a:not(.azh-id-attr):not(.azh-hash-attr)").each(function(){var a=azh.$(this);if(!a.closest(azh.dynamic_content).length){var e=t('<div class="azh-button azh-edit-link" data-type="azh-edit-link">'+azh.i18n.edit_link+"</div>").on("click",function(a){var e=t(this).data("azh-linked-node");azh.open_link_select_dialog(a,function(t,a,n){e.attr("href",t),e.attr("target",a||"_self"),A(e,"href",t),A(e,"target",a||"_self"),A(e,"title",n)},e.attr("href"),e.attr("target"),e.attr("title"))}),n=a.data("azh-context");n||(n=[]),n.push(e),a.data("azh-context",n),a.addClass("azh-context")}}),i.find("a[href]").on("click",function(t){t.preventDefault()}),i.find('img, [style*="background-image"]').addBack().each(function(){var a=azh.$(this);if(!a.closest(azh.dynamic_content).length){if("IMG"!==a.prop("tagName")){var e=/background-image\:[^;]*url\(['"]?([^'"\)]+)['"]?\)/gi.exec(a.attr("style"));if(e&&e[1].indexOf("http")<0&&0!==e[1].indexOf("//"))return}var n=t('<div class="azh-button azh-edit-image" data-type="azh-edit-image">'+azh.i18n.edit_image+"</div>").on("click",function(a){var e=t(this).data("azh-linked-node");azh.open_image_select_dialog(a,function(t,a){"IMG"===e.prop("tagName")?(e.attr("src",t),A(e,"src",t)):(e.css("background-image","url('"+t+"')"),P(e,"background-image","url('"+t+"')"))})}),i=a.data("azh-context");i||(i=[]),i.push(n),a.data("azh-context",i),a.addClass("azh-context")}}),i.find("select").each(function(){var a=azh.$(this),e=t('<div class="azh-modal-button" data-type="azh-select" title="'+azh.i18n.select_options_edit+'">'+azh.i18n.select_options_edit+"</div>").on("click",function(a){!function(a){var e=t('<div class="azh-modal"></div>');t('<div class="azh-modal-title">'+azh.i18n.select_options_edit+"</div>").appendTo(e),t('<div class="azh-modal-label">'+azh.i18n.options+"</div>").appendTo(e);var n=t('<div class="azh-table azh-select-options"></div>').appendTo(e);t('<div class="azh-row azh-head"><div class="azh-cell">'+azh.i18n.label+'</div><div class="azh-cell">'+azh.i18n.value+'</div><div class="azh-cell">'+azh.i18n.clone+'</div><div class="azh-cell">'+azh.i18n.remove+"</div></div>").appendTo(n),a.children().each(function(){var a=azh.$(this),e=t('<div class="azh-row"></div>').appendTo(n);e.data("option",a),t('<div class="azh-cell azh-label" contenteditable="true">'+a.text()+"</div>").appendTo(e).on("blur keyup paste input",function(){t(this).closest(".azh-row").data("option").text(t(this).text())}),t('<div class="azh-cell azh-value" contenteditable="true">'+a.val()+"</div>").appendTo(e).on("blur keyup paste input",function(){var a=t(this).closest(".azh-row").data("option");a.val(t(this).text()),A(a,"value",a.val())}),t('<div class="azh-cell azh-clone"></div>').appendTo(e).on("click",function(){var a=t(this).closest(".azh-row"),e=a.clone(!0);e.insertAfter(a);var n=a.data("option").clone(!0);n.insertAfter(a.data("option")),e.data("option",n)}),t('<div class="azh-cell azh-remove"></div>').appendTo(e).on("click",function(){var a=t(this).closest(".azh-row");a.data("option").remove(),a.remove()})});var i=t('<div class="azh-modal-actions"></div>').appendTo(e);t('<div class="azh-modal-ok">'+azh.i18n.ok+"</div>").appendTo(i).on("click",function(){return t.simplemodal.close(),!1}),e.simplemodal({autoResize:!0,overlayClose:!0,opacity:0,overlayCss:{"background-color":"black"},closeClass:"azh-close",onClose:function(){t.simplemodal.close()}})}(t(this).data("azh-linked-node"))}),n=a.data("azh-context");n||(n=[]),n.push(e),a.data("azh-context",n),a.addClass("azh-context")}),i.find(".az-icon").each(function(){var a=azh.$(this),e=t('<div class="azh-button azh-edit-icon" data-type="azh-edit-icon">'+azh.i18n.edit_icon+"</div>").on("click",function(a){var e=t(this).data("azh-linked-node"),n=e.attr("class").split(" ").filter(function(t){return t.indexOf("az-")>=0&&t}).join(" "),i=e.attr("class").split(" ").filter(function(t){return t.indexOf("azh-")>=0&&t}).join(" ");azh.open_icon_select_dialog(a,e.attr("class"),function(t){U(t),e.attr("class",t),e.addClass(n),A(e,"class",e.attr("class")),e.addClass(i)})}),n=a.data("azh-context");n||(n=[]),n.push(e),a.data("azh-context",n),a.addClass("azh-context")}),i.find("[data-element]").each(function(){var a=azh.$(this);if(!a.parents('[data-element*="shortcode"]').length){a.contents().filter(function(){return 3===this.nodeType}).each(function(){t.trim(this.textContent)||azh.$(this).remove()}),!a.contents().length||""!==a.attr("data-element")&&" "!==a.attr("data-element")||a.attr("data-element","not-empty");var n=H(a);if(a.on("mouseenter",function(t){var a=azh.$(this),e=a.data("azh-controls");setTimeout(function(){F(a,e),0==azh.controls_container.find(".azh-element-controls.azh-active").length&&(e.css("display",""),a.parent().is(".az-free-positioning")||a.parent(".az-elements-list").parent(".az-free-positioning").length?e.find(".azh-move-element").show():e.find(".azh-move-element").hide())})}).on("mousemove",function(){var t=azh.$(this),a=t.data("azh-controls");F(t,a)}).on("mouseleave",function(){var t=azh.$(this).data("azh-controls");setTimeout(function(){t.is(":hover")||0!==azh.controls_container.find(".azh-resizer:hover").length||0!==azh.controls_container.find(".azh-shortcode:hover").length?t.one("mouseleave",function(){t.hide()}):t.hide()})}).on("click",function(a){var n=azh.$(this);if(0===n.contents().length){azh.child_suggestions=[],t(n.parents("[data-element]")).each(function(){var a=t('.azh-library .azh-elements .azh-element[data-path="'+azh.$(this).attr("data-element")+'"]');a.length&&a.data("child-suggestions")&&t(a.data("child-suggestions")).each(function(){azh.child_suggestions.push(t(this).data("path"))})});var i=azh.default_category;return(n.parent(".az-free-positioning").length||n.parent(".az-elements-list").parent(".az-free-positioning").length)&&(azh.default_category="content"),azh.open_elements_dialog(function(a,i,o){if(n.parents("a").length&&(t(i).find("a").length||t(i).is("a")))alert(azh.i18n.html_is_not_valid);else{var s=it(n.data("azh-controls"));if(s.data("azh-linked-element",n),(s=ot(n.data("azh-controls"),!0)).data("azh-linked-element",n),(s=ot(n.data("azh-controls"),!1)).data("azh-linked-element",n),(s=L(n.data("azh-controls"))).data("azh-linked-element",n),"shortcode"===a){var r="shortcode: "+e(),h=i;n.attr("data-element",r),A(n,"data-element",r),n.data("azh-controls").find("> .azh-name").text(t.trim(r)),n.addClass("azh-loading"),azh.shortcode_instances[r]=h,t.post(azh.ajaxurl,{action:"azh_update_shortcode",post_id:azh.post_id,instance:r,shortcode:h},function(t){n.html(t),n.find("a[href]").on("click",function(t){t.preventDefault()}),n.removeClass("azh-loading"),et(n),n.trigger("click"),Gt(n,function(){azh.frontend_init&&azh.frontend_init(n)})})}else{var l=azh.window.scrollTop();n.attr("data-element",a),A(n,"data-element",a),n.data("azh-controls").find("> .azh-name").text(t.trim(a)),q(n,n.data("azh-controls")),n.html(i),n.children().each(function(){b(this)}),x(n),w(n),nt(n.closest("[data-section]")),et(n),aa(n),azh.frontend_init&&azh.frontend_init(n),n.trigger("click"),azh.window.scrollTop(l),o&&U('<div data-element="'+a+'">'+i+"</div>",a,function(){}),n.trigger("azh-refresh")}azh.change()}}),azh.default_category=i,!1}}),0!==a.contents().length||a.is('[data-element*="shortcode"]')){var i=it(n);i.data("azh-linked-element",a),(i=ot(a.data("azh-controls"),!0)).data("azh-linked-element",a),(i=ot(a.data("azh-controls"),!1)).data("azh-linked-element",a),(i=L(a.data("azh-controls"))).data("azh-linked-element",a)}}}),i.find("[data-element]").addBack().filter("[data-element]").each(function(){var a=azh.$(this);if(a.parent(".az-free-positioning").length||a.parent(".az-elements-list").parent(".az-free-positioning").length||"absolute"===a.css("position")){if(a.contents().length>0){var e=N(a,"transform"),n=/rotate\(([-\.\d]+)rad\)/g.exec(e);n&&parseFloat(n[1])}!function(a){a.on("drag dragstart dragenter dragover dragleave drop dragend",function(t){return t.stopPropagation(),!1}),azh.document_off("mousemove.transform").document_on("mousemove.transform",function(t){if(1===t.which){var a=!1;if(azh.$(".azh-transform").each(function(){a=!0;var e=azh.$(this),n=t.pageY-e.data("pageY"),i=t.pageX-e.data("pageX"),o=e.closest(".az-element-wrapper"),s=e.data("azh-controls");F(o,s);var r=o.closest(".azh-zoom");if(r.length&&(n/=r.data("azh-scale"),i/=r.data("azh-scale")),o.parent(".az-free-positioning").length||o.parent(".az-elements-list").parent(".az-free-positioning").length||"absolute"===o.css("position")){var h,l=o.closest(".az-free-positioning");Xt(),e.is(".azh-left-resize")&&(o.is(".az-left")&&_t(o,o.data("left")+i),o.is(".az-center")&&kt(o,o.data("center")+i/2),o.is(".az-right"),ft(o,o.data("width")-i),i+=(h=St(l,o.get(0).getBoundingClientRect(),o)).x,n+=h.y,o.is(".az-left")&&_t(o,o.data("left")+i),o.is(".az-center")&&kt(o,o.data("center")+i/2),o.is(".az-right"),ft(o,o.data("width")-i)),e.is(".azh-right-resize")&&(o.is(".az-left"),o.is(".az-center")&&kt(o,o.data("center")+i/2),o.is(".az-right")&&yt(o,o.data("right")-i),ft(o,o.data("width")+i),i+=(h=St(l,o.get(0).getBoundingClientRect(),o)).x,n+=h.y,o.is(".az-left"),o.is(".az-center")&&kt(o,o.data("center")+i/2),o.is(".az-right")&&yt(o,o.data("right")-i),ft(o,o.data("width")+i)),e.is(".azh-top-resize")&&(o.is(".az-top")&&gt(o,o.data("top")+n),o.is(".az-middle")&&mt(o,o.data("middle")+n/2),o.is(".az-bottom"),vt(o,o.data("height")-n),i+=(h=St(l,o.get(0).getBoundingClientRect(),o)).x,n+=h.y,o.is(".az-top")&&gt(o,o.data("top")+n),o.is(".az-middle")&&mt(o,o.data("middle")+n/2),o.is(".az-bottom"),vt(o,o.data("height")-n)),e.is(".azh-bottom-resize")&&(o.is(".az-top"),o.is(".az-middle")&&mt(o,o.data("middle")+n/2),o.is(".az-bottom")&&bt(o,o.data("bottom")-n),vt(o,o.data("height")+n),i+=(h=St(l,o.get(0).getBoundingClientRect(),o)).x,n+=h.y,o.is(".az-top"),o.is(".az-middle")&&mt(o,o.data("middle")+n/2),o.is(".az-bottom")&&bt(o,o.data("bottom")-n),vt(o,o.data("height")+n)),e.is(".azh-left-resize")||e.is(".azh-right-resize")||e.is(".azh-top-resize")||e.is(".azh-bottom-resize")||(Ft(o,i,n),Ft(o,i+(h=St(l,o.get(0).getBoundingClientRect(),o)).x,n+h.y))}else"static"===o.css("position")&&(o.css("position","relative"),P(o,"position","relative"),o.css("z-index","1"),P(o,"z-index","1"),ft(o,o.width())),gt(o,o.data("top")+n),_t(o,o.data("left")+i);Ht(e)}),a)return!1}}),azh.document_off("mouseup.transform").document_on("mouseup.transform",function(t){var a=!1;if(azh.$(".azh-transform").each(function(){a=!0;var e=azh.$(this);e.closest(".az-element-wrapper"),e.removeClass("azh-transform azh-left-resize azh-right-resize azh-top-resize  azh-bottom-resize"),e.data("pageX")==t.pageX&&e.data("pageY")==t.pageY&&e.data("azh-transformer")&&(e.children().length&&(e.data("azh-transformer").addClass("azh-editing"),e.addClass("azh-editing")),setTimeout(function(){e.trigger("click");var t=e.data("azh-controls");t&&t.find(".azh-utility-wrapper").trigger("click"),azh.document.trigger("click.azh-polygon")}))}),a)return!1}),a.on("click",function(t){azh.$(this)}).on("mouseenter",function(a){var e=azh.$(this);if(!e.parents(".az-group").length&&!e.data("azh-transformer")&&!e.closest(".az-free-positioning.azh-lasso").length){var n=e.find(".az-polygone");if(n&&n.data("azh-polygone-handlers"))return;e.removeClass("azh-editing");var i=t('<div class="azh-transformer"></div>').appendTo(azh.controls_container).on("mousemove",function(a){var e=t(this);if(!e.is(".azh-editing")){var n=e.data("azh-linked-element");if(!n.is(".azh-transform")){e.css("pointer-events","none");var i=azh.$(azh.document.get(0).elementFromPoint(a.clientX-azh.device_left,a.clientY));n.has(i).length||n.is(i)?e.css("pointer-events",""):(n.data("azh-transformer",!1),e.remove(),n.triggerHandler(azh.$.Event("mouseleave",{which:0})))}}}).on("contextmenu",function(a){a.preventDefault();var e=t(this).data("azh-linked-element");Yt(a,azh.$(azh.document.get(0).elementFromPoint(a.clientX-azh.device_left,a.clientY))),setTimeout(function(){var t=e.data("azh-controls");t&&t.find(".azh-utility-wrapper").trigger("click")})}).on("mouseleave",function(a){var e=t(this);if(!e.is(".azh-editing")){var n=e.data("azh-linked-element");n.data("azh-transformer",!1),e.remove(),n.removeClass("azh-editing"),n.triggerHandler(azh.$.Event("mouseleave",{which:0}))}}).on("mousedown",function(a){var e=t(this).data("azh-linked-element");!e.is(".az-group")&&e.parents(".az-group").length||(e.addClass("azh-transform"),e.data("pageX",a.pageX),e.data("pageY",a.pageY),Ot(e))});t('<div class="azh-left-resizer"></div>').appendTo(i).on("mousedown",function(a){var e=t(this).parent().data("azh-linked-element");e.addClass("azh-transform azh-left-resize"),e.data("pageX",a.pageX),e.data("pageY",a.pageY),Ot(e)}),t('<div class="azh-right-resizer"></div>').appendTo(i).on("mousedown",function(a){var e=t(this).parent().data("azh-linked-element");e.addClass("azh-transform azh-right-resize"),e.data("pageX",a.pageX),e.data("pageY",a.pageY),Ot(e)}),t('<div class="azh-top-resizer"></div>').appendTo(i).on("mousedown",function(a){var e=t(this).parent().data("azh-linked-element");e.addClass("azh-transform azh-top-resize"),e.data("pageX",a.pageX),e.data("pageY",a.pageY),Ot(e)}),t('<div class="azh-bottom-resizer"></div>').appendTo(i).on("mousedown",function(a){var e=t(this).parent().data("azh-linked-element");e.addClass("azh-transform azh-bottom-resize"),e.data("pageX",a.pageX),e.data("pageY",a.pageY),Ot(e)}),i.data("azh-linked-element",e),e.data("azh-transformer",i)}Ht(e)}).on("mouseleave",function(t){var a=azh.$(this);a.data("azh-transformer")&&!a.data("azh-transformer").is(":hover")&&(a.data("azh-transformer").remove(),a.data("azh-transformer",!1),a.removeClass("azh-editing"))})}(a);var i=a.data("azh-context");i||(i=[]),a.is(".az-left, .az-center, .az-right")||(I(a,"az-left"),a.addClass("az-left")),a.is(".az-top, .az-middle, .az-bottom")||(I(a,"az-top"),a.addClass("az-top"));var o=t('<div class="azh-control" data-type="azh-alignment"></div>').on("azh-init",function(){var a=t(this);a.find(".azh-active").removeClass("azh-active");var e=a.data("azh-linked-node");e.is(".az-top")&&a.find(".azh-top-alignment").addClass("azh-active"),e.is(".az-middle")&&a.find(".azh-middle-alignment").addClass("azh-active"),e.is(".az-bottom")&&a.find(".azh-bottom-alignment").addClass("azh-active"),e.is(".az-left")&&a.find(".azh-left-alignment").addClass("azh-active"),e.is(".az-center")&&a.find(".azh-center-alignment").addClass("azh-active"),e.is(".az-right")&&a.find(".azh-right-alignment").addClass("azh-active")}),s=t('<div class="azh-v-alignment"></div>').appendTo(o),r=t('<div class="azh-h-alignment"></div>').appendTo(o);t('<div class="azh-top-alignment"></div>').appendTo(s).on("click",function(a){var e=t(this).closest(".azh-control").data("azh-linked-node");st(e),wt(e),t(this).closest(".azh-control").trigger("azh-init")}),t('<div class="azh-middle-alignment"></div>').appendTo(s).on("click",function(a){var e=t(this).closest(".azh-control").data("azh-linked-node");st(e),xt(e),t(this).closest(".azh-control").trigger("azh-init")}),t('<div class="azh-bottom-alignment"></div>').appendTo(s).on("click",function(a){var e=t(this).closest(".azh-control").data("azh-linked-node");st(e),$t(e),t(this).closest(".azh-control").trigger("azh-init")}),t('<div class="azh-left-alignment"></div>').appendTo(r).on("click",function(a){var e=t(this).closest(".azh-control").data("azh-linked-node");st(e),Tt(e),t(this).closest(".azh-control").trigger("azh-init")}),t('<div class="azh-center-alignment"></div>').appendTo(r).on("click",function(a){var e=t(this).closest(".azh-control").data("azh-linked-node");st(e),Ct(e),t(this).closest(".azh-control").trigger("azh-init")}),t('<div class="azh-right-alignment"></div>').appendTo(r).on("click",function(a){var e=t(this).closest(".azh-control").data("azh-linked-node");st(e),At(e),t(this).closest(".azh-control").trigger("azh-init")}),i.push(o),a.data("azh-context",i),a.addClass("azh-context")}}),i.find('[data-shortcode], [data-element*="shortcode"]').addBack().filter('[data-shortcode], [data-element*="shortcode"]').each(function(){var a=azh.$(this);a.find(".azh-context").removeClass("azh-context"),a.find("[draggable]").attr("draggable","false"),a.find("[contenteditable]").attr("contenteditable","false"),a.attr("contenteditable","false");var e=a.data("azh-controls");e&&t('<div class="azh-edit-shortcode" title="'+azh.i18n.click_to_edit_shortcode+'"></div>').prependTo(e).on("click",function(){var a=t(this).data("azh-linked-node");return e=a.data("azh-controls"),Gt(a,function(){azh.frontend_init&&azh.frontend_init(a)}),!1}).data("azh-linked-node",a);a.on("mouseenter.azh-shortcode",function(a){var e=azh.$(this),n=t('<div class="azh-shortcode"></div>').appendTo(azh.controls_container).on("mouseleave",function(a){t(this).remove(),e.trigger("mouseleave")}).css({top:e.offset().top,left:e.offset().left,width:e.outerWidth(),height:e.outerHeight()});e.is("[data-shortcode]")&&n.on("click",function(){return Gt(e,function(){azh.frontend_init&&azh.frontend_init(e)}),!1}).css("pointer-events","all")}).on("mouseleave.azh-shortcode",function(t){azh.controls_container.find(".azh-shortcode:not(:hover)").remove()})});t(["data-azh-form"]).each(function(){var e=this;i.find("["+e+"]").addBack().filter("["+e+"]").each(function(){var n=azh.$(this),i=n.closest("[data-element], [data-section]"),o=i.data("azh-controls");if(o){var s=t('<div class="azh-edit-shortcode" title="'+azh.i18n.click_to_edit_shortcode+'"></div>').prependTo(o).on("click",function(){var e=t(this),n=e.data("azh-attribute"),i=e.data("azh-index"),o=e.data("azh-linked-element"),s=azh.$(o.find("["+n+"]").get(i)),r=G(s.attr(n).replace(/\\"/g,'"').replace(/\\'/g,"'"));if(r){var h=r[2],l=a.attrs(r[3]).named,c=r[5];if(l.content=c,azh.shortcodes[h]){var d=azh.shortcodes[h],z=azh.open_element_settings_dialog(d,l,function(t,a){t=K(d,t,a).replace(/"/g,'\\"').replace(/'/g,"\\'");s.attr(n,t),A(s,n,t)});if("data-azh-form"===n){var p={};o.find("[name]").each(function(){p[azh.$(this).attr("name")]=!0}),z.find("em").each(function(){var a=t(this);if(a.text().indexOf("{form-fields}")>=0){a.text(a.text().replace("{form-fields}",""));var e=a.closest("[data-param-name]").find("textarea, input");for(var n in p)!function(n){t('<a href="#">{'+n+"}</a>").appendTo(a).on("click",function(){Q(e.get(0),"{"+n+"}")}).after("<span>&nbsp;</span>")}(n)}})}}}return!1});s.data("azh-linked-element",i),s.data("azh-attribute",e);var r=i.find("["+e+"]").filter(n).index();s.data("azh-index",r)}})}),azh.table_editor&&i.find("table").each(function(){azh.$(this).find("thead th, tbody td").each(function(){!function a(e){var n=e.data("azh-context");if(n||(n=[]),e.is("td")){var i=t('<div class="azh-button" data-type="azh-delete-row">'+azh.i18n.delete_row+"</div>").on("click",function(a){t(this).data("azh-linked-node").closest("tr").remove()});n.push(i)}if(e.is("th")){var o=t('<div class="azh-button" data-type="azh-delete-column">'+azh.i18n.delete_column+"</div>").on("click",function(a){var e=t(this).data("azh-linked-node"),n=e.get(0).cellIndex;e.closest("table").find("tr").each(function(){this.removeChild(this.cells[n])})});n.push(o)}if(e.is("td")){var s=t('<div class="azh-button" data-type="azh-insert-row-before">'+azh.i18n.insert_row_before+"</div>").on("click",function(e){for(var n=t(this).data("azh-linked-node"),i=azh.$("<tr></tr>"),o=0;o<n.closest("tr").children().length;o++)i.append('<td data-cloneable=""><div data-element=""></div></td>');b(i.get(0)),et(i),i.children().each(function(){a(azh.$(this))}),n.closest("tr").before(i)});n.push(s);var r=t('<div class="azh-button" data-type="azh-insert-row-after">'+azh.i18n.insert_row_after+"</div>").on("click",function(e){for(var n=t(this).data("azh-linked-node"),i=azh.$("<tr></tr>"),o=0;o<n.closest("tr").children().length;o++)i.append('<td data-cloneable=""><div data-element=""></div></td>');b(i.get(0)),et(i),i.children().each(function(){a(azh.$(this))}),n.closest("tr").after(i)});n.push(r)}if(e.is("th")){var h=t('<div class="azh-button" data-type="azh-insert-column-before">'+azh.i18n.insert_column_before+"</div>").on("click",function(e){var n=t(this).data("azh-linked-node"),i=n.get(0).cellIndex;n.closest("table").find("tr").each(function(){if(azh.$(this).parent("thead").length){var t=azh.$('<th data-cloneable=""><div data-element=""></div></th>');b(t.get(0)),et(t),a(t),azh.$(this).find("th").eq(i).before(t)}else{var e=azh.$('<td data-cloneable=""><div data-element=""></div></td>');b(e.get(0)),et(e),a(e),azh.$(this).find("td").eq(i).before(e)}})});n.push(h);var l=t('<div class="azh-button" data-type="azh-insert-column-after">'+azh.i18n.insert_column_after+"</div>").on("click",function(e){var n=t(this).data("azh-linked-node"),i=n.get(0).cellIndex;n.closest("table").find("tr").each(function(){if(azh.$(this).parent("thead").length){var t=azh.$('<th data-cloneable=""><div data-element=""></div></th>');b(t.get(0)),et(t),a(t),azh.$(this).find("th").eq(i).after(t)}else{var e=azh.$('<td data-cloneable=""><div data-element=""></div></td>');b(e.get(0)),et(e),a(e),azh.$(this).find("td").eq(i).after(e)}})});n.push(l)}e.data("azh-context",n),e.addClass("azh-context")}(azh.$(this))})}),i.find("[data-cloneable], [data-cloneable-inline]").addBack().filter("[data-cloneable], [data-cloneable-inline]").each(function(){var a=azh.$(this),n=t('<div class="azh-cloneable-controls"></div>').appendTo(azh.controls_container);n.hide(),a.data("azh-cloneable-controls",n),n.data("azh-linked-node",a),a.addClass("azh-cloneable-controls"),a.data("azh-cloneable",{}),a.is("[data-cloneable]")&&a.data("cloneable")&&a.data("azh-cloneable",JSON.parse(a.data("cloneable").replace(/'/g,'"'))),a.is("[data-cloneable-inline]")&&a.data("cloneable-inline")&&a.data("azh-cloneable",JSON.parse(a.data("cloneable-inline").replace(/'/g,'"'))),a.on("mouseenter",function(t){var a=azh.$(this),e=a.get(0).getBoundingClientRect(),n=a.data("azh-cloneable-controls");n.css("left",e.left+e.width/2-10+"px"),n.css("top",e.top+azh.window.scrollTop()+e.height-10+"px"),n.show()}).on("mousemove",function(){var t=azh.$(this),a=t.get(0).getBoundingClientRect(),e=t.data("azh-cloneable-controls");e.css("left",a.left+a.width/2-10+"px"),e.css("top",t.top+azh.window.scrollTop()+a.height-10+"px")}).on("mouseleave",function(){var t=azh.$(this).data("azh-cloneable-controls");setTimeout(function(){t.is(":hover")?t.one("mouseleave",function(){t.hide()}):t.hide()})}),a.parents(".az-pack").length&&!a.children().first().is(".az-pack")||a.parent(".az-free-positioning").length||a.children().attr("draggable","true"),azh.body_off("mouseup.cloneable").body_on("mouseup.cloneable",function(t){azh.content_wrapper.find("[data-cloneable], [data-cloneable-inline]").each(function(){azh.$(this).data("azh-drag",!1),azh.$(this).find(".azh-over").removeClass("azh-over")})});var i=!0;a.children().each(function(){var n=azh.$(this);n.parents(".az-pack").length&&!n.is(".az-pack")||a.parent(".az-free-positioning").length||(n.on("dragstart",function(t){var a=azh.$(this);if("true"===a.attr("draggable")){var e=a.parent();e.data("azh-drag",this),e.addClass("azh-drag"),t.stopPropagation()}}),n.on("dragenter",function(t){var a=azh.$(this);if(a.parent().data("azh-drag"))a.addClass("azh-over");else if(a.is("[data-element]")&&a.parent().is("[data-cloneable], [data-cloneable-inline]")){var e=azh.$("[data-cloneable].azh-drag, [data-cloneable-inline].azh-drag");e.length&&azh.$(e.data("azh-drag")).is("[data-element]")&&!a.parent().has(e.data("azh-drag")).length&&a.addClass("azh-over")}t.stopPropagation()}),n.on("dragover",function(t){t.preventDefault&&t.preventDefault();var a=azh.$(this);if(azh.$(this).parent().data("azh-drag"))azh.$(this).addClass("azh-over");else if(a.is("[data-element]")&&a.parent().is("[data-cloneable], [data-cloneable-inline]")){var e=azh.$("[data-cloneable].azh-drag, [data-cloneable-inline].azh-drag");e.length&&azh.$(e.data("azh-drag")).is("[data-element]")&&!a.parent().has(e.data("azh-drag")).length&&a.addClass("azh-over")}t.stopPropagation()}),n.on("dragleave",function(t){azh.$(this).removeClass("azh-over")}),n.on("drop",function(t){t.stopPropagation&&t.stopPropagation();var a=azh.$(this),e=a.parent(),n=e.data("azh-drag"),i=azh.$(n);if(n){if(e.has(this).length&&n!=this){var o=e.children().index(n),s=e.children().index(this);o>=0&&s>=0&&(i.detach(),o>s?i.insertBefore(this):i.insertAfter(this),oa(e)?$(i.closest("[data-section]")):e.trigger("azh-refresh"),_.defer(qt,e))}}else if(a.is("[data-element]")&&a.parent().is("[data-cloneable], [data-cloneable-inline]")){var r=azh.$("[data-cloneable].azh-drag, [data-cloneable-inline].azh-drag");if(r.length&&azh.$(r.data("azh-drag")).is("[data-element]")&&!a.parent().has(r.data("azh-drag")).length)if((i=azh.$(r.data("azh-drag"))).contents().length){if(1===r.children().length){var h=i.clone(!0);h.insertAfter(i),y(h),H(h)}i.detach(),a.children().length?i.insertAfter(this):a.replaceWith(i),oa(r)?$(i.closest("[data-section]")):(e.trigger("azh-refresh"),r.trigger("azh-refresh")),_.defer(qt,e)}}return azh.change(),!1}),n.on("dragend",function(t){azh.$("[data-cloneable], [data-cloneable-inline]").children().each(function(){azh.$(this).removeClass("azh-over")}),azh.$("[data-cloneable].azh-drag, [data-cloneable-inline].azh-drag").each(function(){azh.$(this).removeClass("azh-drag"),azh.$(this).data("azh-drag",!1)})}));var o=n.data("azh-context");o||(o=[]);var s=t('<div class="azh-cloneable-child-controls"></div>');n.data("azh-cloneable-child-controls",s),n.addClass("azh-cloneable-child-controls");var r=t('<div class="azh-button azh-clone" data-type="azh-clone">'+azh.i18n.clone+"</div>").appendTo(s).on("click",function(a){var n=t(this).data("azh-linked-node"),i=n.parents("[data-cloneable], [data-cloneable-inline]").first(),o=n.closest("[data-section]"),s=n.clone(!0);s.find("[data-shortcode]").removeAttr("data-shortcode"),s.insertAfter(n),s.find("*").each(function(){azh.$(this).triggerHandler("azh-clone")}),s.triggerHandler("azh-clone"),X(s),x(s);var r=!1,h=n.find(".azh-id-attr, .azh-hash-attr").addBack().filter(".azh-id-attr, .azh-hash-attr"),l=e(),c=s.find(".azh-id-attr, .azh-hash-attr").addBack().filter(".azh-id-attr, .azh-hash-attr");if(c.length&&(c.each(function(){var t=azh.$(this);t.data("azh-id-attr")&&(r=t.attr(t.data("azh-id-attr")),t.attr(t.data("azh-id-attr"),l),A(t,t.data("azh-id-attr"),l)),t.data("azh-hash-attr")&&(r=t.attr(t.data("azh-hash-attr")).replace("#",""),t.attr(t.data("azh-hash-attr"),"#"+l),A(t,t.data("azh-hash-attr"),"#"+l))}),1==c.length)){var d=!1,z=n.closest("[data-section]").data("azh-linked-ids");r&&r in z&&z[r]&&(t(z[r]).each(function(){var t=azh.$(this);if(!t.is(h)){var a=t.parentsUntil("[data-cloneable], [data-cloneable-inline]").last();0===a.length&&(a=t),(d=a.clone(!0)).find("[data-shortcode]").removeAttr("data-shortcode"),d.insertAfter(a),d.find("*").each(function(){azh.$(this).triggerHandler("azh-clone")}),d.triggerHandler("azh-clone"),X(d),x(d);var e=d.find(".azh-id-attr, .azh-hash-attr").addBack().filter(".azh-id-attr, .azh-hash-attr");return e.data("azh-id-attr")&&(e.attr(e.data("azh-id-attr"),l),A(e,e.data("azh-id-attr"),l)),e.data("azh-hash-attr")&&(e.attr(e.data("azh-hash-attr"),"#"+l),A(e,e.data("azh-hash-attr"),"#"+l)),aa(d),d.find("[data-element]").each(function(){aa(azh.$(this))}),!1}}),d&&(z[l]=[s.find(".azh-id-attr, .azh-hash-attr").addBack().filter(".azh-id-attr, .azh-hash-attr"),d.find(".azh-id-attr, .azh-hash-attr").addBack().filter(".azh-id-attr, .azh-hash-attr")],z[r]=!1))}oa(i)?$(o):(aa(s),s.find("[data-element]").each(function(){aa(azh.$(this))}),aa(s.closest("[data-section], [data-element]")),nt(s.closest("[data-section]")),_.defer(qt,i),s.trigger("azh-refresh")),azh.change()});if(r.data("azh-linked-node",n),n.parents(".az-pack").length&&!n.is(".az-pack")||o.push(r),(r=t('<div class="azh-button azh-remove" data-type="azh-remove">'+azh.i18n.remove+"</div>").appendTo(s).on("click",function(a){var e=t(this).data("azh-linked-node"),n=e.parents("[data-cloneable], [data-cloneable-inline]").first(),i=la(e);if(i&&(E(i),i.remove()),n.is(".az-elements-list")&&e.is("[data-element]")){var o=e.data("azh-controls");if(o.find(".azh-remove-element").length)o.find(".azh-remove-element").click();else{var s=e.closest(".az-element-wrapper");n.find(".az-element-wrapper").length>1&&0===e.contents().length&&(E(s),s.remove())}}else{var r=e.closest("[data-section]");E(e),e.remove(),oa(n)?$(r):(aa(n.closest("[data-section], [data-element]")),nt(n.closest("[data-section]")),_.defer(qt,e),n.trigger("azh-refresh"))}azh.change()})).data("azh-linked-node",n),n.parents(".az-pack").length&&!n.is(".az-pack")||o.push(r),n.data("azh-context",o),n.addClass("azh-context"),!n.is("[data-element]")){var h=n.find("[data-element]");1!==h.length&&(i=!1);var l=h.closest("[data-cloneable], [data-cloneable-inline]");a.is(l)||(i=!1)}}),a.data("azh-cloneable")&&!1===a.data("azh-cloneable")["elements-list"]&&(i=!1),(i||a.is(".az-elements-list"))&&(a.addClass("az-elements-list"),I(a,"az-elements-list"),a.children().each(function(){azh.$(this).addClass("az-element-wrapper")}))}),i.find('[class*="-col-xs-"],[class*="-col-sm-"],[class*="-col-md-"],[class*="-col-lg-"]').each(function(){azh.$(this).parent().addClass("azh-grid")}),i.find(".azh-grid").each(function(){!function(a){function e(a,e){var n;return e.lastIndex=0,!(null==(n=e.exec(a.attr("class")))||2!=n.length||!t.isNumeric(n[1]))&&parseInt(n[1],10)}function n(a,e,n){var i=null;if(e.lastIndex=0,null!=(i=e.exec(a.attr("class")))&&2==i.length&&t.isNumeric(i[1])){var o=i[1],s=i[0].replace(o,n),r=a.attr("class").replace(i[0],s);a.attr("class",r),r=C(a,"class").replace(i[0],s),A(a,"class",r)}}function i(a){if(azh.device_prefix){(i=azh.column_width_patterns[azh.device_prefix]).lastIndex=0;for(var e=null;null!=(e=i.exec(a.attr("class")))&&2==e.length&&t.isNumeric(e[1]);)return e}else for(var n in azh.column_width_patterns){var i;for((i=azh.column_width_patterns[n]).lastIndex=0,e=null;null!=(e=i.exec(a.attr("class")))&&2==e.length&&t.isNumeric(e[1]);)return e}return!1}var o=!1;a.children().each(function(){var a=azh.$(this),i=a.data("azh-controls");if(!i&&a.is("[data-cloneable]")&&(i=t('<div class="azh-column-controls" title="'+azh.i18n.column_settings+'"></div>').appendTo(azh.controls_container).hide().on("mouseenter",function(a){t(this).data("azh-linked-node").addClass("azh-over")}).on("mouseleave",function(a){t(this).data("azh-linked-node").removeClass("azh-over")}),t('<div class="azh-responsive" title="'+azh.i18n.column_responsive+'"></div>').appendTo(i).on("click",function(){var a=t(this).data("azh-column"),i=t('<div class="azh-modal"></div>');t('<div class="azh-modal-title">'+azh.i18n.column_responsive+"</div>").appendTo(i);var o=t("<table><thead><tr><th>"+azh.i18n.device+"</th><th>"+azh.i18n.column_width+"</th><th>"+azh.i18n.column_offset+"</th></tr></thead><tbody></tbody></table>").appendTo(i);for(var s in azh.device_prefixes)!function(i){var s=t("<tr></tr>").appendTo(o.find("tbody"));t("<td>"+azh.device_prefixes[i].label+"</td>").appendTo(s);var r=t("<td></td>").appendTo(s);t('<input type="number" step="1" min="1" max="12" value="'+e(a,azh.column_width_patterns[i])+'">').appendTo(r).on("change",function(){n(a,azh.column_width_patterns[i],t(this).val())}),r=t("<td></td>").appendTo(s),t('<input type="number" step="1" min="1" max="12" value="'+e(a,azh.column_offset_patterns[i])+'">').appendTo(r).on("change",function(){n(a,azh.column_offset_patterns[i],t(this).val())})}(s);var r=t('<div class="azh-modal-actions"></div>').appendTo(i);return t('<div class="azh-modal-ok">'+azh.i18n.ok+"</div>").appendTo(r).on("click",function(){return t.simplemodal.close(),!1}),i.simplemodal({autoResize:!0,overlayClose:!0,opacity:0,overlayCss:{"background-color":"black"},closeClass:"azh-close",onClose:function(){t.simplemodal.close()}}),!1}).data("azh-column",a),t('<div class="azh-add-column" title="'+azh.i18n.insert_column_after+'"></div>').appendTo(i).on("click",function(){var a=t(this).data("azh-column"),i=a.clone(!0),o=!0,s=azh.section_controlled_device_prefixes;return a.closest("[data-element]").length&&(s=azh.element_controlled_device_prefixes),t(s).each(function(){var t=e(a,azh.column_width_patterns[this]),s=Math.round(t/2),r=t-s;s&&r?(n(a,azh.column_width_patterns[this],s),n(i,azh.column_width_patterns[this],r)):o=!1}),o&&(i.find("> [data-element]").each(function(){E(azh.$(this)),y(azh.$(this))}),i.find("> [data-element]:not(:first-child)").remove(),i.insertAfter(a),$(i.closest("[data-section]"))),!1}).data("azh-column",a),t('<div class="azh-remove-column" title="'+azh.i18n.delete_column+'"></div>').appendTo(i).on("click",function(){var a=t(this),i=a.data("azh-column"),o=a.data("azh-prev-column");if(o||(o=a.data("azh-next-column")),o){var s=azh.section_controlled_device_prefixes;i.closest("[data-element]").length&&(s=azh.element_controlled_device_prefixes),t(s).each(function(){var t=e(o,azh.column_width_patterns[this]),a=e(i,azh.column_width_patterns[this]);n(o,azh.column_width_patterns[this],t+a)}),a.data("azh-prev-column")?(i.data("azh-resizer").remove(),a.data("azh-next-column")?(a.data("azh-next-column").data("azh-resizer").data("azh-column",a.data("azh-prev-column")),a.data("azh-next-column").data("azh-controls").find(".azh-remove-column").data("azh-prev-column",a.data("azh-prev-column")),a.data("azh-prev-column").data("azh-controls").find(".azh-remove-column").data("azh-next-column",a.data("azh-next-column"))):a.data("azh-prev-column").data("azh-controls").find(".azh-remove-column").data("azh-next-column",!1)):a.data("azh-next-column")&&(a.data("azh-next-column").data("azh-resizer")&&(a.data("azh-next-column").data("azh-resizer").remove(),a.data("azh-next-column").data("azh-resizer",!1)),a.data("azh-next-column").data("azh-controls").find(".azh-remove-column").data("azh-prev-column",!1)),i.data("azh-controls").remove(),E(i),i.remove(),_.defer(qt,o)}return!1}).data("azh-column",a).data("azh-prev-column",o),a.data("azh-controls",i),i.data("azh-linked-node",a),a.addClass("azh-controls"),a.on("mouseenter",function(t){var a=azh.$(this),e=a.data("azh-controls"),n=a.get(0).getBoundingClientRect();setTimeout(function(){e.css("left",n.left+n.width/2-e.outerWidth()/2+"px"),e.css("top",n.top+azh.window.scrollTop()-10+"px"),e.css("display","")})}).on("mousemove",function(){var t=azh.$(this),a=t.data("azh-controls"),e=t.get(0).getBoundingClientRect();a.css("left",e.left+e.width/2-a.outerWidth()/2+"px"),a.css("top",e.top+azh.window.scrollTop()-10+"px")}).on("mouseleave",function(){var t=azh.$(this).data("azh-controls");setTimeout(function(){t.is(":hover")?t.one("mouseleave",function(){t.hide()}):t.hide()})})),o){o.data("azh-controls")&&o.data("azh-controls").find(".azh-remove-column").data("azh-next-column",a);var s=t('<div class="azh-width-resizer"></div>').appendTo(azh.controls_container).hide();a.data("azh-resizer",s),s.data("azh-column",o),s.data("azh-next-column",a),s.css("left",a.offset().left-20+"px"),s.css("top",a.offset().top+"px"),s.css("height",a.height()+"px"),s.on("mousedown",function(a){var e=t(this);return e.addClass("azh-drag"),azh.controls_container.addClass("azh-drag"),e.data("pageX",a.pageX),e.data("azh-column").closest(".azh-grid").addClass("azh-drag"),a.preventDefault(),a.stopPropagation(),!1}).on("mouseleave",function(){t(this).hide()})}o=a}),a.on("mouseenter",function(){a.children().each(function(){var t=azh.$(this),a=t.data("azh-resizer");if(a){var e=i(t);e&&parseInt(e[1],10)<12&&a.show()}})}).on("mousemove",function(t){a.children().each(function(){var t=azh.$(this),a=t.data("azh-resizer");a&&(a.css("left",t.offset().left-20+"px"),a.css("top",t.offset().top+"px"),a.css("height",t.height()+"px"))})}).on("mouseleave",function(){a.children().each(function(){var t=azh.$(this).data("azh-resizer");t&&!t.is(":hover")&&t.hide()})}),a.on("click",function(t){if(azh.$(this).is(".azh-drag"))return t.preventDefault(),t.stopPropagation(),!1}),azh.body_off("mouseup.grid").body_on("mouseup.grid",function(t){azh.$(".azh-grid.azh-drag").removeClass("azh-drag"),azh.controls_container.find(".azh-width-resizer.azh-drag").removeClass("azh-drag"),azh.controls_container.removeClass("azh-drag")}),azh.body_off("mousemove.grid").body_on("mousemove.grid",function(t){0===t.buttons&&azh.$(".azh-grid.azh-drag").removeClass("azh-drag");var a=z.find(".azh-width-resizer.azh-drag");if(azh.$(".azh-grid.azh-drag").length&&a.length){var e=a.data("azh-column"),n=i(e),o=a.data("azh-next-column"),s=i(o);if(t.pageX+(azh.device_left?azh.device_left:0)<a.offset().left&&t.pageX<a.data("pageX")){if(n[1]>1){e.removeClass(n[0]),j(e,n[0]);var r=n[0].replace(parseInt(n[0].replace(/[^\d]/g,""),10),parseInt(n[0].replace(/[^\d]/g,""),10)-1);e.addClass(r),I(e,r),o.removeClass(s[0]),j(o,s[0]);var h=s[0].replace(parseInt(s[0].replace(/[^\d]/g,""),10),parseInt(s[0].replace(/[^\d]/g,""),10)+1);o.addClass(h),I(o,h),a.css("left",o.offset().left-parseInt(o.css("padding-left"),10)-5+"px")}}else t.pageX+(azh.device_left?azh.device_left:0)>a.offset().left+a.width()&&t.pageX>a.data("pageX")&&s[1]>1&&(e.removeClass(n[0]),j(e,n[0]),h=n[0].replace(parseInt(n[0].replace(/[^\d]/g,""),10),parseInt(n[0].replace(/[^\d]/g,""),10)+1),e.addClass(h),I(e,h),o.removeClass(s[0]),j(o,s[0]),r=s[0].replace(parseInt(s[0].replace(/[^\d]/g,""),10),parseInt(s[0].replace(/[^\d]/g,""),10)-1),o.addClass(r),I(o,r),a.css("left",o.offset().left-parseInt(o.css("padding-left"),10)-5+"px"))}a.data("pageX",t.pageX)})}(azh.$(this))}),i.find("[data-isotope-items], .az-isotope-items").each(function(){azh.$(this).children().each(function(){function a(t){var a=t.parents(),e=!1,n=!1;return a.first().find("[data-isotope-filters], .az-isotope-filters").each(function(){var t=a.has(azh.$(this)).first(),i=a.index(t);n?e>i&&(e=i,n=azh.$(this)):(e=i,n=azh.$(this))}),n}var e=azh.$(this);if(a(e.closest("[data-isotope-items], .az-isotope-items"))){var n=t('<div class="azh-item-controls"></div>').appendTo(azh.controls_container);n.hide(),e.data("azh-item-controls",n),n.data("azh-linked-node",e),e.addClass("azh-item-controls"),e.on("mouseenter",function(t){var a=azh.$(this).data("azh-item-controls");a.css("left",azh.$(this).offset().left+"px"),a.css("top",azh.$(this).offset().top+"px"),a.show()}).on("mousemove",function(){var t=azh.$(this),a=t.data("azh-item-controls");a.css("left",t.offset().left+"px"),a.css("top",t.offset().top+"px")}).on("mouseleave",function(){var t=azh.$(this).data("azh-item-controls");setTimeout(function(){t.is(":hover")?t.on("mouseleave",function(){t.hide()}):t.hide()})}),t('<div class="azh-edit-tags" title="'+azh.i18n.edit_tags+'"></div>').appendTo(n).on("click",function(){var e=t(this).closest(".azh-item-controls");e.hide();var n=e.data("azh-linked-node"),i=a(n.closest("[data-isotope-items], .az-isotope-items")),o={};i.find("*").contents().filter(function(){return 3===this.nodeType&&t.trim(this.textContent)}).each(function(){o[t.trim(this.textContent)]=t.trim(azh.$(this).closest("[data-filter]").attr("data-filter"))});var s=[];for(var r in o){var h=o[r];"*"!=h&&n.is(h)&&s.push(r)}return V({title:azh.i18n.edit_item_tags,desc:azh.i18n.change_the_tags_of_this_item,label:azh.i18n.tags},s.join(", "),function(a){a=a.split(",");var e=[],r=[];t(a).each(function(){var a=t.trim(this);if(a){var n=!1;for(var i in o)if(i===a){e.push(a),n=!0;break}n||r.push(a)}}),t(s).each(function(){n.removeClass(o[this].replace(".","")),j(n,o[this].replace(".",""))}),t(e).each(function(){n.addClass(o[this].replace(".","")),I(n,o[this].replace(".",""))}),t(r).each(function(){var a=this.replace(/\s/,"-").toLowerCase();n.addClass(a),I(n,a);var e=i.find('[data-filter="*"]').clone(!0);e.appendTo(i),e.removeClass("az-active"),j(e,"az-active"),e.attr("data-filter","."+a),A(e,"data-filter","."+a),e.find("*").addBack().contents().filter(function(){return 3===this.nodeType&&t.trim(this.textContent)}).get(0).textContent=this})}),!1})}})}),i.find('.az-resize[style*="height"], .az-resize[style*="padding-top"], .az-resize[style*="padding-bottom"]').each(function(){azh.$(this).on("mouseenter",function(a){var e=azh.$(this);if(Qt(e,"padding-top")&&!e.data("azh-padding-top-resizer")){var n=t('<div class="azh-resizer azh-row-resize">'+N(e,"padding-top")+"</div>").appendTo(azh.controls_container).on("mousedown",function(a){if(1==a.which){var n=t(this);n.data("azh-linked-node").trigger("click"),n.data("azh-drag",!0),n.data("azh-drag-y",a.pageY),n.css({top:e.offset().top,height:parseInt(N(e,"padding-top"),10)}),azh.document_off("mouseup.resizer").document_on("mouseup.resizer",function(t){n.data("azh-drag",!1),n.is(":hover")||azh.document_off("mouseup.resizer")}),azh.document_off("mousemove.resizer").document_on("mousemove.resizer",function(t){if(n.data("azh-drag")){var a=t.pageY-n.data("azh-drag-y"),i=parseInt(N(e,"padding-top"),10)+a;isNaN(i)||(i<0&&(i=0),P(e,"padding-top",i+="px"),e.css("padding-top",i),n.text(i),n.data("azh-drag-y",t.pageY),n.height(i))}}),a.stopPropagation(),a.preventDefault()}return!1}).on("mousemove",function(a){var n=t(this);if(!n.data("azh-drag")){n.css("pointer-events","none");var i=azh.$(azh.document.get(0).elementFromPoint(a.clientX-azh.device_left,a.clientY));n.css("pointer-events",""),i.is(".az-resize")||(e.data("azh-padding-top-resizer",!1),n.remove())}}).on("mouseleave",function(a){var n=t(this);n.data("azh-drag")||(e.data("azh-padding-top-resizer",!1),n.remove(),e.trigger("mouseleave"))}).on("contextmenu",function(a){a.preventDefault(),Yt(a,t(this).data("azh-linked-node"))}).css({top:e.offset().top,left:e.offset().left,width:e.innerWidth(),height:parseInt(N(e,"padding-top"),10)>10?parseInt(N(e,"padding-top"),10):10});e.data("azh-padding-top-resizer",n),n.data("azh-linked-node",e)}if(Qt(e,"padding-bottom")&&!e.data("azh-padding-bottom-resizer")){n=t('<div class="azh-resizer azh-row-resize">'+N(e,"padding-bottom")+"</div>").appendTo(azh.controls_container).on("mousedown",function(a){if(1==a.which){var n=t(this);n.data("azh-linked-node").trigger("click"),n.data("azh-drag",!0),n.data("azh-drag-y",a.pageY),n.css({top:e.offset().top+e.innerHeight()-parseInt(N(e,"padding-bottom"),10),height:parseInt(N(e,"padding-bottom"),10)}),azh.document_off("mouseup.resizer").document_on("mouseup.resizer",function(t){n.data("azh-drag",!1),n.is(":hover")||azh.document_off("mouseup.resizer")}),azh.document_off("mousemove.resizer").document_on("mousemove.resizer",function(t){if(n.data("azh-drag")){var a=t.pageY-n.data("azh-drag-y"),i=parseInt(N(e,"padding-bottom"),10)+a;isNaN(i)||(i<0&&(i=0),P(e,"padding-bottom",i+="px"),e.css("padding-bottom",i),n.text(i),n.data("azh-drag-y",t.pageY),n.height(i))}}),a.stopPropagation(),a.preventDefault()}return!1}).on("mousemove",function(a){var n=t(this);if(!n.data("azh-drag")){n.css("pointer-events","none");var i=azh.$(azh.document.get(0).elementFromPoint(a.clientX-azh.device_left,a.clientY));n.css("pointer-events",""),i.is(".az-resize")||(e.data("azh-padding-bottom-resizer",!1),n.remove())}}).on("mouseleave",function(a){var n=t(this);n.data("azh-drag")||(e.data("azh-padding-bottom-resizer",!1),n.remove(),e.trigger("mouseleave"))}).on("contextmenu",function(a){a.preventDefault(),Yt(a,t(this).data("azh-linked-node"))}).css({top:e.offset().top+e.innerHeight()-(parseInt(N(e,"padding-bottom"),10)>0?parseInt(N(e,"padding-bottom"),10):10),left:e.offset().left,width:e.innerWidth(),height:parseInt(N(e,"padding-bottom"),10)>10?parseInt(N(e,"padding-bottom"),10):10});e.data("azh-padding-bottom-resizer",n),n.data("azh-linked-node",e)}if(Qt(e,"height")&&!e.data("azh-height-resizer")){n=t('<div class="azh-resizer azh-row-resize">'+D(e,"height")+"</div>").appendTo(azh.controls_container).on("mousedown",function(a){if(1==a.which){var n=t(this);n.data("azh-linked-node").trigger("click"),n.data("azh-drag",!0),n.data("azh-drag-y",a.pageY),n.css({height:parseInt(D(e,"height"),10)}),azh.document_off("mouseup.resizer").document_on("mouseup.resizer",function(t){n.data("azh-drag",!1),n.is(":hover")||azh.document_off("mouseup.resizer")}),azh.document_off("mousemove.resizer").document_on("mousemove.resizer",function(t){if(n.data("azh-drag")){var a=t.pageY-n.data("azh-drag-y"),i=parseInt(D(e,"height"),10)+a;if(!isNaN(i)){if(i<0&&(i=0),i+="px","lg"===azh.device_prefix)P(e,"height",i),e.css("height",i);else{S(e,"data-responsive-"+azh.device_prefix,"height",i);var o=C(e,"data-responsive-"+azh.device_prefix);!1!==o&&e.attr("data-responsive-"+azh.device_prefix,o),azh.window.get(0).azh.refresh_responsive_css_rules(e)}n.text(i),n.data("azh-drag-y",t.pageY),n.height(i)}}}),a.stopPropagation(),a.preventDefault()}return!1}).on("mousemove",function(a){var n=t(this);if(!n.data("azh-drag")){n.css("pointer-events","none");var i=azh.$(azh.document.get(0).elementFromPoint(a.clientX-azh.device_left,a.clientY));n.css("pointer-events",""),i.is(".az-resize")||(e.data("azh-height-resizer",!1),n.remove())}}).on("mouseleave",function(a){var n=t(this);n.data("azh-drag")||(e.data("azh-height-resizer",!1),n.remove(),e.trigger("mouseleave"))}).on("contextmenu",function(a){a.preventDefault(),Yt(a,t(this).data("azh-linked-node"))}).css({top:e.offset().top,left:e.offset().left,width:e.innerWidth(),height:parseInt(D(e,"height"),10)>10?parseInt(D(e,"height"),10):10});e.data("azh-height-resizer",n),n.data("azh-linked-node",e)}}).on("mouseleave",function(){var t=azh.$(this);setTimeout(function(){t.data("azh-padding-top-resizer")&&(t.data("azh-padding-top-resizer").is(":hover")||t.data("azh-padding-top-resizer").data("azh-drag")||(t.data("azh-padding-top-resizer").remove(),t.data("azh-padding-top-resizer",!1))),t.data("azh-padding-bottom-resizer")&&(t.data("azh-padding-bottom-resizer").is(":hover")||t.data("azh-padding-bottom-resizer").data("azh-drag")||(t.data("azh-padding-bottom-resizer").remove(),t.data("azh-padding-bottom-resizer",!1))),t.data("azh-height-resizer")&&(t.data("azh-height-resizer").is(":hover")||t.data("azh-height-resizer").data("azh-drag")||(t.data("azh-height-resizer").remove(),t.data("azh-height-resizer",!1)))})})}),i.find(".az-free-positioning").each(function(){function a(t){if(t.attr("data-height")&&t.attr("data-width")&&"none"!==t.css("background-image")&&("cover"===t.css("background-size")||"contain"===t.css("background-size"))){var a=t.width()/parseInt(t.attr("data-width"),10),e=t.height()/parseInt(t.attr("data-height"),10);if(1!==a||1!==e){var n=new Image;n.src=t.css("background-image").replace(/url\(|'|"|\)$/gi,"");var i=n.width,o=n.height;if(i&&o){var s=parseInt(t.attr("data-width"),10)/i,r=parseInt(t.attr("data-height"),10)/o,h=t.width()/i,l=t.height()/o,c=1;if("cover"===t.css("background-size")){c=(l>h?l:h)/(r>s?r:s)}if("contain"===t.css("background-size")){c=(l<h?l:h)/(r<s?r:s)}t.find("> [data-element], > .az-elements-list > [data-element]").each(function(){!function(t,a){switch(rt(t)){case"top":gt(t,lt(t)*a);break;case"middle":mt(t,ct(t)*a);break;case"bottom":bt(t,dt(t)*a)}switch(ht(t)){case"left":_t(t,zt(t)*a);break;case"center":kt(t,pt(t)*a);break;case"right":yt(t,ut(t)*a)}t.css("width",t.width()*a+"px"),P(t,"width",t.width()*a+"px"),t.css("height",t.height()*a+"px"),P(t,"height",t.height()*a+"px")}(azh.$(this),c)})}}}}var e=azh.$(this);if(e.closest("[data-element]").on("drag dragstart dragenter dragover dragleave drop dragend",function(t){return t.stopPropagation(),!1}),c.one("azh-set-device-width",function(){var t=e.closest('[data-full-width="true"]');t.length?setTimeout(function(){t.one("az-full-width",function(){a(e)})}):a(e)}),e.parents(".az-free-positioning").length)Wt(e.closest("[data-element]"));else{Vt(e),jt(e.closest("[data-element]"));var n=e.closest("[data-element]").data("azh-controls");n.find(".azh-add-element").length||t('<div class="azh-add-element"></div>').on("click",function(a){var e=at(t(this).closest(".azh-element-controls").data("azh-linked-element"),"[data-element]").last(),n=e;return e.children().length&&((n=ca(e)).removeClass("az-group"),j(n,"az-group")),n.trigger("click"),azh.change(),!1}).appendTo(n)}}),i.find(".az-polygone").each(function(){var a=azh.$(this);0===a.find("polygon").get(0).getAttribute("points").split(" ").filter(function(t){return""!==t}).length&&a.addClass("azh-adding"),a.on("azh-clone",function(){azh.$(this).data("azh-polygone-handlers",!1)}),a.find("svg").on("mouseenter",function(a){function e(){var a=[];l.data("azh-polygone-handlers")&&(l.data("azh-polygone-handlers").find(".azh-handler").each(function(){a.push(t(this).data("azh-x")+","+t(this).data("azh-y"))}),l.find("polygon").get(0).setAttribute("points",a.join(" ")),A(l.find("polygon"),"points",a.join(" ")))}function n(a){a.on("contextmenu",function(t){return a.remove(),l.data("azh-current-handler",!1),e(),!1}).draggable({start:function(t,a){azh.body.css("cursor","none"),r=azh.window.scrollTop()},stop:function(a,e){azh.body.css("cursor","auto"),azh.window.scrollTop(r),l.data("azh-current-handler",t(e.helper)),azh.document_off("keydown.azh-free-positioning-move")},drag:function(a,n){azh.window.scrollTop(r);var i=(n.position.left+5)/p*v,o=(n.position.top+5)/u*g;i<0&&(i=0),i>v&&(i=v),o<0&&(o=0),o>g&&(o=g),t(n.helper).data("azh-x",i),t(n.helper).data("azh-y",o),l.data("azh-current-handler",t(n.helper)),e()}})}function i(a,e){var n=l.closest(".az-free-positioning");n.css({transform:"translate("+n.data("azh-shift-x")+"px,"+n.data("azh-shift-y")+"px) scale("+n.data("azh-scale")+")"});n.closest("[data-element]").get(0).getBoundingClientRect();var i=h.get(0).getBoundingClientRect();p=i.width,u=i.height,e||a.css({left:i.left,top:i.top+azh.window.scrollTop(),width:i.width,height:i.height}),a.find(".azh-handler").each(function(){var a=t(this);a.css({left:parseFloat(a.data("azh-x"))/v*p-5+"px",top:parseFloat(a.data("azh-y"))/g*u-5+"px",position:"absolute"}),a.show()})}function o(t,a,e,n){var i=e,o=n,s=parseInt(t.css("left"),10),r=parseInt(a.css("left"),10),h=parseInt(t.css("top"),10),l=parseInt(a.css("top"),10),c=Math.pow(i-s,2)+Math.pow(o-h,2),d=Math.pow(i-r,2)+Math.pow(o-l,2),z=Math.pow(r-s,2)+Math.pow(l-h,2),p=2*(Math.abs((i-r)*(h-l)-(s-r)*(o-l))/2)/Math.sqrt(z);return c+z<d||d+z<c?c<d?Math.sqrt(c):Math.sqrt(d):p}function s(a,e,n){var i=a.children().first(),s=i.next(),r=o(i,s,e,n);return a.children().each(function(){var h=t(this),l=h.next();0===l.length&&(l=a.children().first());var c=o(h,l,e,n);r>c&&(i=h,s=l,r=c)}),{handler_before:i,handler_after:s,distance:r}}if(0===a.which){var r=azh.window.scrollTop(),h=azh.$(this),l=h.closest(".az-polygone"),c=h.closest("[data-element]");if(!c.data("azh-transformer")||!c.data("azh-transformer").is(".azh-editing"))return;var d=l.closest(".az-free-positioning");d.find("[data-element].azh-hover").each(function(){var t=azh.$(this).find(".az-polygone");t.length&&t.data("azh-polygone-handlers")&&t.data("azh-polygone-handlers").triggerHandler("mouseleave")}),l.closest("[data-element]").addClass("azh-hover"),setTimeout(function(){l.closest("[data-element]").triggerHandler(azh.$.Event("mouseenter",{which:0}))}),l.addClass("az-hover");var z=h.get(0).getBoundingClientRect(),p=z.width,u=z.height,f=h.get(0).getAttribute("viewBox").split(" "),v=f[2],g=f[3],m=l.find("polygon").get(0).getAttribute("points").split(" ").filter(function(t){return""!==t});if(!l.data("azh-polygone-handlers")){(k=azh.controls_container.find(".azh-polygone-handlers")).length&&(azh.document_off("keydown.azh-polygone-handler-move"),k.data("azh-polygone").removeClass("az-hover").data("azh-polygone-handlers",!1),k.remove()),(k=t('<div class="azh-polygone-handlers"></div>').prependTo(azh.controls_container).on("mouseleave",function(a){var e=t(this),n=e.data("azh-polygone").closest("[data-element]");e.data("azh-polygone").removeClass("az-hover").data("azh-polygone-handlers",!1),azh.document_off("keydown.azh-polygone-handler-move"),e.remove(),n.removeClass("azh-hover"),n.triggerHandler(azh.$.Event("mouseleave",{which:0}))}).on("mousewheel",function(a){var e=t(this),n=e.data("azh-polygone"),o=n.closest(".az-free-positioning");o.addClass("azh-zoom"),azh.controls_container.addClass("azh-zooming");var s=Math.pow(1.2,a.originalEvent.wheelDelta/120),r=o.data("azh-scale")?o.data("azh-scale"):1,h=o.data("azh-shift-x")?o.data("azh-shift-x"):0,l=o.data("azh-shift-y")?o.data("azh-shift-y"):0,c=n.closest("[data-element]"),d=parseFloat(c.css("top"));c.is(".az-middle")&&(d-=c.height()/2);var z=parseFloat(c.css("left"));return c.is(".az-center")&&(z-=c.width()/2),h+=(o.width()/2-(z+parseInt(n.css("padding-left"),10)+a.offsetX/r))*r*(s-1),l+=(o.height()/2-(d+parseInt(n.css("padding-top"),10)+a.offsetY/r))*r*(s-1),(s*=r)<1&&(s=1,h=0,l=0,o.removeClass("azh-zoom"),azh.controls_container.removeClass("azh-zooming")),o.data("azh-scale",s),o.data("azh-shift-x",h),o.data("azh-shift-y",l),i(e),c.triggerHandler(azh.$.Event("mouseleave",{which:0})),c.removeClass("azh-hover"),setTimeout(function(){c.triggerHandler(azh.$.Event("mouseenter",{which:0}))},100),!1}).on("mousemove",function(t){s(k,t.offsetX,t.offsetY).distance<10?k.css("cursor","pointer"):k.css("cursor","move")}).on("contextmenu",function(t){d.data("azh-scale")>1||d.data("azh-shift-x")>0||d.data("azh-shift-y")>0?(d.data("azh-shift-x",0).data("azh-shift-y",0).data("azh-scale",1),i(k),d.removeClass("azh-zoom"),azh.controls_container.removeClass("azh-zooming")):Yt(t,l.closest("[data-element]"));return!1}).draggable({start:function(a,e){r=azh.window.scrollTop(),k.data("azh-dragging",!0),t(e.helper).data("azh-start-top",e.position.top),t(e.helper).data("azh-start-left",e.position.left);var n=k.data("azh-polygone").closest(".az-free-positioning");t(e.helper).data("azh-start-x",n.data("azh-shift-x")?n.data("azh-shift-x"):0),t(e.helper).data("azh-start-y",n.data("azh-shift-y")?n.data("azh-shift-y"):0)},stop:function(t,a){azh.window.scrollTop(r),setTimeout(function(){k.data("azh-dragging",!1)})},drag:function(a,e){azh.window.scrollTop(r);var n=k.data("azh-polygone"),o=n.closest(".az-free-positioning"),s=o.data("azh-scale")?o.data("azh-scale"):1,h=t(e.helper).data("azh-start-x")+e.position.left-t(e.helper).data("azh-start-left"),l=t(e.helper).data("azh-start-y")+e.position.top-t(e.helper).data("azh-start-top");o.data("azh-shift-x",h).data("azh-shift-y",l).data("azh-scale",s),i(k,!0);var c=n.closest("[data-element]");c.triggerHandler(azh.$.Event("mouseleave",{which:0})),c.removeClass("azh-hover"),setTimeout(function(){c.triggerHandler(azh.$.Event("mouseenter",{which:0}))},100)}})).data("azh-polygone",l),l.data("azh-polygone-handlers",k);for(var b=0;b<m.length;b++){var _=t('<div class="azh-handler"></div>').appendTo(k);_.data("azh-x",parseFloat(m[b].split(",")[0])),_.data("azh-y",parseFloat(m[b].split(",")[1])),n(_)}i(k)}var k=l.data("azh-polygone-handlers");m.length?k.off("click").on("click",function(a){if(!k.data("azh-dragging")){var i=s(k,a.offsetX,a.offsetY);if(i.distance<10){var o=t('<div class="azh-handler"></div>').insertAfter(i.handler_before).css({left:a.offsetX-5+"px",top:a.offsetY-5+"px",position:"absolute"}).data("azh-x",a.offsetX/p*v).data("azh-y",a.offsetY/u*g);n(o),l.data("azh-current-handler",o),azh.document_off("keydown.azh-free-positioning-move"),e()}else{var r=l.closest("[data-element]");r.trigger("click");var h=r.data("azh-controls");h&&h.find(".azh-utility-wrapper").trigger("click")}}return!1}):(l.addClass("azh-adding"),k.off("click").on("click",function(a){if(!k.data("azh-dragging")){var i=t('<div class="azh-handler"></div>').appendTo(k).css({left:a.offsetX-5+"px",top:a.offsetY-5+"px",position:"absolute"}).data("azh-x",a.offsetX/p*v).data("azh-y",a.offsetY/u*g);n(i),l.data("azh-current-handler",i),azh.document_off("keydown.azh-free-positioning-move"),e()}return!1}),azh.document.on("click.azh-polygon",function(t){var a=azh.$(".azh-adding").removeClass("azh-adding").data("azh-polygone-handlers");a&&a.off("click"),azh.document.off("click.azh-polygon")})),l.data("azh-current-handler",!1),azh.document_off("keydown.azh-polygone-handler-move").document_on("keydown.azh-polygone-handler-move",function(t){var a=l.data("azh-current-handler");if(a){var n=l.closest(".az-free-positioning"),i=n.data("azh-scale")?n.data("azh-scale"):1,o=parseInt(a.css("left"),10),s=parseInt(a.css("top"),10);switch(t.keyCode?t.keyCode:t.which){case 37:o--,t.preventDefault();break;case 38:s--,t.preventDefault();break;case 39:o++,t.preventDefault();break;case 40:s++,t.preventDefault()}a.css("left",o+"px"),a.css("top",s+"px");var r=(o+5)/l.find("svg").width()*v/i,h=(s+5)/l.find("svg").height()*g/i;r<0&&(r=0),r>v&&(r=v),h<0&&(h=0),h>g&&(h=g),a.data("azh-x",r),a.data("azh-y",h),e()}})}})}),i.find("form button").on("keypress keydown",function(t){32==t.keyCode&&azh.document.get(0).execCommand("insertHTML",!1,"&nbsp;")}).on("keypress keydown keyup",function(t){13!=t.keyCode&&32!=t.keyCode||t.preventDefault()}).on("click",function(t){t.preventDefault()}),i.find(".az-editable-html").each(function(){var a=azh.$(this).closest("[data-element]").data("azh-controls");a.find(".azh-html-edit").length||t('<div class="azh-modal-button azh-html-edit" title="'+azh.i18n.edit_element_html+'"></div>').on("click",function(a){var e=t(this).closest(".azh-element-controls").data("azh-linked-element").find(".az-editable-html"),n=e.clone(!0);azh.liquid_prepare(n);var i=k(n,!0);i=l(i),J({title:azh.i18n.edit_element_html,desc:"",label:azh.i18n.source_code},s(i),function(t){return!1!==(t=r(t))?(t=h(t),e.html(t),b(e.get(0)),et(e),azh.frontend_init&&azh.frontend_init(e),!0):(alert(azh.i18n.html_is_not_valid),!1)})}).prependTo(a)}),Kt(i),i.addClass("azh-deferred-context-controls"),i.is("[data-element], [data-section]")&&(f(i),i.find('[data-element]:not([data-element=" "], [data-element=""]), [class*="azh-col-"]').each(function(){f(azh.$(this))}),i.find("[data-cloneable], [data-cloneable-inline]").each(function(){var t=azh.$(this);if(oa(t)){var a=t.closest("[data-element]");a.length&&f(a)}}),azh.fill_utility_on_init.length&&i.find(azh.fill_utility_on_init.join(",")).each(function(){var t=azh.$(this).closest("[data-element], [data-section]");ta(t,f(t),!0)})),azh.controls_container.appendTo(z),tt(i),_.defer(qt,i),azh.window.trigger("azh-customization-after-init",{wrapper:i})},nt=function(a){var e={};t(["id","for"]).each(function(){var t=this;a.find("["+t+"]").each(function(){var a=azh.$(this).attr(t);a in e||(e[a]=[]),azh.$(this).addClass("azh-id-attr"),azh.$(this).data("azh-id-attr",t),e[a].push(azh.$(this))})}),t(["href","data-target","data-id"]).each(function(){var n=this;a.find("["+n+'^="#"]').each(function(){var a=azh.$(this).attr(n).replace("#","");t.trim(a)&&(a in e||(e[a]=[]),azh.$(this).addClass("azh-hash-attr"),azh.$(this).data("azh-hash-attr",n),e[a].push(azh.$(this)))})});var n={};for(var i in e)e[i].length>1&&(n[i]=e[i]);a.data("azh-linked-ids",n)};azh.section_customization_init=function(a){azh.recognition&&y(a),azh.controls_container=!1,t(".azh-controls-container").length?azh.controls_container=t(".azh-controls-container"):azh.controls_container=t('<div class="azh-controls-container"></div>').appendTo(z);var e=a.data("azh-controls");e||(e=t('<div class="azh-section-controls" title="'+azh.i18n.section_settings+'"></div>').appendTo(azh.controls_container).on("mouseenter",function(){t(this).data("azh-linked-element").addClass("azh-over")}).on("mouseleave",function(){t(this).data("azh-linked-element").removeClass("azh-over")}).data("azh-linked-element",a),a.data("azh-controls",e),e.data("azh-linked-element",a)),e.hide(),a.addClass("azh-controls"),a.off("mouseenter.azh-section").on("mouseenter.azh-section",function(t){if(0==azh.controls_container.find(".azh-section-controls.azh-active").length){var a=azh.$(this);e.css("display",""),e.css("right",p()-a.offset().left-a.outerWidth()+"px"),e.css("top",a.offset().top+"px")}}).off("mousemove.azh-section").on("mousemove.azh-section",function(){var t=azh.$(this);e.css("right",p()-t.offset().left-t.outerWidth()+"px"),e.css("top",t.offset().top+"px")}).off("mouseleave.azh-section").on("mouseleave.azh-section",function(){azh.$(this);setTimeout(function(){e.is(":hover")||0!=azh.controls_container.find(".azh-resizer:hover").length?e.on("mouseleave",function(){e.hide()}):e.hide()})}),nt(a),et(a),e.find(".azh-html-edit").length||t('<div class="azh-modal-button azh-html-edit" title="'+azh.i18n.edit_section_html+'"></div>').on("click",function(a){var e=t(this).closest(".azh-section-controls").data("azh-linked-element"),n=e.clone(!0);azh.liquid_prepare(n);var i=k(n.wrap("<div></div>").parent(),!0);i=l(i),J({title:azh.i18n.edit_section_html,desc:"",label:azh.i18n.source_code},s(i),function(t){return!1!==(t=r(t))?(t=h(t),$(e,r(t)),!0):(alert(azh.i18n.html_is_not_valid),!1)})}).prependTo(e)};var it=function(a,e){0==t(".azh-focus").length&&(t('<div class="azh-focus"><div class="top"></div><div class="right"></div><div class="bottom"></div><div class="left"></div></div>').appendTo(z).on("click",function(){return t(".azh-focus").remove(),!1}),t(".azh-focus .top, .azh-focus .right, .azh-focus .bottom, .azh-focus .left").css({"z-index":"50",position:"fixed","background-color":"black",opacity:"0.4"}));var n=t(".azh-focus .top"),i=t(".azh-focus .right"),o=t(".azh-focus .bottom"),s=t(".azh-focus .left"),r=a.offset().top-0,h=a.offset().left-0;azh.body.has(a).length&&(c.get(0)!=azh.window.get(0)?r-=azh.window.scrollTop():r-=azh.body.scrollTop(),azh.device_left&&(h+=azh.device_left));var l=a.outerWidth()+0,d=a.outerHeight()+0;n.stop().animate({top:0,left:0,right:0,height:r},e,"linear"),i.stop().animate({top:r,left:h+l,right:0,height:d},e,"linear"),o.stop().animate({top:r+d,left:0,right:0,bottom:0},e,"linear"),s.stop().animate({top:r,left:0,height:d,width:h},e,"linear",function(){}),e>0&&setTimeout(function(){c.on("scroll.focus",function(){t(".azh-focus").remove(),c.off("scroll.focus")}),t(".azh-focus .top, .azh-focus .right, .azh-focus .bottom, .azh-focus .left").stop().animate({opacity:"0"},10*e),setTimeout(function(){c.trigger("scroll")},10*e)},e)};function ot(a){c.get(0)!=azh.window.get(0)?azh.window.scrollTop(a.offset().top-c.height()/2+a.height()/2):azh.body.stop().animate({scrollTop:a.offset().top-azh.window.height()/2+a.height()/2},300),setTimeout(function(){azh.scroll_top=azh.window.scrollTop(),azh.controls_container.css("top",-azh.window.scrollTop()+"px"),t('<div class="azh-overlay"></div>').appendTo(z),it(t(".azh-overlay"),0),setTimeout(function(){t(".azh-overlay").remove(),it(a,300)},0)},300)}function st(t){t.css({left:"",right:"",top:"",bottom:"",transform:""}),P(t,"left",""),P(t,"right",""),P(t,"top",""),P(t,"bottom",""),P(t,"transform",""),P(t,"height",t.height()+"px"),P(t,"width",t.width()+"px")}function rt(t){return t.is(".az-top")?"top":t.is(".az-middle")?"middle":t.is(".az-bottom")?"bottom":void 0}function ht(t){return t.is(".az-left")?"left":t.is(".az-center")?"center":t.is(".az-right")?"right":void 0}function lt(t){var a=0;return t.get(0).style.top&&(a=t.get(0).style.top,a=parseInt(a)),a}function ct(t){var a=0;return t.get(0).style.top&&(a=t.get(0).style.top,a=(a=/calc\(50% ([-+]) ([\d\.]+)px\)/gi.exec(a))?parseInt(a[1]+a[2]):0),a}function dt(t){var a=0;return t.get(0).style.bottom&&(a=t.get(0).style.bottom,a=parseInt(a)),a}function zt(t){var a=0;return t.get(0).style.left&&(a=t.get(0).style.left,a=parseInt(a)),a}function pt(t){var a=0;return t.get(0).style.left&&(a=t.get(0).style.left,a=(a=/calc\(50% ([-+]) ([\d\.]+)px\)/gi.exec(a))?parseInt(a[1]+a[2]):0),a}function ut(t){var a=0;return t.get(0).style.right&&(a=t.get(0).style.right,a=parseInt(a)),a}function ft(t,a){t.css("width",a+"px"),P(t,"width",a+"px")}function vt(t,a){t.css("height",a+"px"),P(t,"height",a+"px")}function gt(t,a){t.css("top",a+"px"),P(t,"top",a+"px")}function mt(t,a){a>=0?(t.css("top","calc(50% + "+a+"px)"),P(t,"top","calc(50% + "+a+"px)")):(t.css("top","calc(50% - "+Math.abs(a)+"px)"),P(t,"top","calc(50% - "+Math.abs(a)+"px)"))}function bt(t,a){t.css("bottom",a+"px"),P(t,"bottom",a+"px")}function _t(t,a){t.css("left",a+"px"),P(t,"left",a+"px")}function kt(t,a){a>=0?(t.css("left","calc(50% + "+a+"px)"),P(t,"left","calc(50% + "+a+"px)")):(t.css("left","calc(50% - "+Math.abs(a)+"px)"),P(t,"left","calc(50% - "+Math.abs(a)+"px)"))}function yt(t,a){t.css("right",a+"px"),P(t,"right",a+"px")}function wt(t){t.css("bottom",""),P(t,"bottom",""),t.removeClass("az-middle"),j(t,"az-middle"),t.removeClass("az-bottom"),j(t,"az-bottom"),I(t,"az-top"),t.addClass("az-top")}function xt(t){t.css("bottom",""),P(t,"bottom",""),t.removeClass("az-top"),j(t,"az-top"),t.removeClass("az-bottom"),j(t,"az-bottom"),I(t,"az-middle"),t.addClass("az-middle")}function $t(t){t.css("top",""),P(t,"top",""),t.removeClass("az-top"),j(t,"az-top"),t.removeClass("az-middle"),j(t,"az-middle"),I(t,"az-bottom"),t.addClass("az-bottom")}function Tt(t){t.css("right",""),P(t,"right",""),t.removeClass("az-right"),j(t,"az-right"),t.removeClass("az-center"),j(t,"az-center"),I(t,"az-left"),t.addClass("az-left")}function Ct(t){t.css("right",""),P(t,"right",""),t.removeClass("az-right"),j(t,"az-right"),t.removeClass("az-left"),j(t,"az-left"),I(t,"az-center"),t.addClass("az-center")}function At(t){t.css("left",""),P(t,"left",""),t.removeClass("az-center"),j(t,"az-center"),t.removeClass("az-left"),j(t,"az-left"),I(t,"az-right"),t.addClass("az-right")}function Mt(t,a){switch(rt(t)){case"top":var e=lt(t);switch(a){case"middle":e=e-t.closest(".az-free-positioning").height()/2+t.height()/2,xt(t),mt(t,Math.round(e));break;case"bottom":e=-e+t.closest(".az-free-positioning").height()-t.height(),$t(t),bt(t,Math.round(e))}break;case"middle":e=ct(t);switch(a){case"top":e=e+t.closest(".az-free-positioning").height()/2-t.height()/2,wt(t),gt(t,Math.round(e));break;case"bottom":e=-e+t.closest(".az-free-positioning").height()/2-t.height()/2,$t(t),bt(t,Math.round(e))}break;case"bottom":e=dt(t);switch(a){case"top":e=-e+t.closest(".az-free-positioning").height()-t.height(),wt(t),gt(t,Math.round(e));break;case"middle":e=-e+t.closest(".az-free-positioning").height()/2-t.height()/2,xt(t),mt(t,Math.round(e))}}}function It(t,a){switch(ht(t)){case"left":var e=zt(t);switch(a){case"center":e=e-t.closest(".az-free-positioning").width()/2+t.width()/2,Ct(t),kt(t,Math.round(e));break;case"right":e=-e+t.closest(".az-free-positioning").width()-t.width(),At(t),yt(t,Math.round(e))}break;case"center":e=pt(t);switch(a){case"left":e=e+t.closest(".az-free-positioning").width()/2-t.width()/2,Tt(t),_t(t,Math.round(e));break;case"right":e=-e+t.closest(".az-free-positioning").width()/2-t.width()/2,At(t),yt(t,Math.round(e))}break;case"right":e=ut(t);switch(a){case"left":e=-e+t.closest(".az-free-positioning").width()-t.width(),Tt(t),_t(t,Math.round(e));break;case"center":e=-e+t.closest(".az-free-positioning").width()/2-t.width()/2,Ct(t),kt(t,Math.round(e))}}}function jt(t){var a=0,e=0;do{a=e;for(var n=[],i=0;i<t.length;i++)n.push([t[i],i]);n.sort(function(t,a){return t[0]<a[0]?-1:1});var o=[];for(i=0;i<n.length;i++)o.push(n[i][1]);var s=[];for(i=1;i<t.length;i++)s.push(t[o[i-1]]+(t[o[i]]-t[o[i-1]])/2);var r=[];r.push(s[0]-t[o[0]]);for(i=1;i<t.length;i++)r.push(t[o[i]]-s[i-1]);e=0;for(i=0;i<r.length;i++)e+=r[i];e/=r.length,t[o[0]]=s[0]-e;for(i=1;i<t.length;i++)t[o[i]]=s[i-1]+e}while(Math.abs(a-e)>.01);return t}function Nt(t,a){switch(t.each(function(){Mt(azh.$(this),a)}),a){case"top":var e=[];t.each(function(){var t=azh.$(this);switch(rt(t)){case"top":e.push(lt(t));break;case"middle":e.push(ct(t)-t.height()/2);break;case"bottom":e.push(dt(t)-t.height())}}),e=jt(e),t.each(function(t){var a=azh.$(this);switch(rt(a)){case"top":gt(a,Math.round(e[t]));break;case"middle":mt(a,Math.round(e[t]+a.height()/2));break;case"bottom":bt(a,Math.round(e[t]+a.height()))}});break;case"middle":e=[];t.each(function(){var t=azh.$(this);switch(rt(t)){case"top":e.push(lt(t)+t.height()/2);break;case"middle":e.push(ct(t));break;case"bottom":e.push(dt(t)-t.height()/2)}}),e=jt(e),t.each(function(t){var a=azh.$(this);switch(rt(a)){case"top":gt(a,Math.round(e[t]-a.height()/2));break;case"middle":mt(a,Math.round(e[t]));break;case"bottom":bt(a,Math.round(e[t]+a.height()/2))}});break;case"bottom":e=[];t.each(function(){var t=azh.$(this);switch(rt(t)){case"top":e.push(lt(t)+t.height());break;case"middle":e.push(ct(t)+t.height()/2);break;case"bottom":e.push(dt(t))}}),e=jt(e),t.each(function(t){var a=azh.$(this);switch(rt(a)){case"top":gt(a,Math.round(e[t]-a.height()));break;case"middle":mt(a,Math.round(e[t]-a.height()/2));break;case"bottom":bt(a,Math.round(e[t]))}})}}function Bt(t,a){switch(t.each(function(){It(azh.$(this),a)}),a){case"left":var e=[];t.each(function(){var t=azh.$(this);switch(ht(t)){case"left":e.push(zt(t));break;case"center":e.push(pt(t)-t.width()/2);break;case"right":e.push(ut(t)-t.width())}}),e=jt(e),t.each(function(t){var a=azh.$(this);switch(ht(a)){case"left":_t(a,Math.round(e[t]));break;case"center":kt(a,Math.round(e[t]+a.width()/2));break;case"right":yt(a,Math.round(e[t]+a.width()))}});break;case"center":e=[];t.each(function(){var t=azh.$(this);switch(ht(t)){case"left":e.push(zt(t)+t.width()/2);break;case"center":e.push(pt(t));break;case"right":e.push(ut(t)-t.width()/2)}}),e=jt(e),t.each(function(t){var a=azh.$(this);switch(ht(a)){case"left":_t(a,Math.round(e[t]-a.width()/2));break;case"center":kt(a,Math.round(e[t]));break;case"right":yt(a,Math.round(e[t]+a.width()/2))}});break;case"right":e=[];t.each(function(){var t=azh.$(this);switch(ht(t)){case"left":e.push(zt(t)+t.width());break;case"center":e.push(pt(t)+t.width()/2);break;case"right":e.push(ut(t))}}),e=jt(e),t.each(function(t){var a=azh.$(this);switch(ht(a)){case"left":_t(a,Math.round(e[t]-a.width()));break;case"center":kt(a,Math.round(e[t]-a.width()/2));break;case"right":yt(a,Math.round(e[t]))}})}}function Rt(t,a){switch(t.each(function(){Mt(azh.$(this),a)}),a){case"top":var e=lt(t.first());t.each(function(){e>lt(azh.$(this))&&(e=lt(azh.$(this)))}),t.each(function(){gt(azh.$(this),Math.round(e))});break;case"middle":var n=0;t.each(function(){n+=ct(azh.$(this))}),n/=t.length,t.each(function(){mt(azh.$(this),Math.round(n))});break;case"bottom":e=dt(t.first());t.each(function(){e>dt(azh.$(this))&&(e=dt(azh.$(this)))}),t.each(function(){bt(azh.$(this),Math.round(e))})}}function Pt(t,a){switch(t.each(function(){It(azh.$(this),a)}),a){case"left":var e=zt(t.first());t.each(function(){e>zt(azh.$(this))&&(e=zt(azh.$(this)))}),t.each(function(){_t(azh.$(this),Math.round(e))});break;case"center":var n=0;t.each(function(){n+=pt(azh.$(this))}),n/=t.length,t.each(function(){kt(azh.$(this),Math.round(n))});break;case"right":e=ut(t.first());t.each(function(){e>ut(azh.$(this))&&(e=ut(azh.$(this)))}),t.each(function(){yt(azh.$(this),Math.round(e))})}}function Ot(a,e){var n="data-section";a.attr(n)||(n="data-element");var i=a.attr(n);t('<span class="azh-name" '+(0===i.indexOf("shortcode:")?"":"contenteditable")+">"+a.attr(n)+"</span>").prependTo(e).on("blur",function(){a.attr(n,t(this).text()),A(a,n,t(this).text());var e=a.data("azh-controls");e&&e.find("> .azh-name").text(t(this).text())}).on("mousedown",function(t){t.stopPropagation()}),e.data("azh-linked-element",a),a.is(".azh-expand")&&e.addClass("azh-expand"),a.data("azh-linked-hierarchy-child",e);i=a.attr(n);var o=!1,s=t();(s=t("data-section"==n?'.azh-library .azh-sections .azh-section[data-path="'+i+'"]':'.azh-library .azh-elements .azh-element[data-path="'+i+'"]')).length>0&&(o=t(s).get(0).style["background-image"].replace("url(","").replace(")","").replace(/\'/gi,"").replace(/\"/gi,"")),o&&"none"!=o||(o=azh.plugin_url+"/images/box.png"),e.prepend('<img src="'+o+'">');var r=t('<span class="azh-visibility"></span>').prependTo(e).on("click",function(){var e=t(this);return t(this).is(".azh-hidden")?(e.removeClass("azh-hidden"),a.show(),P(a,"display","block")):(e.addClass("azh-hidden"),a.hide(),P(a,"display","none")),!1});a.is(":visible")||r.addClass("azh-hidden");var h=at(a,"[data-element]");if(h.length){var l=t('<div class="azh-children"></div>').appendTo(e);h.each(function(){var a=azh.$(this);a.attr("data-element")&&" "!=a.attr("data-element")&&Ot(a,t('<div class="azh-child"></div>').appendTo(l))}),1===h.parent().length&&l.sortable({placeholder:"azh-placeholder",forcePlaceholderSize:!0,update:function(a,e){var n=t(e.item).data("azh-linked-element");(n.detach(),t(e.item).next().length)?t(e.item).next().data("azh-linked-element").before(n):t(e.item).prev().length&&t(e.item).prev().data("azh-linked-element").after(n)},over:function(t,a){a.placeholder.attr("class",a.helper.attr("class")),a.placeholder.removeClass("ui-sortable-helper"),a.placeholder.attr("style",a.helper.attr("style")),a.placeholder.css("position","relative"),a.placeholder.css("z-index","auto"),a.placeholder.css("left","auto"),a.placeholder.css("top","auto"),a.placeholder.addClass("azh-placeholder")}})}return e}function Yt(t,a){if(a){azh.controls_container.find(".azh-element-controls.azh-active, .azh-column-controls.azh-active, .azh-section-controls.azh-active").removeClass("azh-active");var e=a.closest("[data-element]");e.data("azh-controls")&&e.data("azh-controls").find(".azh-utility-wrapper").trigger("click");var n=azh.$.Event("contextmenu",{target:a.get(0)});n.clientX=t.clientX-azh.device_left,n.clientY=t.clientY,e.trigger(n)}}function St(){azh.body.find(".azh-saved-utility").each(function(){var t=azh.$(this);j(t,"azh-saved-utility"),t.removeClass("azh-saved-utility")}),azh.utility_state=!1}function Dt(){St();var t=azh.controls_container.find(".azh-section-controls.azh-active  .azh-utility-wrapper .azh-utility, .azh-element-controls.azh-active .azh-utility-wrapper .azh-utility");if(t.length&&t.data("azh-linked-element")){I(t.data("azh-linked-element"),"azh-saved-utility"),t.data("azh-linked-element").addClass("azh-saved-utility");var a=t.find("[data-group].azh-group.azh-active").data("group"),e=t.find("[data-subgroup].azh-subgroup.azh-active").data("subgroup");azh.utility_state={scrollTop:t.children(".azh-controls-list").scrollTop(),group:a,subgroup:e}}}function Et(){if(azh.utility_state){var t=azh.body.find(".azh-saved-utility");if(t.length){(t=azh.$(t.get(0))).trigger("click");var a=t.data("azh-controls");a.find(".azh-utility-wrapper").trigger("click");var e=a.find(".azh-utility");e.length&&e.data("azh-linked-element")&&(e.closest(".azh-utility-wrapper").trigger("click"),e.find('[data-group="'+azh.utility_state.group+'"].azh-title').trigger("click"),e.find('[data-subgroup="'+azh.utility_state.subgroup+'"].azh-title').trigger("click"),e.children(".azh-controls-list").scrollTop(azh.utility_state.scrollTop),St())}}}var Xt=function(a,e){e.find(".azh-name").off("mouseenter").on("mouseenter",function(){var a=t(this).parent();a.data("azh-linked-element")&&a.data("azh-linked-element").addClass("azh-over")}).off("mouseleave").on("mouseleave",function(){var a=t(this).parent();a.data("azh-linked-element")&&a.data("azh-linked-element").removeClass("azh-over")}).off("click").on("click",function(e){var n=t(this).parent();if(n.is(".azh-active.azh-expand")?(n.removeClass("azh-expand"),n.data("azh-linked-element")&&n.data("azh-linked-element").removeClass("azh-expand")):(n.addClass("azh-expand"),n.data("azh-linked-element")&&n.data("azh-linked-element").addClass("azh-expand")),n.data("azh-linked-element")){var i=n.data("azh-linked-element");if(i.is("[data-element]")){if(e.ctrlKey){var o=a.data("azh-group");n.is(".azh-active")?(o=!!o&&(!!(o=o.not(i)).length&&o),n.removeClass("azh-active")):o?o.parent().get(0)==i.parent().get(0)&&(o=o.add(i),n.addClass("azh-active")):(a.find(".azh-child.azh-active").removeClass("azh-active"),o=i,n.addClass("azh-active")),a.data("azh-group",o)}else a.data("azh-group",i),a.find(".azh-child.azh-active").removeClass("azh-active"),n.addClass("azh-active");var s=i.data("azh-controls");s&&(azh.controls_container.find(".azh-element-controls.azh-active, .azh-column-controls.azh-active, .azh-section-controls.azh-active").removeClass("azh-active"),F(i,s),s.find(".azh-utility-wrapper").trigger("click"))}if(i.is("[data-section]")){var r=i.data("azh-controls");r&&(azh.controls_container.find(".azh-section-controls.azh-active").removeClass("azh-active"),r.find(".azh-utility-wrapper").trigger("click"),a.find(".azh-child.azh-active").removeClass("azh-active"),n.addClass("azh-active"))}}return!1}).off("contextmenu").on("contextmenu",function(a){a.preventDefault(),Yt(a,t(a.target).closest(".azh-child").data("azh-linked-element"))})},qt=function(a){var e=a.closest("[data-section]");if(e.length&&e.data("azh-linked-hierarchy-child")){var n=e.data("azh-linked-hierarchy-child");n.empty(),Ot(e,n),Xt(t(".azh-elements-hierarchy"),n)}else Ft()},Ft=function(){function a(t){var a=e.find(".azh-root");a.scrollTop(t.offset().top-a.offset().top+a.scrollTop()-a.height()/2)}var e=t(".azh-elements-hierarchy");if(e.length){e.empty();t('<div class="azh-hierarchy-title">'+azh.i18n.elements_hierarchy+"</div>").prependTo(e);var n=t('<div class="azh-child azh-root"></div>').appendTo(e);azh.content_wrapper.find("[data-section]").addBack().filter("[data-section]").each(function(){if(!azh.$(this).parents("[data-element]").length){var a=t('<div class="azh-child"></div>').appendTo(n);Ot(azh.$(this),a)}}),Xt(e,e),azh.document.off("click.azh-hierarchy contextmenu.azh-hierarchy").on("click.azh-hierarchy contextmenu.azh-hierarchy",function(n){var i=azh.$(n.target);i.closest(".az-no-utility").length&&(i=i.closest(".az-no-utility").parent());var o=i.is("[data-element]")?i:i.closest("[data-element]");if(o.length){if((h=o.data("azh-linked-hierarchy-child"))&&h.length&&(e.find(".azh-child.azh-active").removeClass("azh-active"),h.addClass("azh-active"),h.parents(".azh-child").each(function(){var a=t(this);a.addClass("azh-expand"),a.data("azh-linked-element")&&a.data("azh-linked-element").addClass("azh-expand")}),a(h)),1===n.which)if(o.data("azh-controls"))(r=o.data("azh-controls").find(".azh-utility-wrapper")).length&&(azh.controls_container.find(".azh-element-controls.azh-active, .azh-column-controls.azh-active, .azh-section-controls.azh-active").removeClass("azh-active"),setTimeout(function(){r.trigger("click")}))}else{var s=i.closest("[data-section]");if(s.length){var r,h=s.data("azh-linked-hierarchy-child");if(e.find(".azh-child.azh-active").removeClass("azh-active"),h.addClass("azh-active"),h&&h.length&&(h.parents(".azh-child").each(function(){var a=t(this);a.addClass("azh-expand"),a.data("azh-linked-element")&&a.data("azh-linked-element").addClass("azh-expand")}),a(h)),1===n.which)if(s.data("azh-controls"))(r=s.data("azh-controls").find(".azh-utility-wrapper")).length&&(azh.controls_container.find(".azh-element-controls.azh-active, .azh-column-controls.azh-active, .azh-section-controls.azh-active").removeClass("azh-active"),setTimeout(function(){r.trigger("click")}))}}}),d.off("click.azh-hierarchy-active").on("click.azh-hierarchy-active",function(a){a.which&&!t(a.srcElement).is(".azh-resizer")&&(t(a.target).closest(azh.click_not_hide_contextmenu).length||z.children(".select2-container").length||(t(a.target).closest(".azh-element-controls").length||azh.controls_container.find(".azh-element-controls.azh-active").removeClass("azh-active"),t(a.target).closest(".azh-column-controls").length||azh.controls_container.find(".azh-column-controls.azh-active").removeClass("azh-active"),t(a.target).closest(".azh-section-controls").length||azh.controls_container.find(".azh-section-controls.azh-active").removeClass("azh-active")))})}};azh.get_wrapper_controls=function(a){var e=t();return a.find(".azh-controls").addBack().filter(".azh-controls").each(function(){e=e.add(azh.$(this).data("azh-controls"))}),a.find(".azh-cloneable-controls").addBack().filter(".azh-cloneable-controls").each(function(){e=e.add(azh.$(this).data("azh-cloneable-controls"))}),a.find(".azh-cloneable-child-controls").addBack().filter(".azh-cloneable-child-controls").each(function(){e=e.add(azh.$(this).data("azh-cloneable-child-controls"))}),a.find(".azh-item-controls").addBack().filter(".azh-item-controls").each(function(){e=e.add(azh.$(this).data("azh-item-controls"))}),a.find(".azh-grid").addBack().filter(".azh-grid").each(function(){azh.$(this).children().each(function(){var t=azh.$(this),a=t.data("azh-resizer");a&&(e=e.add(a));var n=t.data("azh-controls");n&&(e=e.add(n))})}),e},azh.structure_refresh=function(a){t(".azh-structure").empty(),a.find("[data-section]").each(function(){if(!azh.$(this).parents("[data-element]").length){var e=t('<div class="azh-section-path">'+azh.$(this).data("section")+"</div>").appendTo(t(".azh-structure"));e.data("azh-section",azh.$(this)),azh.$(this).data("azh-section-path",e),t('<div class="azh-clone"></div>').appendTo(e).on("click",function(){var t=e.data("azh-section"),n=t.clone(!0);azh.liquid_prepare(n);var i=k(n.wrap("<div></div>").parent(),!0),o=azh.window.scrollTop(),s=azh.$(i);return b(s.get(0)),t.after(s),azh.section_customization_init(s),azh.frontend_init&&azh.frontend_init(s),azh.window.trigger("resize"),azh.window.scrollTop(o),_.defer(Ft),azh.structure_refresh(a),!1}),t('<div class="azh-remove"></div>').appendTo(e).on("click",function(){return E(e.data("azh-section")),e.data("azh-section").remove(),e.remove(),_.defer(Ft),!1}),e.on("click",function(){return ot(t(this).data("azh-section")),!1})}}),t(".azh-structure").sortable({placeholder:"azh-placeholder",forcePlaceholderSize:!0,update:function(a,e){var n=t(e.item).data("azh-section");if(t(n).detach(),t(e.item).next().length){var i=t(e.item).next().data("azh-section");t(i).before(n)}else if(t(e.item).prev().length){var o=t(e.item).prev().data("azh-section");t(o).after(n)}_.defer(Ft)},over:function(t,a){a.placeholder.attr("class",a.helper.attr("class")),a.placeholder.removeClass("ui-sortable-helper"),a.placeholder.attr("style",a.helper.attr("style")),a.placeholder.css("position","relative"),a.placeholder.css("z-index","auto"),a.placeholder.css("left","auto"),a.placeholder.css("top","auto"),a.placeholder.addClass("azh-placeholder")}}),t(".azh-structure").length&&t(".azh-structure").scrollTop(t(".azh-structure")[0].scrollHeight),t(".azh-structure").children().length?t("#azexo-html-library .azh-panel.azh-builder").removeClass("azh-empty"):t("#azexo-html-library .azh-panel.azh-builder").addClass("azh-empty")},azh.library_init=function(a){function e(){function a(){for(var a in u.children().attr("hidden","hidden"),azh.tags)a&&t('.azh-library .azh-sections .azh-section[data-tags*="'+a+'"]:visible').length&&u.children('[value="'+a+'"]').removeAttr("hidden");u.children('[value=""]').removeAttr("hidden"),u.children('[value="'+u.val()+'"][hidden]').length&&(u.val(""),setTimeout(function(){e()}))}var n=p.find("option:selected").val(),i=u.find("option:selected").val();""==n&&""==i?t(".azh-library .azh-sections .azh-section").show():(""!=n&&""==i&&(t(".azh-library .azh-sections .azh-section").hide(),t('.azh-library .azh-sections .azh-section[data-path^="'+n+'"]').show(),a()),""==n&&""!=i&&(t(".azh-library .azh-sections .azh-section").hide(),t('.azh-library .azh-sections .azh-section[data-tags*="'+i+'"]').show()),""!=n&&""!=i&&(t(".azh-library .azh-sections .azh-section").show(),t('.azh-library .azh-sections .azh-section:not([data-path^="'+n+'"])').hide(),a(),t('.azh-library .azh-sections .azh-section:not([data-tags*="'+i+'"])').hide()))}azh.tags={};var n={};for(var i in azh.dirs_options)if("tags"in azh.dirs_options[i])for(var o in azh.dirs_options[i].tags){var s=azh.dirs_options[i].tags[o].split(",").map(function(a){return t.trim(a)&&(azh.tags[t.trim(a).toLowerCase()]=!0),t.trim(a).toLowerCase()});n[i+"/"+o]=s}t(".azh-library .azh-sections .azh-section, .azh-library .azh-elements .azh-element").each(function(){var a=t(this).attr("data-tags");(a=a||"").split(",").map(function(a){t.trim(a)&&(azh.tags[t.trim(a).toLowerCase()]=!0)})}),t(".azh-library .azh-sections .azh-section, .azh-library .azh-elements .azh-element").each(function(){var a,e,i,o=t(this).data("dir")+"/"+t(this).data("path");o in n&&(a=t(this),e=n[o],i=(i=(i=(i=(i=a.attr("data-tags"))||"").split(",").filter(function(t){return t})).concat(e)).filter(function(t,a,e){return e.indexOf(t)===a}),a.attr("data-tags",i.join(",")))});var h={};for(var i in azh.dirs_options)if("child-suggestions"in azh.dirs_options[i])for(var o in azh.dirs_options[i]["child-suggestions"]){(d=i+"/"+o)in h||(h[d]=[]),t(azh.dirs_options[i]["child-suggestions"][o]).each(function(){h[d].push(i+"/"+this)}),o in h||(h[o]=[]),t(azh.dirs_options[i]["child-suggestions"][o]).each(function(){h[o].push(this)})}var l={};for(var d in h)t(h[d]).each(function(){var a=this;t(".azh-library .azh-elements .azh-element").each(function(){t(this).data("dir")+"/"+t(this).data("path")==a&&(d in l||(l[d]=[]),l[d].push(this)),t(this).data("path")==a&&(d in l||(l[d]=[]),l[d].push(this))})});t(".azh-library .azh-elements .azh-element").each(function(){var a=t(this).data("dir")+"/"+t(this).data("path");a in l&&t(this).data("child-suggestions",l[a]),t(this).data("path")in l&&t(this).data("child-suggestions",l[t(this).data("path")])}),t(".azh-add-section").off("click").on("click",function(){return t(".azh-sections .azh-section.azh-fuzzy").removeClass("azh-fuzzy"),"none"==t(".azh-library").css("display")?(t(".azh-structure").animate({"max-height":"100px"},400,function(){t(".azh-structure").scrollTop(t(".azh-structure")[0].scrollHeight)}),t(".azh-sections").height(t("#azexo-html-library > .azh-builder").height()-(t(".azh-structure").outerHeight()>100?100:t(".azh-structure").outerHeight())-120),t(".azh-library").slideDown(),t(this).text(t(this).data("close")),t(this).addClass("azh-open"),t(".azh-section-operations").addClass("azh-open"),t(this).data("category")?p.val(t(this).data("category")):azh.default_category&&p.find('[value="'+azh.default_category+'"]').length&&p.val(azh.default_category),e()):(t(".azh-structure").animate({"max-height":"600px"},400),t(".azh-library").slideUp(),t(this).text(t(this).data("open")),t(this).removeClass("azh-open"),t(".azh-section-operations").removeClass("azh-open")),!1}),t(".azh-copy-sections-list").off("click").on("click",function(){var a=[];t(".azh-structure .azh-section-path").each(function(){a.push(t(this).text())});var e=t("<input>");return t("body").append(e),e.val(a.join("|")).select(),document.execCommand("copy"),e.remove(),azh.notify(azh.i18n.copied),!1}),t(".azh-insert-sections-list").off("click").on("click",function(){var a=prompt(azh.i18n.paste_sections_list_here);return""!==t.trim(a)&&t(a.split("|")).each(function(){t('.azh-library .azh-sections .azh-section[data-path="'+this+'"]').click()}),!1});var p=t(".azh-library .azh-categories").off("change").on("change",e),u=t("<select></select>").appendTo(".azh-library-filters").on("change",e);t('<option selected value="">'+azh.i18n.filter_by_tag+"</option>").appendTo(u),Object.keys(azh.tags).sort().forEach(function(a,e){t('<option value="'+a+'">'+a+"</option>").appendTo(u)}),azh.default_category&&p.find('[value="'+azh.default_category+'"]').length&&(p.val(azh.default_category),e()),t("#azexo-html-library .azh-panel.azh-builder").is(".azh-empty")&&t(".azh-add-section:not([data-category])").trigger("click"),t(".azh-library .azh-sections .azh-section").off("click").on("click",function(){function e(t){var e=azh.window.scrollTop();t=t.replace(/{{azh-uri}}/g,n.data("dir-uri")),t=r(t=azh.do_replaces(t));var i=azh.$('<div data-section="'+n.data("path")+'">'+t+"</div>");b(i.get(0)),a.append(i),azh.section_customization_init(i),azh.frontend_init&&azh.frontend_init(i),azh.window.trigger("resize"),azh.structure_refresh(a);azh.window.scrollTop(e),n.is(".general")||U('<div data-section="'+n.data("path")+'">'+t+"</div>",n.data("path"),function(){})}var n=t(this);return n.data("url")in azh.sections_cache?e(azh.sections_cache[n.data("url")]):t.get(n.data("url"),function(t){azh.sections_cache[n.data("url")]=t,e(t)}),!1}),0===t("#azexo-html-library > .azh-general .azh-section").length&&t(".azh-library .azh-sections .azh-section.general").each(function(){var a=t(this).clone(!0);a.css("display","").removeClass("azh-fuzzy"),t("#azexo-html-library > .azh-general").append(a)}),0===t("#azexo-html-library > .azh-general .azh-section").length&&t("#azexo-html-library > .azh-library-actions > .azh-general").remove(),t(".azh-library-actions > div:not(.azh-save)").off("click").on("click",function(){t("#azexo-html-library > .azh-active, #azexo-html-library .azh-library-actions .azh-active").removeClass("azh-active");var a=t.trim(t(this).attr("class"));t(this).addClass("azh-active"),t("#azexo-html-library > ."+a).addClass("azh-active")}),t(".azh-library-actions > .azh-save").off("click").on("click",function(t){azh.save(),t.which&&c.one("azh-saved",function(){azh.notify(azh.i18n.saved)})}),t("#azexo-html-library .azh-panel .azh-panel-content").each(function(){var a=t(this);t(this).height(a.closest(".azh-panel").height()-a.closest(".azh-panel").find(".azh-panel-title").outerHeight()-20)}),t("#azexo-html-library .azh-revisions.azh-panel").off("click").on("click",function(a){var e=t(a.target).closest(".azh-revision");e.length&&(azh.content_wrapper.addClass("azh-loading"),t.post(azh.ajaxurl,{action:"azh_load_post",post_id:e.data("id")},function(t){t&&t.content?(t.settings&&t.settings.shortcodes&&(azh.shortcode_instances=t.settings.shortcodes),azh.controls_container.empty(),azh.content_wrapper.html(t.content),b(azh.content_wrapper.get(0)),azh.content_wrapper=azh.$(azh.content_wrapper),azh.content_wrapper.find("[data-section]").each(function(){azh.$(this).parents("[data-element]").length||azh.section_customization_init(azh.$(this))}),azh.frontend_init&&azh.frontend_init(azh.content_wrapper),azh.structure_refresh(azh.content_wrapper),azh.changed=!1,e.closest(".azh-panel").find(".azh-restore-revision").show().data("id",e.data("id"))):alert(azh.i18n.revision_does_not_have_builder_content),azh.content_wrapper.removeClass("azh-loading")},"json"));var n=t(a.target).closest(".azh-restore-revision");n.length&&t.post(azh.ajaxurl,{action:"azh_restore_revision",post_id:n.data("id")},function(t){t&&azh.notify(azh.i18n.revision_has_been_restored),n.hide()})}),t(".azh-elements-hierarchy").remove();t('<div class="azh-elements-hierarchy"></div>').appendTo(z).show();c.trigger("azh-library-init"),setTimeout(function(){Ft(),t(".azh-library-actions > .azh-builder").trigger("click")})},azh.customizer_init=function(){createEditor(azh.window.get(0),azh.document.get(0)),t.ui&&t.ui.mouse&&t.widget("ui.rotatable",t.ui.mouse,{options:{handle:!1,angle:!1,start:null,rotate:null,stop:null},handle:function(t){if(void 0===t)return this.options.handle;this.options.handle=t},angle:function(t){if(void 0===t)return this.options.angle;this.options.angle=t,this.elementCurrentAngle=t,this.performRotation(this.options.angle)},_create:function(){var a;this.options.handle?a=this.options.handle:(a=t(azh.document.get(0).createElement("div"))).addClass("ui-rotatable-handle"),this.listeners={rotateElement:t.proxy(this.rotateElement,this),startRotate:t.proxy(this.startRotate,this),stopRotate:t.proxy(this.stopRotate,this),wheelRotate:t.proxy(this.wheelRotate,this)},this.element.bind("wheel",this.listeners.wheelRotate),a.draggable({helper:"clone",start:this.dragStart,handle:a}),a.bind("mousedown",this.listeners.startRotate),a.appendTo(this.element),0!=this.options.angle?(this.elementCurrentAngle=this.options.angle,this.performRotation(this.elementCurrentAngle)):this.elementCurrentAngle=0},_destroy:function(){this.element.removeClass("ui-rotatable"),this.element.find(".ui-rotatable-handle").remove()},performRotation:function(t){var a=this.element.get(0).style.transform,e=/rotate\(([-\.\d]+)rad\)/g.exec(a=a||"");a=e?a.replace(e[0],"rotate("+t+"rad)"):"rotate("+t+"rad)",this.element.get(0).style.transform=a},getElementOffset:function(){this.performRotation(0);var t=this.element[0].getBoundingClientRect();return this.performRotation(this.elementCurrentAngle),t},getElementCenter:function(){var t=this.getElementOffset(),a=t.left+this.element.width()/2,e=t.top+this.element.height()/2;return Array(a,e)},dragStart:function(t){if(this.element)return!1},startRotate:function(t){var a=this.getElementCenter(),e=t.pageX-a[0],n=t.pageY-a[1];return this.mouseStartAngle=Math.atan2(n,e),this.elementStartAngle=this.elementCurrentAngle,this.hasRotated=!1,this._propagate("start",t),azh.document.bind("mousemove",this.listeners.rotateElement),azh.document.bind("mouseup",this.listeners.stopRotate),!1},rotateElement:function(t){if(!this.element||this.element.disabled)return!1;var a=this.getElementCenter(),e=t.pageX-a[0],n=t.pageY-a[1],i=Math.atan2(n,e)-this.mouseStartAngle+this.elementStartAngle;if(t.shiftKey){var o=15/180*Math.PI;i<0&&(o*=-1),i-=(i+o/2)%o-o/2}i=Math.round(1e3*i)/1e3,this.performRotation(i);var s=this.elementCurrentAngle;return this.elementCurrentAngle=i,this._propagate("rotate",t),s!=i&&(this._trigger("rotate",t,this.ui()),this.hasRotated=!0),!1},stopRotate:function(t){if(this.element&&!this.element.disabled)return azh.document.unbind("mousemove",this.listeners.rotateElement),azh.document.unbind("mouseup",this.listeners.stopRotate),this.elementStopAngle=this.elementCurrentAngle,this._propagate("stop",t),setTimeout(function(){this.element=!1},10),!1},wheelRotate:function(t){var a=Math.round(t.originalEvent.deltaY/10)*Math.PI/180;a=Math.round(1e3*a)/1e3,a=this.elementCurrentAngle+a,this.elementStartAngle=this.elementCurrentAngle,this._trigger("start",t,this.ui()),this.angle(a),this._trigger("rotate",t,this.ui()),this.elementStopAngle=this.elementCurrentAngle,this.hasRotated=!0,this._trigger("stop",t,this.ui()),t.preventDefault()},_propagate:function(a,e){t.ui.plugin.call(this,a,[e,this.ui()]),"rotate"!==a&&this._trigger(a,e,this.ui())},plugins:{},ui:function(){return{api:this,element:this.element,angle:{start:this.elementStartAngle,current:this.elementCurrentAngle,stop:this.elementStopAngle}}}}),azh.window.trigger("azh-customizer-before-init",{azh:azh}),c.trigger("azh-customizer-before-init",{azh:azh}),azh.window.one("az-frontend-before-init",function(t,a){var e=a.wrapper;azh.content_wrapper.has(e).length?e.find("[data-section]").addBack().filter("[data-section]").each(function(){azh.$(this).parents("[data-element]").length||azh.section_customization_init(azh.$(this))}):e.is(azh.body)&&azh.content_wrapper.find("[data-section]").addBack().filter("[data-section]").each(function(){azh.$(this).parents("[data-element]").length||azh.section_customization_init(azh.$(this))}),azh.changed=!1}),azh.window.one("az-frontend-after-init",function(t,a){q(azh.content_wrapper)}),azh.window.on("click",function(t,a){q(azh.content_wrapper)}),azh.content_wrapper=!1,azh.body.find(".azh-content-wrapper").length?(azh.content_wrapper=azh.body.find(".azh-content-wrapper").first(),azh.structure_refresh(azh.content_wrapper),azh.library_init(azh.content_wrapper)):azh.body.is(".page-template-azexo-html-template")?(azh.content_wrapper=azh.body.find("> .page"),azh.structure_refresh(azh.content_wrapper),azh.library_init(azh.content_wrapper)):azh.body.is(".page")&&("azexo"in azh.window?azh.content_wrapper=azh.body.find("#content > .entry > .entry-content"):azh.content_wrapper=azh.body.find("[data-section]").first().parent(),azh.structure_refresh(azh.content_wrapper),azh.library_init(azh.content_wrapper)),azh.content_wrapper?(t(".azh-controls-container").length?azh.controls_container=t(".azh-controls-container"):azh.controls_container=t('<div class="azh-controls-container"></div>').appendTo(z),setTimeout(function(){ot(azh.content_wrapper)}),azh.body.find("a[href]").on("click",function(t){t.preventDefault()})):alert(azh.i18n.content_wrapper_does_not_exists),azh.window.trigger("azh-customizer-after-init",{azh:azh}),c.trigger("azh-customizer-after-init",{azh:azh}),azh.changed=!1},azh.prepare=function(t){b(t||azh.body.get(0))},azh.save=function(a){a||(a="azh_save"),azh.window.trigger("azh-before-save",{action:a}),azh.content_wrapper.find(".az-free-positioning").each(function(){A(azh.$(this),"data-height",azh.$(this).height()),A(azh.$(this),"data-width",azh.$(this).width())}),azh.content_wrapper.find(".az-auto-rescale").each(function(){var t=azh.$(this);t.is("[data-width]")||A(t,"data-width",t.width()),t.is("[data-height]")||A(t,"data-height",t.height())});var e=azh.$(azh.content_wrapper.get(0)).clone(!0);azh.liquid_prepare(e);var n=r(k(e));if(!1===n)return alert(azh.i18n.html_is_not_valid),!1;n=l(n),t.post(azh.ajaxurl,{action:a,post_id:azh.post_id,shortcodes:azh.shortcode_instances,content:n},function(e){e&&(c.trigger("azh-saved"),"azh_autosave"===a&&t('#azexo-html-library .azh-revisions .azh-panel-content .azh-revision[data-type="autosave"]').first().remove(),t("#azexo-html-library .azh-revisions .azh-panel-content").prepend('<div class="azh-revision" data-id="'+e.id+'" data-type="'+e.type+'"><div class="azh-gravatar">'+e.gravatar+'</div><div class="azh-details"><div class="azh-date">'+e.date+'</div><div class="azh-meta">'+e.author+"</div></div></div>"))},"json"),azh.changed=!1},azh.change=function(){azh.changed=!0},azh.liquid_prepare=function(t,a){t.find(".az-liquid-container").addBack().filter(".az-liquid-container").each(function(){var t=azh.$(this);t.contents().filter(function(){return 3===this.nodeType}).remove();var e=t.children("script[data-liquid]").last();for(e.is(":not(:last-child)")&&(e.detach(),t.append(e)),t.children().not("script[data-liquid]").each(function(){var t=azh.$(this);if(!t.is(".az-liquid-content")){var e=at(t,".az-liquid-content");if(e.length)return t.is(a)&&(a=e),e.detach(),void t.replaceWith(e);t.remove()}});t.children(".az-liquid-content").length>1;)a?t.children(".az-liquid-content").not(a).not(t.children(".az-liquid-content").has(a)).first().remove():t.children(".az-liquid-content").first().remove()}),t.find("script[data-liquid]").each(function(){var t=azh.$(this).parent();t.is(":not(.az-liquid-container)")&&(t.contents().filter(function(){return 3===this.nodeType}).remove(),t.children().not("script[data-liquid]").remove())})},azh.liquid_process=function(a,n){if(!a.closest(".az-liquid-process").length){var i={};a.find("script[data-liquid]").each(function(){var t=azh.$(this),a=e();t.attr("data-liquid",a),i[a]=k(t.wrap("<div></div>").parent(),!0),t.unwrap(),azh.$.each(t.get(0).attributes,function(t,a){var e=a.name.split("-");2===e.length&&(n[e[1]]=a.value)}),t.data("azh-open-tag","\x3c!-- azexo-liquid-begin-"+a+" --\x3e"),t.data("azh-close-tag","\x3c!-- azexo-liquid-end-"+a+" --\x3e")}),Dt();var o=k(a,!0);if(t.trim(o))try{var s=Liquid.parse(o).render(n);for(var r in i){var h=new RegExp("\x3c!--\\s*azexo-liquid-begin-"+r+"\\s*--\x3e((.|[\r\n])*?)\x3c!--\\s*azexo-liquid-end-"+r+"\\s*--\x3e","gi"),l=a.find('script[data-liquid="'+r+'"]');l.parent(".az-liquid-container").length?(l.is(":first-child")&&(s=s.replace(h,i[r]+"$1")),l.is(":last-child")&&(s=s.replace(h,"$1"+i[r]))):s=s.replace(h,i[r]+"$1")}s=(s=s.replace(/(<!--\s*azexo-liquid-begin-[\d\w]+\s*-->)/gi,"")).replace(/(<!--\s*azexo-liquid-end-[\d\w]+\s*-->)/gi,"");var c=a.closest("[data-element], [data-section]");if(c.length&&c.data("azh-controls")){var d=c.data("azh-controls").find(".azh-utility");d.length&&(d.children(".azh-controls-list").empty(),d.data("azh-filled",!1),d.closest(".azh-active").removeClass("azh-active"))}a.children().each(function(){E(azh.$(this))}),a.html(s),a.children().each(function(){b(this)}),a.find("a[href]").on("click",function(t){t.preventDefault()}),a.addClass("az-liquid-process"),et(a),azh.frontend_init&&azh.frontend_init(a),a.removeClass("az-liquid-process"),Et()}catch(t){}}};var Ht,Wt;t.QueryString=f(window.location.search.substr(1).split("&")),"azh"in t.QueryString&&"customize"==t.QueryString.azh?(t('head link[rel="stylesheet"][href]').each(function(){var a=t(this);W[a.attr("href").split("?")[0]]=a}),window===window.parent&&("post-php"===window.adminpage?t(function(){z=t("body")}):(Ht=function(){azh.body=azh.$("body"),b(azh.body.get(0))},Wt=!1,azh.$.holdReady(!0),"complete"===azh.document.get(0).readyState?setTimeout(function(){Wt||(Wt=!0,Ht(),azh.$.holdReady(!1))}):azh.document.get(0).addEventListener?(azh.document.get(0).addEventListener("DOMContentLoaded",function(){Wt||(Wt=!0,Ht(),azh.$.holdReady(!1))},!1),azh.window.get(0).addEventListener("load",function(){Wt||(Wt=!0,Ht(),azh.$.holdReady(!1))},!1)):(azh.document.get(0).attachEvent("onreadystatechange",function(){Wt||(Wt=!0,Ht(),azh.$.holdReady(!1))}),azh.window.get(0).attachEvent("onload",function(){Wt||(Wt=!0,Ht(),azh.$.holdReady(!1))})),t(function(){z=t("body"),azh.customizer_init()})))):t(function(){if(window===window.parent){if(azh.edit_links_refresh=function(){function a(a){t(a.data("edit-link-control")).css({top:a.offset().top,left:a.offset().left,width:a.outerWidth(),height:a.outerHeight()}).show()}function e(a){t(a.data("edit-link-control")).hide()}function n(i){var o=!0;return c.width()<i.offset().left+i.outerWidth()&&(o=!1),i.is(":visible")||(o=!1),i.parents().each(function(){var s=t(this),r=s.data("elements-with-azh-edit-link");r||(r=[]),r=r.concat(i.get()),r=t.unique(r),s.data("elements-with-azh-edit-link",r),"none"!=s.css("display")&&"0"!=s.css("opacity")&&"hidden"!=s.css("visibility")||(o=!1,s.off("click.azh mouseenter.azh mouseleave.azh").on("click.azh mouseenter.azh mouseleave.azh",function(){var i=s.data("elements-with-azh-edit-link");t(i).each(function(){n(t(this))?a(t(this)):e(t(this))})}))}),o}var i=!1;for(var o in t(".azh-edit-links").length?(i=t(".azh-edit-links")).detach():i=t('<div class="azh-edit-links"></div>'),azh.edit_links){if(!("elements"in azh.edit_links[o])){azh.edit_links[o].elements=[];var s=Object.keys(azh.edit_links[o].links);s.sort(function(t,a){return a.length-t.length});for(var r=0;r<s.length;r++){var h=s[r],l=0;t(h).each(function(){if(!t(this).data("edit-link-control")){var a=t('<div class="azh-edit-link" data-edit-link-control=""><a href="'+azh.edit_links[o].links[h]+"&occurrence="+l+'" target="'+azh.edit_links[o].target+'">'+azh.edit_links[o].text+"</a></div>").appendTo(i).css({top:"0",left:"0",width:"0",height:"0","z-index":"9999999","pointer-events":"none",position:"absolute"}).hide();l++,a.find("a").css({position:"absolute",display:"inline-block",padding:"5px 10px",color:"black","font-weight":"bold","background-color":"white","box-shadow":"0px 5px 5px rgba(0, 0, 0, 0.1)","pointer-events":"all"}).on("mouseenter",function(){t(this).parent().css("background-color","rgba(0, 255, 0, 0.1)"),azh.edit_links_refresh()}).on("mouseleave",function(){t(this).parent().css("background-color","transparent")}),"css"in azh.edit_links[o]&&t(a).find("a").css(azh.edit_links[o].css),t(this).data("edit-link-control",a),azh.edit_links[o].elements.push(t(this))}})}}for(r=0;r<azh.edit_links[o].elements.length;r++){var d=azh.edit_links[o].elements[r];n(d)?a(d):e(d)}}i.appendTo(z)},"azh"in window&&"edit_links"in azh){var a=0;setInterval(function(){a+=1},1e3);c.on("mousemove",function(t){a=0}),c.on("keypress",function(t){a=0}),c.on("resize.azh scroll.azh",_.throttle(function(){a>2&&azh.edit_links_refresh()},1e3)),setTimeout(function(){azh.edit_links_refresh()},100)}t("#wp-admin-bar-edit-links").addClass("azh-edit-links-active"),t("#wp-admin-bar-edit-links").off("click.azh").on("click.azh",function(a){var e=t(this);e.is(".azh-edit-links-active")?(t(".azh-edit-links div.azh-edit-link[style] a[href][style][target]").each(function(){var a=t(this);a.is(":visible")&&(a.data("visible",!0),a.hide())}),t(".azh-edit-links div.azh-edit-link[style] a[href][style][target]").hide(),e.removeClass("azh-edit-links-active"),e.css("opacity","0.4"),c.off("resize.azh scroll.azh")):(t(".azh-edit-links div.azh-edit-link[style] a[href][style][target]").each(function(){var a=t(this);a.data("visible")&&a.show()}),e.addClass("azh-edit-links-active"),e.css("opacity","1"),c.on("resize.azh scroll.azh",function(){azh.edit_links_refresh()})),a.preventDefault()})}})}(window.jQuery);
